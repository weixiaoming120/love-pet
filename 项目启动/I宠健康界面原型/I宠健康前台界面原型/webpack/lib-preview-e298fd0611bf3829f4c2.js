webpackJsonp([1],{"+knQ":function(e,t,n){"use strict";t.a={prefixAgo:null,prefixFromNow:"从现在开始",suffixAgo:"之前",suffixFromNow:null,seconds:"不到 1 分钟",minute:"大约 1 分钟",minutes:"%d 分钟",hour:"大约 1 小时",hours:"大约 %d 小时",day:"1 天",days:"%d 天",month:"大约 1 个月",months:"%d 月",year:"大约 1 年",years:"%d 年",numbers:[],wordSeparator:""}},"/GiX":function(e,t){},"/MvA":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("GiK3"),c=n.n(i),s=n("KSGD"),u=n.n(s),l=n("O27J"),p=(n.n(l),n("hygk")),f=n.n(p),d=n("WCZ4"),h=n("OBe3"),m=(n.n(h),[]),v=Object.assign(document.createElement("div"),{className:"modal-portal"}),y=function(e){return e.stopPropagation()},g=function(e){function t(){var n,a,i;r(this,t);for(var s=arguments.length,u=Array(s),p=0;p<s;p++)u[p]=arguments[p];return n=a=o(this,e.call.apply(e,[this].concat(u))),a.onOpen=function(){m.unshift(a),setTimeout(function(){return a.portal.classList.add("is-open")},50),a.focusOnConfirmBtn(),a.reassignPosiY()},a.onClose=function(){var e=m.indexOf(a);setTimeout(function(){return m.splice(e,1)}),setTimeout(function(){return a.portal.classList.remove("is-open")},50),setTimeout(function(){return Object(l.render)(c.a.createElement("div",null),a.portal)},500)},a.focusOnConfirmBtn=function(){return setTimeout(function(){var e=a.portal.querySelector("footer .confirm-btn");e&&e.focus()},50)},a.listenToKey=function(e){var t=e.key,n=e.target,r=a.props,o=r.isOpen,i=r.canCloseOnEsc,c=r.onClose,s=r.canConfirmOnEnter,u=r.onConfirm,l=r.isOnConfirmDisabled;"Escape"===t&&!n.matches("input, textarea, [type=select]")&&o&&i&&c&&a===m[0]&&c(),"Enter"===t&&!n.matches("textarea")&&o&&s&&u&&!l&&a===m[0]&&u()},a.reassignPosiY=function(){return setTimeout(function(){var e=a.props.type,t=a.portal.querySelector(".modal-mask > div");if(t&&"alert"!==e){var n=window.innerHeight,r=t.offsetHeight,o=n<=r||(n-r)/2<.2*n?"add":"remove";t.classList[o]("is-posi-centered")}},50)},a.renderRealModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.props,t=e.type,n=e.title,r=e.className,o=e.maskClassName,i=e.children,s=e.onClose,u=e.canCloseOnClickMask,p=e.onConfirm,f=e.confirmText,h=e.isOnConfirmDisabled,m=e.onCancel,v=e.cancelText,g=e.isOnCancelDisabled,b=e.onDone,w=e.doneText,E=e.isOnDoneDisabled,C="alert"===t||m||p||b,O=c.a.createElement("div",{className:"modal-mask "+o+" "+(u?"can-close":""),onClick:u?s:null},c.a.createElement("div",{className:t+"-modal "+r,onClick:y},c.a.createElement("header",null,n,s&&c.a.createElement("button",{className:"close-btn",onClick:s},c.a.createElement(d.a,{name:"times"}))),c.a.createElement("div",{className:"content"},i),C&&c.a.createElement("footer",null,m&&c.a.createElement("button",{className:"cancel-btn",onClick:m,disabled:g},v),p&&c.a.createElement("button",{className:"confirm-btn",onClick:p,disabled:h},f),b&&c.a.createElement("button",{className:"done-btn",onClick:b,disabled:E},w))));Object(l.render)(O,a.portal)},i=n,o(a,i)}return a(t,e),t.prototype.render=function(){return null},t.prototype.componentDidMount=function(){var e=this.props,t=e.isOpen,n=e.portalClassName;Object.assign(this,{portal:v.cloneNode()}),document.body.appendChild(this.portal),this.portal.className+=" "+n,window.addEventListener("resize",this.reassignPosiY),document.addEventListener("keydown",this.listenToKey),t&&(this.renderRealModal(),this.onOpen())},t.prototype.componentWillReceiveProps=function(e){f()(this.props,e)||this.renderRealModal(e);var t=e.isOpen,n=this.props.isOpen;!n&&t?this.onOpen():n&&!t&&this.onClose()},t.prototype.componentWillUnmount=function(){Object(l.unmountComponentAtNode)(this.portal),this.portal&&this.portal.remove(),document.removeEventListener("keydown",this.listenToKey),window.removeEventListener("resize",this.reassignPosiY)},t}(i.PureComponent);g.propTypes={isOpen:u.a.bool,type:u.a.oneOf(["alert","functional","display"]),title:u.a.any,className:u.a.string,maskClassName:u.a.string,portalClassName:u.a.string,children:u.a.any,onClose:u.a.func,onCloseText:u.a.string,canCloseOnClickMask:u.a.bool,canCloseOnEsc:u.a.bool,canConfirmOnEnter:u.a.bool,onConfirm:u.a.func,confirmText:u.a.string,isOnConfirmDisabled:u.a.bool,onCancel:u.a.func,isOnCancelDisabled:u.a.bool,cancelText:u.a.string,onDone:u.a.func,isOnDoneDisabled:u.a.bool,doneText:u.a.string},g.defaultProps={isOpen:!1,type:"functional",className:"",maskClassName:"",portalClassName:"",onClose:function(){return null},canCloseOnClickMask:!0,canCloseOnEsc:!0,canConfirmOnEnter:!0,onCloseText:I18N.close,confirmText:I18N.confirm,isOnConfirmDisabled:!1,cancelText:I18N.cancel,isOnCancelDisabled:!1,doneText:I18N.done,isOnDoneDisabled:!1},t.a=g},"0DSl":function(e,t,n){var r=n("YkxI"),o=n("zBOP");e.exports=function(e){return r(function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,c&&o(n[0],n[1],c)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var s=n[r];s&&e(t,s,r,i)}return t})}},"0L5u":function(e,t){e.exports={"editable-span":"_3kZ6Tt9vKO7jl4aGylRTa6","reply-textarea":"_2MMdtZStiVFrqpPWeqIzKH"}},"0ghZ":function(e,t,n){var r=n("PfJA"),o=n("iYj9"),a=n("KGqH");e.exports=function(e){return o(e)?a(e):r(e)}},"0oll":function(e,t,n){"use strict";var r=n("GiK3"),o=n.n(r),a=n("O27J"),i=n.n(a),c=n("RH2O"),s=n("jBIO"),u=n("7vNm"),l=n("wFrT"),p=window.$;t.a={containerReducerMap:s.b,sagaMap:s.c,extendCallback:function(e){e.setObserver("focus-method:request-focus",f),e.renderPreview=function(t,n){var r=e.store;r.dispatch({type:"entry:refresh:project-related"}),i.a.render(o.a.createElement(c.Provider,{store:r},o.a.createElement(s.a,null)),n),i.a.render(o.a.createElement(l.a.containers.Alert,{store:r}),Object(u.b)())},e.pushData=function(t,n,r){e.store.dispatch({type:"entry:state:push-data",payload:{pushType:t,action:n,data:r}})},e.checkLocationHash=function(){var t=window.location.hash||"",n=e.store,r=n.getState,o=n.dispatch;if(t.startsWith("#thread=")){var a=t.substr("#thread=".length),i=r().model.commentThreads.find(function(e){return e.cid===a});if(!i)return console.warn("[checkLocationHash] missing commentThread: "+a);o({type:"entry:sync-runner:set-screen",payload:{cid:i.screen_cid}}),o({type:"entry:comment:set:active",payload:{isActive:!0}}),o({type:"container:comment:select",payload:{select:i.cid}})}else if(t.startsWith("#screen=")){var c=t.substr("#screen=".length),s=r().model.screens.find(function(e){return e.cid===c});if(!s)return console.warn("[checkLocationHash] missing screen: "+c);o({type:"entry:sync-runner:set-screen",payload:{cid:s.cid}})}},e.updateCurrentScreenRunner=function(t){if(!t)return console.warn("[updateCurrentScreenRunner] missing currentScreen");e.store.dispatch({type:"entry:current:set-screen",payload:t}),window.location.hash="#screen="+t.cid}}};var f=function(e,t){var n=document.getElementById("simulator-container"),r=t.getBoundingClientRect(),o=n.getBoundingClientRect();if(!(r.top>o.top&&r.bottom<o.bottom)){var a=r.top+.5*r.height-(o.top+.5*o.height),i=a<0?"up":"down",c=document.getElementById("simulator-wrapper"),s=d(i,a,n,o,c.getBoundingClientRect());if(n.scrollTop+=s,0!==(a-=s)){var u=p(".pcanvas.active .widgets")[0],l=p(".pcanvas.active .widgets .scontainer")[0];s=d(i,a,u,u.getBoundingClientRect(),l.getBoundingClientRect()),u.scrollTop+=s}}},d=function(e,t,n,r,o){return"up"===e&&n.scrollTop>0?Math.max(t,0-n.scrollTop):"down"===e&&n.scrollTop<o.height-r.height?Math.min(t,o.bottom-r.bottom):0}},"0xDb":function(e,t,n){"use strict";t.c=function(e){return e?{hidden:!0}:{}},t.a=function(e){return Object.entries(e).reduce(function(e,t){var n,r=t[0],a=t[1];return Object.assign(e,(n={},n[o()(r)]=a,n))},{})},t.d=function(e){return Object.entries(e).reduce(function(e,t){var n,r=t[0],o=t[1];return Object.assign(e,(n={},n[i()(r)]=o,n))},{})};var r=n("NRb0"),o=n.n(r),a=n("OAqO"),i=n.n(a),c=n("vLgD");n.d(t,"b",function(){return c.a})},"16tV":function(e,t,n){var r=n("tO4o"),o=n("ktak");e.exports=function(e){for(var t=o(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,r(i)]}return t}},"1C3V":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n("AxSz"),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return e&&window.parent.postMessage(JSON.stringify({event:e,payload:t}),n)},n=function(n){if(n.source!==window&&!n.origin.includes("qiyukf")&&n.data&&"string"==typeof n.data)try{var r=JSON.parse(n.data),o=r.event,a=r.payload,i=void 0===a?{}:a;e[o]&&e[o](t,{type:o,payload:i,event:n})}catch(e){console.warn("[receive] error message data",e,n)}};return window.addEventListener("message",n),{send:t,clear:function(){return window.removeEventListener("message",n)}}},i={"message:get:preview-state":function(e){var t=c(),n=t.state,r=t.project;e("message:data:preview-state",o({},n.model.current,{isHighlight:Boolean(r&&r._highlight)}))},"message:set:preview-state":function(e,t){var n=t.payload,a=n.isHighlight,i=n.screenCid,s=c(),u=s.state.model,l=u.current,p=u.screens,f=s.project,d=s.dispatch;if(f&&void 0!==a&&a!==f._highlight&&(d({type:"projects:update-local",payload:o({},f,{_highlight:a})}),r.a.MB.currentProject._highlight=a),l.screenCid&&void 0!==i&&i!==l.screenCid){if(!p.find(function(e){return e.cid===i}))return console.warn("[message:set:preview-state] invalid screenCid");d({type:"entry:sync-runner:set-screen",payload:{cid:i}})}},"message:get:screen-list":function(e){var t=r.a.MB.webpackInterface.store.getState().model,n=t.current;e("message:data:screen-list",t.screens.filter(function(e){return e.project_cid===n.projectCid}).map(function(e){return{cid:e.cid,name:e.name,position:e.position,parent_cid:e.parent_cid,project_cid:e.project_cid}}))},"message:get:notification-state":function(e){var t=(r.a.MB.notification&&r.a.MB.notification.store&&r.a.MB.notification.store.getState()||{}).notifications;e("message:data:notification-state",{unreadCount:t?t.notifications.unreadNum:0})},"message:get:notification-list":function(e){var t=(r.a.MB.notification&&r.a.MB.notification.store&&r.a.MB.notification.store.getState()||{}).notifications;e("message:data:notification-list",t?t.notifications.notifications:[])}},c=function(){var e=r.a.MB.webpackInterface.store,t=e.getState,n=e.dispatch,o=t(),a=o.model.current.projectCid;return{getState:t,dispatch:n,state:o,project:a&&o.model.projects.find(function(e){return e.cid===a})}}},"1Yb9":function(e,t){e.exports=function(){return!1}},"22B7":function(e,t){e.exports=function(e,t){return e===t||e!==e&&t!==t}},"2Bk7":function(e,t,n){"use strict";function r(e){try{o(),e()}finally{a()}}function o(){s++}function a(){s--}function i(){a();for(var e=void 0;!s&&void 0!==(e=c.shift());)r(e)}t.a=function(e){c.push(e),s||(o(),i())},t.c=o,t.b=i;var c=[],s=0},"2Hvv":function(e,t,n){var r=n("imBK");e.exports=function(e){return r(this.__data__,e)>-1}},"2KeS":function(e,t,n){"use strict";function r(e,t,n){function o(){m===f&&(m=f.slice())}function a(){return l}function i(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return o(),m.push(e),function(){if(t){t=!1,o();var n=m.indexOf(e);m.splice(n,1)}}}function c(e){if(!Object(p.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(v)throw new Error("Reducers may not dispatch actions.");try{v=!0,l=u(l,e)}finally{v=!1}for(var t=f=m,n=0;n<t.length;n++)(0,t[n])();return e}var s;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(r)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var u=e,l=t,f=[],m=f,v=!1;return c({type:h.INIT}),s={dispatch:c,subscribe:i,getState:a,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,c({type:h.INIT})}},s[d.a]=function(){var e,t=i;return e={subscribe:function(e){function n(){e.next&&e.next(a())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return n(),{unsubscribe:t(n)}}},e[d.a]=function(){return this},e},s}function o(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function a(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:h.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+h.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function i(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var c=Object.keys(n),s=void 0;try{a(n)}catch(e){s=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var r=!1,a={},i=0;i<c.length;i++){var u=c[i],l=n[u],p=e[u],f=l(p,t);if(void 0===f){var d=o(u,t);throw new Error(d)}a[u]=f,r=r||f!==p}return r?a:e}}function c(e,t){return function(){return t(e.apply(void 0,arguments))}}function s(e,t){if("function"==typeof e)return c(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},o=0;o<n.length;o++){var a=n[o],i=e[a];"function"==typeof i&&(r[a]=c(i,t))}return r}function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,o){var a=e(n,r,o),i=a.dispatch,c=[],s={getState:a.getState,dispatch:function(e){return i(e)}};return c=t.map(function(e){return e(s)}),i=u.apply(void 0,c)(a.dispatch),m({},a,{dispatch:i})}}}Object.defineProperty(t,"__esModule",{value:!0});var p=n("sMP3"),f=n("2MIV"),d=n.n(f),h={INIT:"@@redux/INIT"},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};n.d(t,"createStore",function(){return r}),n.d(t,"combineReducers",function(){return i}),n.d(t,"bindActionCreators",function(){return s}),n.d(t,"applyMiddleware",function(){return l}),n.d(t,"compose",function(){return u})},"2MIV":function(e,t,n){e.exports=n("bFAv")},"2X2u":function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},"2dbN":function(e,t){function n(e){if(e){var t=e.trim();return t=t.replace(/\.\d\d\d+/,""),t=t.replace(/-/,"/").replace(/-/,"/"),t=t.replace(/T/," ").replace(/Z/," UTC"),t=t.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(t)}}function r(e){return i.inWords(o(e))}function o(e){return(new Date).getTime()-e.getTime()}e.exports=function(e){return e instanceof Date?r(e):"string"==typeof e?r(n(e)):"number"==typeof e?r(new Date(e)):void 0};var a={allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[],wordSeparator:" "}},i=a.strings;e.exports.settings=a,i.inWords=function(e){function t(t,n){var r="function"==typeof t?t(n,e):t,o=i.numbers&&i.numbers[n]||n;return r.replace(/%d/i,o)}var n=i.prefixAgo,r=i.suffixAgo;a.allowFuture&&e<0&&(n=i.prefixFromNow,r=i.suffixFromNow);var o=Math.abs(e)/1e3,c=o/60,s=c/60,u=s/24,l=u/365,p=o<45&&t(i.seconds,Math.round(o))||o<90&&t(i.minute,1)||c<45&&t(i.minutes,Math.round(c))||c<90&&t(i.hour,1)||s<24&&t(i.hours,Math.round(s))||s<48&&t(i.day,1)||u<30&&t(i.days,Math.floor(u))||u<60&&t(i.month,1)||u<365&&t(i.months,Math.floor(u/30))||l<2&&t(i.year,1)||t(i.years,Math.floor(l)),f=i.wordSeparator||"";return void 0===i.wordSeparator&&(f=" "),[n,p,r].join(f).toString().trim()},i.parse=n},"2iFZ":function(e,t,n){"use strict";function r(e){return s.n.channel(e)?"channel":Array.isArray(e)?String(e.map(function(e){return String(e)})):String(e)}function o(e,t){function n(t,n){if(a===l)return u;if(n)throw a=l,n;o&&o(t);var r=e[a](),i=r[0],c=r[1],s=r[2];return a=i,o=s,a===l?u:c}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",o=void 0,a=t;return Object(s.q)(n,function(e){return n(null,e)},r,!0)}function a(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var c={done:!1,value:Object(p.i)(e)},s=function(e){return{done:!1,value:p.f.apply(void 0,[t].concat(a,[e]))}},u=void 0,d=function(e){return u=e};return o({q1:function(){return["q2",c,d]},q2:function(){return u===f.a?[l]:["q1",s(u)]}},"q1","takeEvery("+r(e)+", "+t.name+")")}function i(e,t){for(var n=arguments.length,a=Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];var c={done:!1,value:Object(p.i)(e)},s=function(e){return{done:!1,value:p.f.apply(void 0,[t].concat(a,[e]))}},u=function(e){return{done:!1,value:Object(p.e)(e)}},d=void 0,h=void 0,m=function(e){return d=e},v=function(e){return h=e};return o({q1:function(){return["q2",c,v]},q2:function(){return h===f.a?[l]:d?["q3",u(d)]:["q1",s(h),m]},q3:function(){return["q1",s(h),m]}},"q1","takeLatest("+r(e)+", "+t.name+")")}function c(e,t,n){for(var a=arguments.length,i=Array(a>3?a-3:0),c=3;c<a;c++)i[c-3]=arguments[c];var u=void 0,h=void 0,m={done:!1,value:Object(p.a)(t,d.a.sliding(1))},v=function(){return{done:!1,value:Object(p.i)(h)}},y=function(e){return{done:!1,value:p.f.apply(void 0,[n].concat(i,[e]))}},g={done:!1,value:Object(p.d)(s.j,e)},b=function(e){return u=e},w=function(e){return h=e};return o({q1:function(){return["q2",m,w]},q2:function(){return["q3",v(),b]},q3:function(){return u===f.a?[l]:["q4",y(u)]},q4:function(){return["q2",g]}},"q1","throttle("+r(t)+", "+n.name+")")}var s=n("Vr3j"),u={done:!0,value:void 0},l={},p=n("JJnU"),f=n("xJpq"),d=n("cXw4");n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return c})},"3IRH":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"3rZI":function(e,t){e.exports=function(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}},"5HQq":function(e,t){e.exports={"screen-node-content":"Uuhb0VzPcnrk3zgUGbW_Q"}},"5Zxu":function(e,t){e.exports=function(e){return e}},"6JlN":function(e,t){e.exports={"comment-marker":"_2DdCe4X_4uBwFVlS753YET"}},"6QCI":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=n("rxKx"),u=n.n(s),l=function(){function e(){var t=this;r(this,e),this.elementFrom=null,this.elementTo=null,this._delayedSync=null,this.delaySync=function(){t._delayedSync&&clearTimeout(t._delayedSync),t._delayedSync=setTimeout(function(){return t.sync()},100),t.sync()}}return e.prototype.init=function(e,t){this.elementFrom=e,this.elementTo=t,this.sync()},e.prototype.sync=function(){if(this.elementFrom){var e=this.elementFrom.scrollTop;this.elementTo.style.marginTop=0-e+"px"}},e}(),p=function(){function e(){o(this,e),this.timeoutMap=new Map}return e.prototype.setTimeout=function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var r=this,o=setTimeout(function(){t(),r.clearTimeout(e,t)},n);return this.setToken(e,t,o),o}),e.prototype.clearTimeout=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this.getToken(e,t);void 0!==n&&(clearTimeout(n),this.clearToken(e,t))}),e.prototype.clearTimeoutByKey=function(e){var t=this,n=this.timeoutMap.get(e);void 0!==n&&(n.forEach(function(n,r){return t.clearTimeout(e,r)}),this.timeoutMap.delete(e))},e.prototype.clear=function(){var e=this;this.timeoutMap.forEach(function(t,n){return e.clearTimeoutByKey(n)})},e.prototype.setToken=function(e,t,n){var r=this.timeoutMap.get(e);void 0===r&&(r=new Map,this.timeoutMap.set(e,r)),r.set(t,n)},e.prototype.getToken=function(e,t){var n=this.timeoutMap.get(e);if(n)return n.get(t)},e.prototype.clearToken=function(e,t){var n=this.timeoutMap.get(e);n&&n.delete(t)},e}(),f=function(){return(new Date).getTime()},d=function(){function e(){a(this,e),this.mouseState={down:!1,moved:!1},this.scrollState={x:null,y:null,left:null,top:null,target:null},this.windowState={blur:!1},this.coolDownTime=f(),this.coolDownInterval=200}return e.prototype.isCoolDown=function(){var e=f()-this.coolDownTime;return this.coolDownTime+=e,e>this.coolDownInterval},e.prototype.resetCoolDown=function(){this.coolDownTime-=this.coolDownInterval},e.prototype.bind=function(e){var t=this,n=e.onScreenFocus;window.addEventListener("blur",function(){t.windowState.blur=!0}),window.addEventListener("focus",function(){t.windowState.blur&&(t.windowState.blur=!1,n())})},e.prototype.bindMobile=function(e){var t=this,n=e.onOrientationChange;window.addEventListener(void 0!==window.onorientationchange?"orientationchange":"resize",n),$("body").on("touchstart",".pcanvas",function(){t.mouseState.down=!0,t.mouseState.moved=!1}).on("touchmove",".pcanvas",function(){t.mouseState.down&&(t.mouseState.moved=!0)}).on("touchend",function(){t.mouseState.down=!1})},e.prototype.bindDesktop=function(e){var t=this,n=e.onAppMouseDown,r=e.onAppMouseMove;$("body").on("mousedown","#simulator-container",function(e){if(n(e,t.scrollState,t.mouseState))return!0;t.mouseState.down=!0,t.mouseState.moved=!1,t.scrollState.x=e.clientX,t.scrollState.y=e.clientY}).on("mousemove","#simulator-container",function(e){if(r(e,t.scrollState,t.mouseState))return!0;t.mouseState.moved=!0}),window.addEventListener("mouseup",function(){t.mouseState.down=!1})},e}(),h=function(){function e(){i(this,e)}return e.prototype.setObjectUrl=function(e,t){e&&(e.contentWindow?e.contentWindow.location.replace(t):e.setAttribute("data",t))},e.prototype.deviceOrient=function(){return $(window).width()>$(window).height()?"landscape":"portrait"},e.prototype.cloneFixed=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=n.show().clone();return o.attr("id",o.attr("id")+"gh"),t.v&&o.css("opacity",t.o/100),o.css("top",t.t()),o.hasClass("clickable")&&o.css("pointer-events","auto"),n.hide(),r?(t.isBottomFixed(e)&&(MB.isOddIOS()&&this.deviceOrient()===e.orient()?o.css("top",$("#simulator").height()-(e.h()-t.t())+MB.COMPONENTS.status_bar.height):o.css("top",$("#simulator").height()-(e.h()-t.t()))),o):o},e.prototype.setScreenBg=function(e){var t=Screen.find(e.data("cid"));t&&e.css({"background-color":t.bg(),"background-image":t.bgimage?"url("+t.getRealBgImage()+")":""})},e.prototype.screenPreview=function(e){return'\n      <div id="pscreen'+e.cid+'" class="pcanvas '+e.orient()+'" data-cid="'+e.cid+'" data-orientation="'+e.orient()+'">\n      <div class="widgets">\n        <div class="scontainer">\n          <div class="sheader"></div>\n          <div class="sfooter"></div>\n        </div>\n      </div>\n      <div class="stickies"></div>\n    </div>\n    '},e}(),m=function(){function e(){c(this,e)}return e.prototype.activeWidth=function(){return"portrait"===MB.currentScreen.orientation?MB.currentProject.width:MB.currentProject.height},e.prototype.activeHeight=function(){return"portrait"===MB.currentScreen.orientation?MB.currentProject.height:MB.currentProject.width},e.prototype.hideScreen=function(e){$(e).hide(),$(e).find(".iframe").each(function(e,t){MB.runner.runnerUtil.setObjectUrl(t,"about:blank")})},e.prototype.doTransition=function(e,t,n,r){var o=this;n.enableTransition(r.delay()),t.enableTransition(r.delay()),r.template&&-1!==e.indexOf("menu")&&(e="none"),$.nextTick(function(){o[e](t,n,r)})},e.prototype.none=function(e,t,n){t.addClass("active"),e.removeClass("active top"),this.hideScreen(e),MB.runner.doneTransition(t)},e.prototype.slideIn=function(e,t,n,r,o,a){var i=this;e.transitionEnd(function(){e.removeClass("active"),t.addClass("active top"),i.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r),t[n](o)},e.prototype.slidebottom=function(e,t,n){this.slideIn(e,t,"translateY",0-this.activeHeight(),0,n)},e.prototype.slideleft=function(e,t,n){this.slideIn(e,t,"translateX",0-this.activeWidth(),0,n)},e.prototype.slidetop=function(e,t,n){this.slideIn(e,t,"translateY",this.activeHeight(),0,n)},e.prototype.slideright=function(e,t,n){this.slideIn(e,t,"translateX",this.activeWidth(),0,n)},e.prototype.slideMenu=function(e,t,n,r,o){t.zindex("2"),e.css("z-index","101"),e.transitionEnd(function(){MB.runner.doneTransition(t)}),e[n](r)},e.prototype.leftmenu=function(e,t,n){this.slideMenu(e,t,"translateX",this.activeWidth()*n.menu_offset/100,n)},e.prototype.rightmenu=function(e,t,n){this.slideMenu(e,t,"translateX",0-this.activeWidth()*n.menu_offset/100,n)},e.prototype.fixedIn=function(e,t,n,r,o){var a=this;t.addClass("top"),t.css("z-index","101"),t.transitionEnd(function(){0===r&&(e.removeClass("active"),t.addClass("active"),a.hideScreen(e)),MB.runner.doneTransition(t),0!==r&&t.css("z-index","101")}),t[n](r)},e.prototype.topin=function(e,t,n){this.fixedIn(e,t,"translateY",0,n)},e.prototype.popin=function(e,t,n){this.fixedIn(e,t,"translateY",0,n)},e.prototype.slideleft2=function(e,t,n){this.fixedIn(e,t,"translateX",0,n)},e.prototype.slideright2=function(e,t,n){this.fixedIn(e,t,"translateX",0,n)},e.prototype.leftdrawer=function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(n.menu_offset-100)/100,n)},e.prototype.rightdrawer=function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(100-n.menu_offset)/100,n)},e.prototype.fixedOut=function(e,t,n,r,o){var a=this;t.zindex("2"),e.transitionEnd(function(){e.removeClass("active"),t.addClass("active"),a.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r)},e.prototype.leftout=function(e,t,n){this.fixedOut(e,t,"translateX",0-this.activeWidth(),n)},e.prototype.rightout=function(e,t,n){this.fixedOut(e,t,"translateX",this.activeWidth(),n)},e.prototype.topout=function(e,t,n){this.fixedOut(e,t,"translateY",0-this.activeHeight(),n)},e.prototype.popout=function(e,t,n){this.fixedOut(e,t,"translateY",this.activeHeight(),n)},e.prototype.transitionHandler=function(e,t,n,r,o){switch("leftmenu"===e&&t.addClass("menu lmenu"),"rightmenu"===e&&t.addClass("menu rmenu"),"leftdrawer"===e&&n.addClass("drawer ldrawer"),"rightdrawer"===e&&n.addClass("drawer rdrawer"),e){case"popin":case"slidebottom":n.translate(0,o);break;case"topin":case"slidetop":n.translate(0,0-o);break;case"popout":case"none":case"leftout":case"rightout":case"topout":case"leftmenu":case"rightmenu":n.translate(0,0);break;case"slideright":case"slideleft2":case"leftdrawer":n.translate(0-r,0);break;case"slideleft":case"slideright2":case"rightdrawer":n.translate(r,0)}n[0].offsetHeight},e}();t.a=function(e){e.Hammer=u.a,e.ScrollSync=l,e.TimeoutBucket=p,e.EventBucket=d,e.RunnerUtil=h,e.TransitionUtil=m}},"719n":function(e,t,n){"use strict";var r=["onAbort","onAnimationEnd","onAnimationIteration","onAnimationStart","onBlur","onCanPlay","onCanPlayThrough","onClick","onContextMenu","onCopy","onCut","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onFocus","onInput","onInvalid","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadedData","onLoadedMetadata","onLoadStart","onMouseDown","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPaste","onPause","onPlay","onPlaying","onProgress","onRateChange","onReset","onScroll","onSeeked","onSeeking","onStalled","onSubmit","onSuspend","onTimeUpdate","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onTransitionEnd","onVolumeChange","onWaiting","onWheel"],o=["onAfterPrint","onBeforePrint","onBeforeUnload","onDeviceLight","onDeviceMotion","onDeviceOrientation","onDeviceProximity","onHashChange","onLanguageChange","onPopState","onRejectionHandled","onResize","onSelect","onStorage","onUnhandledRejection","onUnload","onUserProximity"],a=["onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp"];e.exports={allEvents:r.concat(o).concat(a),documentEvents:r.concat(a),windowEvents:o}},"7Mjc":function(e,t){var n=Math.floor,r=Math.random;e.exports=function(e,t){return e+n(r()*(t-e+1))}},"7YkW":function(e,t,n){var r=n("NGEn");e.exports=function(){if(!arguments.length)return[];var e=arguments[0];return r(e)?e:[e]}},"7vNm":function(e,t,n){"use strict";t.b=function(){var e=document.createElement("div");return document.body.appendChild(e),e},t.a=function(){var e=document.querySelector("#canvas").getBoundingClientRect(),t=document.querySelector("#screens"),n=t.getBoundingClientRect(),r=Math.abs(t.scrollLeft-(MB.config.screenContainerWidth-t.clientWidth)/2)>1,o=t.scrollTop!==MB.config.initialScrollTop,a=r||o;return{canvasTop:e.top,canvasLeft:e.left,canvasWidth:e.width,canvasHeight:e.height,screenTop:n.top,screenLeft:n.left,screenWidth:n.width,screenHeight:n.height,isDisplaced:a}},t.d=function(e){var t=e.getBoundingClientRect(),n=t.left,r=t.bottom,o=document.elementFromPoint(n,r);return e.contains(o)},t.c=function(){var e=document.getSelection();if(!(e.rangeCount>0))return{};for(var t={},n=e.getRangeAt(0).commonAncestorContainer;n&&"P"!==n.nodeName&&"text_editor"!==n.id;){if(1===n.nodeType)switch(n.nodeName){case"I":t.italic=!0;break;case"B":t.bold=!0;break;case"U":t.underline=!0;break;case"STRIKE":t.lineThrough=!0;break;case"FONT":t.tc=n.color;var r=n.style.backgroundColor;r&&(t.bg=MB.rgb2hex(r));break;case"SPAN":t.bg=MB.rgb2hex(n.style.backgroundColor)}n=n.parentNode}return t}},"804a":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return f});var o=function(e){return e instanceof Array?e:e?[e]:[]},a=function(e){return e.reduce(function(e,t){var n=o(t);return n.length?e.reduce(function(e,t){return n.forEach(function(n){return e.push(t+"-"+n)}),e},[]):e},["@"])},i=function(){function e(){r(this,e),this.permissionMap={}}return e.prototype.set=function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];a(n).forEach(function(t){return e.permissionMap[t]=!0})},e.prototype.check=function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=a(n);return!!o.length&&o.every(function(t){return e.permissionMap[t]})},e}(),c=["owner","admin","editor","viewer","guest"],s=c.reduce(function(e,t,n){return e[t]=n,e},{}),u=function(e){return c.filter(function(t,n){return s[t]<=s[e]})},l=new i,p=l.set.bind(l),f=l.check.bind(l);p("project",["delete","create"],u("owner")),p("project-update",u("editor")),p("project-read-whitelist",u("viewer")),p("project-read",u("guest")),p("team-project-delete",u("admin")),p("team-project-create",u("editor")),p("team-project-read-whitelist",u("viewer")),p("team-project-read",u("guest")),p("collaborator",["delete","create","update"],["editor","viewer"],u("owner")),p("collaborator-read",["editor","viewer"],u("viewer")),p("team-collaborator",["delete","create","update"],["admin"],u("owner")),p("team-collaborator",["delete","create","update"],["editor","viewer"],u("admin")),p("team-collaborator-read",["admin","editor","viewer"],u("viewer"))},"8AZL":function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},"9UkZ":function(e,t,n){var r=n("aCM0"),o=n("vi0E"),a=n("UnEC"),i="[object Object]",c=Function.prototype,s=Object.prototype,u=c.toString,l=s.hasOwnProperty,p=u.call(Object);e.exports=function(e){if(!a(e)||r(e)!=i)return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==p}},AA2F:function(e,t){e.exports={"comment-thread":"_1X5YGSh4qfeNuRriyAUmfC"}},Am6F:function(e,t){e.exports={"preview-panel":"_972Atke01Y16jEOOPRt5R"}},AxSz:function(e,t,n){"use strict";var r=n("2dbN"),o=n.n(r),a=n("+knQ"),i=n("HN2V"),c=n.n(i),s=window,u=s.confirm,l=s.alert,p=s.MB,f=s.MBLocale,d=s.I18N,h=s.Team,m=s.Project,v=s.Combo,y=s.Template,g=s.Screen,b=s.Screenstate,w=s.Widget,E=s.Widgetstate,C=s.Panel,O=s.Panelstate,_=s.Link,S=s.Collaborator,j=s.Comment,x=s.CommentThread,T=s.Asset,N=s.$;"zh-CN"===f&&c()(o.a.settings.strings,a.a);var M=window,k={MBLocale:f,parseTimeAgo:function(e){return o()(e)}},P={Team:h,Project:m,Combo:v,Template:y,Screen:g,Screenstate:b,Widget:w,Widgetstate:E,Panel:C,Panelstate:O,Link:_,Collaborator:S,Comment:j,CommentThread:x,Asset:T,requestCid:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+Math.uuid(10,16)+Date.now()},queueSave:function(){return N("body").trigger("queue:save")}};t.a={Global:M,Storage:p.localStorageDelegate,confirm:function(){return u.apply(void 0,arguments)},alert:function(){return l.apply(void 0,arguments)},MB:p,I18N:d,L10N:k,SpineModel:P}},"Bj/7":function(e,t,n){function r(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function o(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return c(document.body,e,t,n)}var i=n("iDEd"),c=n("ZE5A");e.exports=function(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!i.string(t))throw new TypeError("Second argument must be a String");if(!i.fn(n))throw new TypeError("Third argument must be a Function");if(i.node(e))return r(e,t,n);if(i.nodeList(e))return o(e,t,n);if(i.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},BzO5:function(e,t){},EF4r:function(e,t){},EHRO:function(e,t){e.exports=function(e,t){return e===t||e!==e&&t!==t}},FhcP:function(e,t,n){var r=n("7YkW"),o=n("2X2u"),a=n("dmQx"),i=1,c=2;e.exports=function(e,t,n,s,u,l){var p=n&i,f=e.length,d=t.length;if(f!=d&&!(p&&d>f))return!1;var h=l.get(e);if(h&&l.get(t))return h==t;var m=-1,v=!0,y=n&c?new r:void 0;for(l.set(e,t),l.set(t,e);++m<f;){var g=e[m],b=t[m];if(s)var w=p?s(b,g,m,t,e,l):s(g,b,m,e,t,l);if(void 0!==w){if(w)continue;v=!1;break}if(y){if(!o(t,function(e,t){if(!a(y,t)&&(g===e||u(g,e,n,s,l)))return y.push(t)})){v=!1;break}}else if(g!==b&&!u(g,b,n,s,l)){v=!1;break}}return l.delete(e),l.delete(t),v}},Fp5l:function(e,t,n){var r=n("bGc4"),o=n("UnEC");e.exports=function(e){return o(e)&&r(e)}},G8ar:function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},GOFo:function(e,t){},HKUm:function(e,t){},HN2V:function(e,t,n){var r=n("HbnZ"),o=n("0DSl")(function(e,t,n){r(e,t,n)});e.exports=o},HT7L:function(e,t){e.exports=function(){return!1}},HW6M:function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var i in r)a.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}var a={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},HbnZ:function(e,t,n){function r(e,t,n,l,p){e!==t&&i(t,function(i,u){if(s(i))p||(p=new o),c(e,t,u,n,r,l,p);else{var f=l?l(e[u],i,u+"",e,t,p):void 0;void 0===f&&(f=i),a(e,u,f)}},u)}var o=n("bJWQ"),a=n("O1jc"),i=n("rpnb"),c=n("jMi8"),s=n("yCNF"),u=n("t8rQ");e.exports=r},ICSD:function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},IDd6:function(e,t,n){"use strict";var r=n("2KeS").compose;t.__esModule=!0,t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},t.devToolsEnhancer=function(){return function(e){return e}}},IPGu:function(e,t,n){var r=n("SayF"),o=n("yxsw"),a=n("ZT2e"),i=n("pVq3");e.exports=function(e,t,n){return e=a(e),void 0===(t=n?void 0:t)?o(e)?i(e):r(e):e.match(t)||[]}},IQUt:function(e,t,n){e.exports=n("PPhe")},Ibgh:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t={containerReducerMap:{},viewMap:{},sagaMap:{},extendCallback:null};return e.forEach(function(e){t.containerReducerMap=a(i,t.containerReducerMap,e.containerReducerMap),t.viewMap=a(i,t.viewMap,e.viewMap),t.extendCallback=a(c,t.extendCallback,e.extendCallback),t.sagaMap=a(i,t.sagaMap,e.sagaMap)}),t}function a(e,t,n){return n?t?e(t,n):n:t}function i(e,t){function n(e,t){r[e]=t}var r={};for(var o in e)n(o,e[o]);for(var a in t)n(a,t[a]);return r}function c(e,t){return function(){return e.apply(void 0,arguments),t.apply(void 0,arguments)}}var s=function(){function e(){r(this,e),this.store=null,this.viewMap={},this.observerMap={}}return e.prototype.setStore=function(e){this.store=e},e.prototype.callObserver=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.observerMap[e]&&(t=this.observerMap)[e].apply(t,[e].concat(r))},e.prototype.setObserver=function(e,t){this.observerMap[e]=t},e.prototype.setView=function(e,t){this.viewMap[e]=t},e.prototype.callViewMethod=function(e,t){for(var n,r=this.viewMap[e],o=arguments.length,a=Array(o>2?o-2:0),i=2;i<o;i++)a[i-2]=arguments[i];return r&&r[t]?(this.callObserver("view:"+e+":"+t),r[t].apply(r,[this.store].concat(a))):(n=console).warn.apply(n,["[WebpackInterface][callViewMethod] missed",e,t].concat(a))},e.prototype.init=function(){this.callObserver("init"),this.store&&this.store.dispatch({type:"entry:state:init"})},e.prototype.clear=function(){this.store&&this.store.dispatch({type:"entry:state:clear"}),this.callObserver("clear")},e}();n.d(t,"a",function(){return s}),n.d(t,"b",function(){return o})},"Ilb/":function(e,t,n){var r=n("Kzd6");e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},JBvZ:function(e,t,n){var r=n("imBK");e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},JJnU:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&Object(u.g)(arguments[0],u.n.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),u.n.pattern(e))return T(f,{pattern:e});if(u.n.channel(e))return T(f,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}function o(e,t){return arguments.length>1?(Object(u.g)(e,u.n.notUndef,"put(channel, action): argument channel is undefined"),Object(u.g)(e,u.n.channel,"put(channel, action): argument "+e+" is not a valid channel"),Object(u.g)(t,u.n.notUndef,"put(channel, action): argument action is undefined")):(Object(u.g)(e,u.n.notUndef,"put(action): argument action is undefined"),t=e,e=null),T(d,{channel:e,action:t})}function a(e){return T(h,e)}function i(e,t,n){Object(u.g)(t,u.n.notUndef,e+": argument fn is undefined");var r=null;if(u.n.array(t)){var o=t;r=o[0],t=o[1]}else if(t.fn){var a=t;r=a.context,t=a.fn}return r&&u.n.string(t)&&u.n.func(r[t])&&(t=r[t]),Object(u.g)(t,u.n.func,e+": argument "+t+" is not a function"),{context:r,fn:t,args:n}}function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return T(g,i("fork",e,n))}function s(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1)return a(t.map(function(e){return s(e)}));var r=t[0];return 1===t.length&&(Object(u.g)(r,u.n.notUndef,"cancel(task): argument task is undefined"),Object(u.g)(r,u.n.task,"cancel(task): argument "+r+" is not a valid Task object "+x)),T(w,r||u.d)}t.i=r,t.g=o,t.b=a,t.d=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return T(v,i("call",e,n))},t.f=c,t.e=s,t.h=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return 0===arguments.length?e=u.l:(Object(u.g)(e,u.n.notUndef,"select(selector,[...]): argument selector is undefined"),Object(u.g)(e,u.n.func,"select(selector,[...]): argument "+e+" is not a function")),T(E,{selector:e,args:n})},t.a=function(e,t){return Object(u.g)(e,u.n.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(Object(u.g)(t,u.n.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),Object(u.g)(t,u.n.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),T(C,{pattern:e,buffer:t})},t.j=function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return c.apply(void 0,[l.a,e,t].concat(r))},n.d(t,"c",function(){return M});var u=n("Vr3j"),l=n("2iFZ"),p=Object(u.u)("IO"),f="TAKE",d="PUT",h="ALL",m="RACE",v="CALL",y="CPS",g="FORK",b="JOIN",w="CANCEL",E="SELECT",C="ACTION_CHANNEL",O="CANCELLED",_="FLUSH",S="GET_CONTEXT",j="SET_CONTEXT",x="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",T=function(e,t){var n;return n={},n[p]=!0,n[e]=t,n};r.maybe=function(){var e=r.apply(void 0,arguments);return e[f].maybe=!0,e};o.resolve=function(){var e=o.apply(void 0,arguments);return e[d].resolve=!0,e},o.sync=Object(u.k)(o.resolve,Object(u.w)("put.sync","put.resolve"));var N=function(e){return function(t){return t&&t[p]&&t[e]}},M={take:N(f),put:N(d),all:N(h),race:N(m),call:N(v),cps:N(y),fork:N(g),join:N(b),cancel:N(w),select:N(E),actionChannel:N(C),cancelled:N(O),flush:N(_),getContext:N(S),setContext:N(j)}},Jssu:function(e,t){var n=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=function(e,t){for(;e&&e.nodeType!==n;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},JyYQ:function(e,t,n){var r=n("d+aQ"),o=n("eKBv"),a=n("wSKX"),i=n("NGEn"),c=n("iL3P");e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):c(e)}},K09U:function(e,t){e.exports={comment:"_3DBGoYUFpmM7_RAXlOPysx"}},KGqH:function(e,t){var n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",i="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",c="[\\ufe0e\\ufe0f]?"+i+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",o,a].join("|")+")[\\ufe0e\\ufe0f]?"+i+")*"),s="(?:"+["[^\\ud800-\\udfff]"+n+"?",n,o,a,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(r+"(?="+r+")|"+s+c,"g");e.exports=function(e){return e.match(u)||[]}},KSGD:function(e,t,n){e.exports=n("Q4WQ")()},KgVm:function(e,t,n){var r=n("cdq7"),o=n("JyYQ"),a=n("5Zxu"),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var s=null==n?0:a(n);return s<0&&(s=i(c+s,0)),r(e,o(t,3),s)}},Kzd6:function(e,t,n){var r=n("qwTf");e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},"LF/X":function(e,t,n){var r,o,a;!function(i,c){o=[e,n("SPM9")],void 0!==(a="function"==typeof(r=c)?r.apply(t,o):r)&&(e.exports=a)}(0,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(e){return e&&e.__esModule?e:{default:e}}(t),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=i})},M1c9:function(e,t){e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(o);++r<o;)a[r]=e[r+t];return a}},MoMe:function(e,t,n){var r=n("f931")(Object.keys,Object);e.exports=r},NGEn:function(e,t){var n=Array.isArray;e.exports=n},NRb0:function(e,t,n){var r=n("lGpV"),o=n("RjDc")(function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)});e.exports=o},O1jc:function(e,t,n){var r=n("nw3t"),o=n("22B7");e.exports=function(e,t,n){(void 0===n||o(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},OAqO:function(e,t,n){var r=n("RjDc")(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});e.exports=r},OAwv:function(e,t,n){"use strict";function r(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[a(t,e),"[",r,"]"].join(""):[a(t,e),"[",a(r,e),"]=",a(n,e)].join("")};case"bracket":return function(t,n){return null===n?a(t,e):[a(t,e),"[]=",a(n,e)].join("")};default:return function(t,n){return null===n?a(t,e):[a(t,e),"=",a(n,e)].join("")}}}function o(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}function a(e,t){return t.encode?t.strict?c(e):encodeURIComponent(e):e}function i(e){return Array.isArray(e)?e.sort():"object"==typeof e?i(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var c=n("rprB"),s=n("BEQ0"),u=n("i4Cv");t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=o(t=s({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:u(a),n(u(o),a,r)}),Object.keys(r).sort().reduce(function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=i(n):e[t]=n,e},Object.create(null))):r},t.stringify=function(e,t){var n=r(t=s({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map(function(r){var o=e[r];if(void 0===o)return"";if(null===o)return a(r,t);if(Array.isArray(o)){var i=[];return o.slice().forEach(function(e){void 0!==e&&i.push(n(r,e,i.length))}),i.join("&")}return a(r,t)+"="+a(o,t)}).filter(function(e){return e.length>0}).join("&"):""}},OBe3:function(e,t){},OUfH:function(e,t){e.exports={"comment-layer":"CWvOZgSPm3AtQaMS8J6iZ"}},Op9N:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n("GiK3"),s=n.n(c),u=n("KSGD"),l=n.n(u),p=n("/MvA"),f=n("P63K"),d=n("0xDb"),h=n("804a"),m=n("wB9c"),v=n("iNpB"),y=n("/GiX"),g=(n.n(y),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),b=I18N.open_parenthesis+I18N.pending+I18N.close_parenthesis,w=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i,E={user:0,owner:1,admin:2,editor:3,viewer:4},C=function(e){var t=e.host,n=e.collaborator,r=e.userRole;return Object(h.a)(t.isTeam()&&"team","collaborator-update",n.role,r)},O=function(e){var t=e.host,n=e.collaborator,r=e.userRole;return Object(h.a)(t.isTeam()&&"team","collaborator-create",n.role,r)},_=function(e){var t=e.host,n=e.userRole;return(t.isTeam()&&Object(h.a)("team-collaborator-update","admin",n)?["viewer","editor","admin"]:["viewer","editor"]).reduce(function(e,t){var n;return Object.assign(e,(n={},n[t]=""+I18N.roles[t]+I18N.colon+I18N.roles[t+"_desc"],n))},{})},S=function(e,t){var n=E[e.user_id===MB.user.id?"user":e.role],r=E[t.user_id===MB.user.id?"user":t.role];return n!==r?n-r:e.name&&t.name?e.name.localeCompare(t.name):!e.name&&t.name?1:e.name&&!t.name?-1:e.email.localeCompare(t.email)},j=function(e){function t(){var n,r,i;o(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(s))),r.onChangeRole=function(e){r.props.onChangeRole({collaborator:r.props.collaborator,role:e}),r.forceUpdate()},r.onDeleteCollaborator=function(){return r.props.onDeleteCollaborator(r.props.collaborator)},i=n,a(r,i)}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.collaborator,n=e.host,r=e.userRole,o=t.avatar,a=t.name,i=t.email,c=t.role,u=_({host:n,userRole:r}),l=C({host:n,collaborator:t,userRole:r});return s.a.createElement("li",{className:"collaborator"},s.a.createElement("div",{className:"user"},s.a.createElement("img",{className:"avatar",src:o}),s.a.createElement("span",{className:"user-name"},a||i),!a&&s.a.createElement("span",{className:"pending"},b)),l?s.a.createElement(f.a,{options:u,value:u[c],onChange:this.onChangeRole}):s.a.createElement("span",{className:"role"},I18N.roles[c]),l&&s.a.createElement("button",{className:"delete",onClick:this.onDeleteCollaborator},I18N.delete))},t}(c.PureComponent);j.propTypes={dispatch:l.a.func,host:l.a.object,userRole:l.a.any,collaborator:l.a.object,onChangeRole:l.a.func,onDeleteCollaborator:l.a.func};var x=function(e){function t(n){o(this,t);var r=a(this,e.call(this,n));T.call(r),r.dedupEmailSetCached=null,r.promptMapCached=null;var i=!Object(h.a)(n.host.isTeam()&&"team","collaborator-create","viewer",n.userRole),c=i?I18N.owner_only:r.errorMsg(),s=!i;return r.state={formData:{email:"",role:"viewer"},promptList:[],isPromptListOpen:!1,errorMsg:c,promptPricing:s},r}return i(t,e),t.prototype.componentDidUpdate=function(e){!e.isOpen&&this.props.isOpen&&this.focusOnInput()},t.prototype.render=function(){var e=this,t=this.props,n=t.isOpen,r=t.onClose,o=t.host,a=t.userRole,i=this.state,c=i.formData,u=i.errorMsg,l=i.isPromptListOpen,d=i.promptPricing,h=_({host:o,userRole:a});return s.a.createElement(p.a,{isOpen:n,title:I18N.manage_collaborators,className:"collaborator-modal",onClose:r},O({host:o,userRole:a,collaborator:{role:"viewer"}})&&s.a.createElement("div",{className:"add-via-email"},s.a.createElement("input",{type:"email",placeholder:I18N.email_placeholder,onChange:this.updateEmail,onClick:this.showPromptList,onBlur:this.hidePromptList,value:c.email,autoComplete:"off"}),s.a.createElement(f.a,{options:h,value:h[c.role],onChange:this.updateRole}),s.a.createElement("button",{onClick:this.onInvite},I18N.invite),this.renderPromptList(!l)),u&&s.a.createElement("div",{className:"error-msg "+(d?"has-prompt-pricing-btn":"")},s.a.createElement("span",null,u),d&&s.a.createElement("button",{onClick:v.b},I18N.check_pricing)),s.a.createElement("ul",{className:"collaborator-list"},o.collaborators().sort(S).map(function(t){return s.a.createElement(j,{key:t.email,host:o,userRole:a,collaborator:t,onChangeRole:e.onChangeRole,onDeleteCollaborator:e.onDeleteCollaborator})})))},t}(c.PureComponent);x.propTypes={isOpen:l.a.bool,onClose:l.a.func.isRequired,host:l.a.object,userRole:l.a.any};var T=function(){var e=this;this.errorMsg=function(){var t=e.props.host,n="";if(t&&t.collaborators().length>=t.limitation.collaborators+1){var r=t.limitation.collaborators?"collaborators":"cant_invite",o=t.owner_id==MB.user.id?"user":t.isTeam()?"team":"project",a=t.isTeam()?"renew":"upgrade";n=MB.renewMsg&&MB.renewMsg(r,{role:o,action:a,collaborators:t.limitation.collaborators,plan:t.owner_plan})}return n},this.updateComponent=function(){e.forceUpdate(),MB.webpackInterface&&MB.webpackInterface.refreshAll(),$("body").trigger("queue:save")},this.focusOnInput=function(){return setTimeout(function(){var e=document.querySelector('.collaborator-modal input[type="email"]');e&&e.focus()},100)},this.updateEmail=function(t){var n=t.target.value;return e.updatePromptList(n.trim().toLowerCase())},this.updateRole=function(t){return e.setState(function(e){var n=e.formData;return{formData:g({},n,{role:t})}})},this.updatePromptList=function(t){if(t!==e.state.email){e.promptMapCached||(e.dedupEmailSetCached=new Set(e.props.host.collaborators().map(function(e){return e.email.toLowerCase()})),e.promptMapCached=Collaborator.all().filter(function(t){var n=t.cid,r=t.user_id,o=t.email;return!(r===MB.user.id||n.startsWith("co_MOCK_c")||n.startsWith("co_MOCK_t")&&!n.startsWith("co_MOCK_te")||e.dedupEmailSetCached.has(o.toLowerCase()))}).reduce(function(e,t){return t.name&&(e[t.name.toLowerCase()]=t),t.email&&(e[t.email.toLowerCase()]=t),e},{}));var n=t&&new RegExp(t,"i"),r=new Set(e.dedupEmailSetCached),o=new Set;for(var a in e.promptMapCached){if(o.size>=10)break;var i=e.promptMapCached[a],c=i.email.toLowerCase();n&&!n.test(a)||!c||r.has(c)||(r.add(c),o.add(i))}e.setState(function(e){var n=e.formData;return{formData:g({},n,{email:t}),isPromptListOpen:!0,promptList:Array.from(o)}})}},this.showPromptList=function(){return e.updatePromptList(e.state.formData.email)},this.hidePromptList=function(){return setTimeout(function(){e.dedupEmailSetCached=null,e.promptMapCached=null,e.setState({isPromptListOpen:!1})},100)},this.createOnClickPromptListItemHandler=function(t){return function(){return e.setState(function(e){var n=e.formData;return{formData:g({},n,{email:t}),promptList:[]}})}},this.renderPromptList=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.state.promptList;return t=t||0===n.length,s.a.createElement("ul",g({className:"prompt-list"},Object(d.c)(t)),n.map(function(t){return s.a.createElement("li",{key:t.email,onMouseDown:e.createOnClickPromptListItemHandler(t.email)},s.a.createElement("img",{className:"avatar",src:t.avatar}),s.a.createElement("span",{className:"user-name"},t.name||t.email),t.name?s.a.createElement("span",{className:"user-email"},t.email):s.a.createElement("span",{className:"pending"},b))}))},this.onInvite=function(){var t=e.props.host,n=e.state.formData,r=n.email,o=n.role,a=t.limitation,i=void 0===a?MB.user.limitation:a,c=t.collaborators(),s=void 0!==c.find(function(e){return e.email===r}),u=r&&w.test(r)?r===MB.user.email?I18N.cant_invite_yourself:s?I18N.already_invited:c.length>i.collaborators?e.errorMsg():null:I18N.invalid_email;u?(e.focusOnInput(),e.setState({errorMsg:u,promptPricing:c.length>i.collaborators})):(e.createCollaborator({email:r,role:o}),e.setState({formData:{email:"",role:"viewer"},promptPricing:!0}))},this.createCollaborator=function(t){var n=t.email,r=t.role,o=e.props.host,a=o.isTeam(),i=new Collaborator({email:n,role:r,cid:"co"+Math.uuid(10,16)+(new Date).valueOf(),avatar:"/images/avatar.png"});Object.assign(i,{team_cid:a&&o.cid,project_cid:!a&&o.cid}),i.lsave(),i.updateHostChannel("update"),e.updateComponent()},this.onChangeRole=function(t){var n=t.collaborator,r=t.role,o=e.props,a=o.host,i=o.userRole,c=a.isTeam();!Object(h.a)(c&&"team","collaborator-update",[n.role,r],i)||(Object.assign(n,{role:r}),n.lsave(),n.updateHostChannel("update"),e.updateComponent())},this.onDeleteCollaborator=function(){var t=r(regeneratorRuntime.mark(function t(n){var r,o,a,i,c,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,o=r.dispatch,a=r.host,i=r.userRole,c=a.isTeam(),!(s=!Object(h.a)(c&&"team","collaborator-delete",n.role,i))){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Object(m.b)({dispatch:o,title:I18N.del_collaborator_title,desc:I18N.del_collaborator_desc.replace(/%s/,n.name||n.email),isHTML:!0});case 7:if(!t.sent){t.next=12;break}n.updateHostChannel("destroy"),n.ldestroy(),e.updateComponent(),e.setState({errorMsg:null});case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()};t.a=x},P63K:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("KSGD"),c=n.n(i),s=n("GiK3"),u=n.n(s),l=n("O27J"),p=(n.n(l),n("IQUt")),f=n.n(p),d=n("Y7r3"),h=n.n(d),m=n("rsfk"),v=(n.n(m),n("WCZ4")),y=n("T2Un"),g=n.n(y).a.bind(h.a),b=function(e){function t(){r(this,t);var n=o(this,e.call(this));return n.setInputRef=function(e){return n.$input=e},n.getInputRef=function(){return n.$input},n.handleToggle=function(){return n.setState({expand:!n.state.expand})},n.handleClose=function(){return n.setState({expand:!1})},n.state={expand:!1},n}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.attr,n=e.placeholder,r=e.value,o=e.options,a=e.onChange,i=e.className,c=this.state.expand,s=r||0===r?"string"==typeof o[r]?o[r]:r:n;return u.a.createElement("div",{type:"select",className:g("select",i,{show:c})},u.a.createElement("div",{ref:this.setInputRef,className:g("default"),onClick:this.handleToggle},u.a.createElement("span",{className:"current-val"},s),u.a.createElement(v.a,{type:"fa",name:"caret-down"})),u.a.createElement(w,{show:c,attr:t,options:o,onChange:a,getInputRef:this.getInputRef,onClose:this.handleClose}))},t}(s.PureComponent);t.a=b,b.propTypes={attr:c.a.string,placeholder:c.a.string,value:c.a.oneOfType([c.a.number,c.a.string]),className:c.a.string,options:c.a.object,onChange:c.a.func},b.defaultProps={placeholder:"Please select…",value:null,options:{a:"aaa",b:"bbb",c:"ccc"}};var w=function(e){function t(){r(this,t);var n=o(this,e.call(this));return n.setDropDownRef=function(e){return n.$dropDown=e},n.handleDocClick=function(e){n.props.show&&n.$dropDown&&!n.$dropDown.contains(e.target)&&n.props.onClose()},n.handleClick=function(e){var t=n.props,r=t.attr,o=t.onChange,a=t.onClose;o(e.currentTarget.getAttribute("value"),r),a()},n.$root=document.createElement("div"),n.$root.setAttribute("type","select-dropdown"),n}return a(t,e),t.prototype.componentDidMount=function(){document.body.appendChild(this.$root)},t.prototype.componentDidUpdate=function(){var e=this.props,t=e.show,n=e.getInputRef,r=this.$dropDown;if(t){var o=n().getBoundingClientRect(),a=o.top,i=o.left,c=o.bottom,s=o.width,u=r.getBoundingClientRect().height,l=window.innerHeight-10;r.style.left=i+"px",r.style.minWidth=s+2+"px",c+1.25*u>l?a-1.25*u<0?(r.style.top=c+"px",r.style.height=l-c+"px"):(r.style.transformOrigin="50% 100%",r.style.top="",r.style.bottom=window.innerHeight-a+"px"):r.style.top=c+"px"}else setTimeout(function(){Object.assign(r.style,{top:"",left:"",bottom:"",height:"",transformOrigin:""})},200)},t.prototype.componentWillUnmount=function(){document.body.removeChild(this.$root)},t.prototype.render=function(){var e=this,t=this.props,n=t.show,r=t.attr,o=t.options,a=t.onChange,i=t.onClose;return Object(l.createPortal)(u.a.createElement("ul",{ref:this.setDropDownRef,className:g("options",{show:n})},Object.keys(o).map(function(t,n){var c=o[t]||"";return"string"==typeof c?u.a.createElement("li",{key:t,className:g("option"),value:t,onClick:e.handleClick},u.a.createElement("span",{className:"val"},o[t])):u.a.createElement(E,{key:t,attr:r,group:c,onChange:a,onClose:i})}),n&&u.a.createElement(f.a,{onClick:this.handleDocClick})),this.$root)},t}(s.PureComponent);w.propTypes={show:c.a.bool,attr:c.a.string,options:c.a.object,getInputRef:c.a.func,onChange:c.a.func,onClose:c.a.func};var E=function(e){function t(){var n,a,i;r(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=a=o(this,e.call.apply(e,[this].concat(s))),a.handleClick=function(e){var t=a.props,n=t.attr,r=t.onChange,o=t.onClose;r(e.currentTarget.getAttribute("value"),n),o()},i=n,o(a,i)}return a(t,e),t.prototype.render=function(){var e=this,t=this.props.group,n=t.label,r=t.options;return u.a.createElement("li",{className:g("optgroup")},u.a.createElement("div",{className:g("group-title")},u.a.createElement("span",{className:"val"},n)),u.a.createElement("ul",null,Object.keys(r).map(function(t,n){return u.a.createElement("li",{key:n,value:t,className:g("option","sub-option"),onClick:e.handleClick},u.a.createElement("span",{className:"val"},r[t]))})))},t}(s.PureComponent);E.propTypes={attr:c.a.string,group:c.a.object,onChange:c.a.func,onClose:c.a.func}},PPhe:function(e,t,n){"use strict";(function(t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n,r){return!e.addEventListener&&(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,n,r),n}function c(e,t,n,r){return!e.removeEventListener&&(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,n,r),n}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n("GiK3"),l=(n("KSGD"),function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,u.Component),s(t,[{key:"componentDidMount",value:function(){this.props.enabled&&this.bindHandlers()}},{key:"componentWillUnmount",value:function(){this.unbindHandlers()}},{key:"componentWillReceiveProps",value:function(e){this.props.enabled&&!e.enabled?this.unbindHandlers():!this.props.enabled&&e.enabled&&this.bindHandlers()}},{key:"getKeys",value:function(){this.props.target,window;return Object.keys(this.props).filter(function(e){return"on"===e.slice(0,2)}).map(function(e){return[e,e.slice(2).toLowerCase()]})}},{key:"bindHandlers",value:function(){this._adjustHandlers(i)}},{key:"unbindHandlers",value:function(){this._adjustHandlers(c)}},{key:"_adjustHandlers",value:function(e){var t=this.props,n="function"==typeof t.target?t.target():t.target;if(n){var r=p?{passive:t.passive,capture:t.capture}:t.capture;this.getKeys().forEach(function(o){e(n,o[1],t[o[0]],r)})}}},{key:"render",value:function(){return null}}]),t}());l.displayName="DocumentEvents",l.defaultProps={capture:!1,enabled:!0,passive:!1,target:t.browser?document:null};var p=function(){try{var e=!1;return document.createElement("div").addEventListener("test",function(){},{get passive(){e=!0}}),e}catch(e){return!1}}();e.exports=l}).call(t,n("W2nU"))},PfJA:function(e,t){e.exports=function(e){return e.split("")}},Q2wK:function(e,t,n){var r=n("8AZL"),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,c=o(a.length-t,0),s=Array(c);++i<c;)s[i]=a[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=a[i];return u[t]=n(s),r(e,this,u)}}},Q4WQ:function(e,t,n){"use strict";var r=n("e6+Q"),o=n("cxPT"),a=n("gt/O");e.exports=function(){function e(e,t,n,r,i,c){c!==a&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},Q7hp:function(e,t,n){var r=n("uCi2");e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},QOOM:function(e,t){},QPja:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Wme4");Object.defineProperty(t,"Operation",{enumerable:!0,get:function(){return r.Operation}});var o=n("w2Dv");Object.defineProperty(t,"Scheme",{enumerable:!0,get:function(){return o.Scheme}}),Object.defineProperty(t,"ObjectScheme",{enumerable:!0,get:function(){return o.ObjectScheme}}),Object.defineProperty(t,"ArrayScheme",{enumerable:!0,get:function(){return o.ArrayScheme}});var a=n("dMLf");Object.defineProperty(t,"ObjectAs",{enumerable:!0,get:function(){return a.ObjectAs}}),Object.defineProperty(t,"ArrayOf",{enumerable:!0,get:function(){return a.ArrayOf}}),Object.defineProperty(t,"objectActMap",{enumerable:!0,get:function(){return a.objectActMap}}),Object.defineProperty(t,"arrayActMap",{enumerable:!0,get:function(){return a.arrayActMap}})},RH2O:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1]||t+"Subscription",i=function(e){function i(n,a){r(this,i);var c=o(this,e.call(this,n,a));return c[t]=n.store,c}return a(i,e),i.prototype.getChildContext=function(){var e;return e={},e[t]=this[t],e[n]=null,e},i.prototype.render=function(){return M.Children.only(this.props.children)},i}(M.Component);return i.propTypes={store:I.isRequired,children:P.a.element.isRequired},i.childContextTypes=(e={},e[t]=I.isRequired,e[n]=R,e),i}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(){var e=[],t=[];return{clear:function(){t=U,e=U},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==U&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function d(){}function h(e,t){var n={run:function(r){try{var o=e(t.getState(),r);(o!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=o,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}function m(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.getDisplayName,a=void 0===o?function(e){return"ConnectAdvanced("+e+")"}:o,i=r.methodName,c=void 0===i?"connectAdvanced":i,s=r.renderCountProp,m=void 0===s?void 0:s,v=r.shouldHandleStateChanges,y=void 0===v||v,g=r.storeKey,b=void 0===g?"store":g,w=r.withRef,E=void 0!==w&&w,C=f(r,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),O=b+"Subscription",_=K++,S=(t={},t[b]=I,t[O]=R,t),j=(n={},n[O]=R,n);return function(t){F()("function"==typeof t,"You must pass a component to the function returned by connect. Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",r=a(n),o=W({},C,{getDisplayName:a,methodName:c,renderCountProp:m,shouldHandleStateChanges:y,storeKey:b,withRef:E,displayName:r,wrappedComponentName:n,WrappedComponent:t}),i=function(n){function a(e,t){u(this,a);var o=l(this,n.call(this,e,t));return o.version=_,o.state={},o.renderCount=0,o.store=e[b]||t[b],o.propsMode=Boolean(e[b]),o.setWrappedInstance=o.setWrappedInstance.bind(o),F()(o.store,'Could not find "'+b+'" in either the context or props of "'+r+'". Either wrap the root component in a <Provider>, or explicitly pass "'+b+'" as a prop to "'+r+'".'),o.initSelector(),o.initSubscription(),o}return p(a,n),a.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return e={},e[O]=t||this.context[O],e},a.prototype.componentDidMount=function(){y&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},a.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},a.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},a.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=d,this.store=null,this.selector.run=d,this.selector.shouldComponentUpdate=!1},a.prototype.getWrappedInstance=function(){return F()(E,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+c+"() call."),this.wrappedInstance},a.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},a.prototype.initSelector=function(){var t=e(this.store.dispatch,o);this.selector=h(t,this.store),this.selector.run(this.props)},a.prototype.initSubscription=function(){if(y){var e=(this.propsMode?this.props:this.context)[O];this.subscription=new q(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},a.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(V)):this.notifyNestedSubs()},a.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},a.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},a.prototype.addExtraProps=function(e){if(!(E||m||this.propsMode&&this.subscription))return e;var t=W({},e);return E&&(t.ref=this.setWrappedInstance),m&&(t[m]=this.renderCount++),this.propsMode&&this.subscription&&(t[O]=this.subscription),t},a.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(M.createElement)(t,this.addExtraProps(e.props))},a}(M.Component);return i.WrappedComponent=t,i.displayName=r,i.childContextTypes=j,i.contextTypes=S,i.propTypes=S,D()(i,t)}}function v(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function y(e,t){if(v(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++)if(!z.call(t,n[o])||!v(e[n[o]],t[n[o]]))return!1;return!0}function g(e){return function(t,n){function r(){return o}var o=e(t,n);return r.dependsOnOwnProps=!1,r}}function b(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function w(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=b(e);var o=r(t,n);return"function"==typeof o&&(r.mapToProps=o,r.dependsOnOwnProps=b(o),o=r(t,n)),o},r}}function E(e,t,n){return J({},n,e,t)}function C(e){return function(t,n){n.displayName;var r=n.pure,o=n.areMergedPropsEqual,a=!1,i=void 0;return function(t,n,c){var s=e(t,n,c);return a?r&&o(s,i)||(i=s):(a=!0,i=s),i}}}function O(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function _(e,t,n,r){return function(o,a){return n(e(o,a),t(r,a),a)}}function S(e,t,n,r,o){function a(o,a){return h=o,m=a,v=e(h,m),y=t(r,m),g=n(v,y,m),d=!0,g}function i(){return v=e(h,m),t.dependsOnOwnProps&&(y=t(r,m)),g=n(v,y,m)}function c(){return e.dependsOnOwnProps&&(v=e(h,m)),t.dependsOnOwnProps&&(y=t(r,m)),g=n(v,y,m)}function s(){var t=e(h,m),r=!f(t,v);return v=t,r&&(g=n(v,y,m)),g}function u(e,t){var n=!p(t,m),r=!l(e,h);return h=e,m=t,n&&r?i():n?c():r?s():g}var l=o.areStatesEqual,p=o.areOwnPropsEqual,f=o.areStatePropsEqual,d=!1,h=void 0,m=void 0,v=void 0,y=void 0,g=void 0;return function(e,t){return d?u(e,t):a(e,t)}}function j(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,o=t.initMergeProps,a=O(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),i=n(e,a),c=r(e,a),s=o(e,a);return(a.pure?S:_)(i,c,s,e,a)}function x(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function T(e,t,n){for(var r=t.length-1;r>=0;r--){var o=t[r](e);if(o)return o}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function N(e,t){return e===t}Object.defineProperty(t,"__esModule",{value:!0});var M=n("GiK3"),k=n("KSGD"),P=n.n(k),R=P.a.shape({trySubscribe:P.a.func.isRequired,tryUnsubscribe:P.a.func.isRequired,notifyNestedSubs:P.a.func.isRequired,isSubscribed:P.a.func.isRequired}),I=P.a.shape({subscribe:P.a.func.isRequired,dispatch:P.a.func.isRequired,getState:P.a.func.isRequired}),L=i(),A=n("hYij"),D=n.n(A),B=n("crWv"),F=n.n(B),U=null,H={notify:function(){}},q=function(){function e(t,n,r){c(this,e),this.store=t,this.parentSub=n,this.onStateChange=r,this.unsubscribe=null,this.listeners=H}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=s())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=H)},e}(),W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K=0,V={},z=Object.prototype.hasOwnProperty,G=n("2KeS"),Y=(n("sMP3"),[function(e){return"function"==typeof e?w(e,"mapDispatchToProps"):void 0},function(e){return e?void 0:g(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?g(function(t){return Object(G.bindActionCreators)(e,t)}):void 0}]),Z=[function(e){return"function"==typeof e?w(e,"mapStateToProps"):void 0},function(e){return e?void 0:g(function(){return{}})}],J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X=[function(e){return"function"==typeof e?C(e):void 0},function(e){return e?void 0:function(){return E}}],Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?m:t,r=e.mapStateToPropsFactories,o=void 0===r?Z:r,a=e.mapDispatchToPropsFactories,i=void 0===a?Y:a,c=e.mergePropsFactories,s=void 0===c?X:c,u=e.selectorFactory,l=void 0===u?j:u;return function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=a.pure,u=void 0===c||c,p=a.areStatesEqual,f=void 0===p?N:p,d=a.areOwnPropsEqual,h=void 0===d?y:d,m=a.areStatePropsEqual,v=void 0===m?y:m,g=a.areMergedPropsEqual,b=void 0===g?y:g,w=x(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),E=T(e,o,"mapStateToProps"),C=T(t,i,"mapDispatchToProps"),O=T(r,s,"mergeProps");return n(l,Q({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:E,initMapDispatchToProps:C,initMergeProps:O,pure:u,areStatesEqual:f,areOwnPropsEqual:h,areStatePropsEqual:v,areMergedPropsEqual:b},w))}}();n.d(t,"Provider",function(){return L}),n.d(t,"createProvider",function(){return i}),n.d(t,"connectAdvanced",function(){return m}),n.d(t,"connect",function(){return $})},RVGU:function(e,t){},RfZv:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},Rh28:function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},RjDc:function(e,t,n){var r=n("3rZI"),o=n("lAob"),a=n("IPGu"),i=RegExp("['’]","g");e.exports=function(e){return function(t){return r(a(o(t).replace(i,"")),e,"")}}},SHWz:function(e,t,n){var r=n("MoMe"),o=1,a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,c,s){var u=n&o,l=r(e),p=l.length;if(p!=r(t).length&&!u)return!1;for(var f=p;f--;){var d=l[f];if(!(u?d in t:a.call(t,d)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var m=!0;s.set(e,t),s.set(t,e);for(var v=u;++f<p;){var y=e[d=l[f]],g=t[d];if(i)var b=u?i(g,y,d,t,e,s):i(y,g,d,e,t,s);if(!(void 0===b?y===g||c(y,g,n,i,s):b)){m=!1;break}v||(v="constructor"==d)}if(m&&!v){var w=e.constructor,E=t.constructor;w!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E)&&(m=!1)}return s.delete(e),s.delete(t),m}},SPM9:function(e,t){e.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var r=window.getSelection(),o=document.createRange();o.selectNodeContents(e),r.removeAllRanges(),r.addRange(o),t=r.toString()}return t}},SayF:function(e,t){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(n)||[]}},SjWj:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("GiK3"),c=n.n(i),s=n("KSGD"),u=n.n(s),l=n("WCZ4"),p=n("HKUm"),f=(n.n(p),function(e){function t(){var n,a,i;r(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=a=o(this,e.call.apply(e,[this].concat(s))),a.handleClick=function(){if(!a.props.host.team_cid){var e=a.props,t=e.host;(0,e.dispatch)({type:"modal:update:state",payload:{collaboratorModal:{open:!0,host:t,userRole:t.owner_id===MB.user.id?"owner":t.roleByUid(MB.user.id)}}})}},i=n,o(a,i)}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.host,n=e.children;return c.a.createElement("div",{className:"collaborators",onClick:this.handleClick},n,!n&&c.a.createElement(l.a,{name:"user"}),!n&&t.collaborators().length)},t}(i.PureComponent));t.a=f,f.propTypes={children:u.a.oneOfType([u.a.element,u.a.array]),dispatch:u.a.func,host:u.a.object}},T2Un:function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(n.apply(this,r));else if("object"===o)for(var i in r)a.call(r,i)&&r[i]&&e.push(this&&this[i]||i)}}return e.join(" ")}var a={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},TQ3y:function(e,t,n){var r=n("blYT"),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},TfEB:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return isWidgetFullWidth}),__webpack_require__.d(__webpack_exports__,"b",function(){return hex2rgba}),__webpack_require__.d(__webpack_exports__,"d",function(){return parseNSColor}),__webpack_require__.d(__webpack_exports__,"e",function(){return rgb2hex}),__webpack_require__.d(__webpack_exports__,"a",function(){return hex2rgb});var __WEBPACK_IMPORTED_MODULE_0_lodash_round__=__webpack_require__("dAKm"),__WEBPACK_IMPORTED_MODULE_0_lodash_round___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash_round__),isWidgetFullWidth=function(e){return["navigation_bar","status_bar","tab_bar","keyboard"].includes(e)},hex2rgba=function(e){if(""===e)return"rgba(0,0,0,1)";if(3===(e=e.replace("#","")).length){var t=e.split(""),n=t[0],r=t[1],o=t[2];e=""+n+n+r+r+o+o}return"rgba("+parseInt(e.substring(0,2),16)/255+","+parseInt(e.substring(2,4),16)/255+","+parseInt(e.substring(4,6),16)/255+",1)"},parseNSColor=function parseNSColor(rgbaFuncStr){function rgba(){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];return{r:parseInt(__WEBPACK_IMPORTED_MODULE_0_lodash_round___default()(255*e),10),g:parseInt(__WEBPACK_IMPORTED_MODULE_0_lodash_round___default()(255*t),10),b:parseInt(__WEBPACK_IMPORTED_MODULE_0_lodash_round___default()(255*n),10),a:r}}var _eval=eval(rgbaFuncStr),r=_eval.r,g=_eval.g,b=_eval.b,a=_eval.a;return"rgba("+r+", "+g+", "+b+", "+a+")"},rgb2hex=function(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):e},hex2rgb=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")":e}},TlPD:function(e,t,n){var r=n("tv3T"),o=n("t8rQ");e.exports=function(e){return r(e,o(e))}},UJYK:function(e,t){},Ubhr:function(e,t){e.exports=function(e){return e}},UnEC:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},Uz1a:function(e,t,n){var r=n("bJWQ"),o=n("FhcP"),a=n("EHRO"),i=n("SHWz"),c=n("gHOb"),s=n("NGEn"),u=n("ggOT"),l=n("YsVG"),p=1,f="[object Arguments]",d="[object Array]",h="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,y,g){var b=s(e),w=s(t),E=b?d:c(e),C=w?d:c(t),O=(E=E==f?h:E)==h,_=(C=C==f?h:C)==h,S=E==C;if(S&&u(e)){if(!u(t))return!1;b=!0,O=!1}if(S&&!O)return g||(g=new r),b||l(e)?o(e,t,n,v,y,g):a(e,t,E,n,v,y,g);if(!(n&p)){var j=O&&m.call(e,"__wrapped__"),x=_&&m.call(t,"__wrapped__");if(j||x){var T=j?e.value():e,N=x?t.value():t;return g||(g=new r),y(T,N,n,v,g)}}return!!S&&(g||(g=new r),i(e,t,n,v,y,g))}},V33R:function(e,t,n){var r,o,a;!function(i,c){o=[e,n("LF/X"),n("WreF"),n("Bj/7")],void 0!==(a="function"==typeof(r=c)?r.apply(t,o):r)&&(e.exports=a)}(0,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var u=o(t),l=o(n),p=o(r),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(e,n){a(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return c(t,l.default),d(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===f(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,p.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return s("action",e)}},{key:"defaultTarget",value:function(e){var t=s("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return s("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}();e.exports=h})},VFQT:function(e,t,n){var r=n("7Mjc");e.exports=function(e){var t=e.length;return t?e[r(0,t-1)]:void 0}},VORN:function(e,t,n){var r=n("yCNF"),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},Vr3j:function(e,t,n){"use strict";function r(e,t){return w.notUndef(e)&&b.call(e,t)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i({},e),n=new Promise(function(e,n){t.resolve=e,t.reject=n});return t.promise=n,t}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"==typeof window?console.log("redux-saga "+e+": "+t+"\n"+(n&&n.stack||n)):console[e](t,n)}n.d(t,"u",function(){return s}),n.d(t,"e",function(){return u}),n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"o",function(){return v}),n.d(t,"r",function(){return y}),n.d(t,"l",function(){return g}),t.g=function(e,t,n){if(!t(e))throw a("error","uncaught at check",n),new Error(n)},n.d(t,"n",function(){return w}),n.d(t,"s",function(){return E}),t.t=function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},n.d(t,"f",function(){return C}),t.i=o,t.j=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,r=new Promise(function(r){n=setTimeout(function(){return r(t)},e)});return r[f]=function(){return clearTimeout(n)},r},n.d(t,"v",function(){return O}),t.q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],o={name:n,next:e,throw:t,return:S};return r&&(o[l]=!0),"undefined"!=typeof Symbol&&(o[Symbol.iterator]=function(){return o}),o},t.p=a,t.k=function(e,t){return function(){return e.apply(void 0,arguments)}},n.d(t,"w",function(){return j}),n.d(t,"m",function(){return x}),n.d(t,"h",function(){return T}),n.d(t,"x",function(){return N});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e){return"@@redux-saga/"+e},u=s("TASK"),l=s("HELPER"),p=s("MATCH"),f=s("CANCEL_PROMISE"),d=s("SAGA_ACTION"),h=s("SELF_CANCELLATION"),m=function(e){return function(){return e}},v=m(!0),y=(m(!1),function(){}),g=function(e){return e},b=Object.prototype.hasOwnProperty,w={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!w.array(e)&&"object"===(void 0===e?"undefined":c(e))},promise:function(e){return e&&w.func(e.then)},iterator:function(e){return e&&w.func(e.next)&&w.func(e.throw)},iterable:function(e){return e&&w.func(Symbol)?w.func(e[Symbol.iterator]):w.array(e)},task:function(e){return e&&e[u]},observable:function(e){return e&&w.func(e.subscribe)},buffer:function(e){return e&&w.func(e.isEmpty)&&w.func(e.take)&&w.func(e.put)},pattern:function(e){return e&&(w.string(e)||"symbol"===(void 0===e?"undefined":c(e))||w.func(e)||w.array(e))},channel:function(e){return e&&w.func(e.take)&&w.func(e.close)},helper:function(e){return e&&e[l]},stringableFunc:function(e){return w.func(e)&&r(e,"toString")}},E={assign:function(e,t){for(var n in t)r(t,n)&&(e[n]=t[n])}},C={from:function(e){var t=Array(e.length);for(var n in e)r(e,n)&&(t[n]=e[n]);return t}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}(),_=function(e){throw e},S=function(e){return{value:e,done:!0}},j=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},x=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},T=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},N=function(e){return function(t){return e(Object.defineProperty(t,d,{value:!0}))}}},W2nU:function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function a(e){if(p===clearTimeout)return clearTimeout(e);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function i(){m&&d&&(m=!1,d.length?h=d.concat(h):v=-1,h.length&&c())}function c(){if(!m){var e=o(i);m=!0;for(var t=h.length;t;){for(d=h,h=[];++v<t;)d&&d[v].run();v=-1,t=h.length}d=null,m=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,p,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(e){p=r}}();var d,h=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new s(e,t)),1!==h.length||m||o(c)},s.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},WCZ4:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.name,n=void 0===t?"":t,o=e.type,a=void 0===o?"svg":o,i=e.className,s=void 0===i?"":i,u=r(e,["name","type","className"]),l="mb"===a?"icon":a;n=n.replace(/^(icon|dora|fa|md|ci|mb)\-/gi,"");var p="dora"===a||"md"===a;return"svg"===a?c.a.createElement("svg",f({className:"icon "+s},u),c.a.createElement("use",{xlinkHref:"/icons/sprite.svg?"+d+"#"+n})):c.a.createElement("span",f({className:"icon "+a+" "+l+"-"+n+" "+s},u),p&&n)}function a(e){var t=e.name,n=e.className,o=e.colorList,a=r(e,["name","className","colorList"]),i=p.a.find(function(e){return e.id===t});return!!i&&c.a.createElement("span",f({className:"duo-icon duodora "+n},a),i.layer.map(function(e,n){return c.a.createElement("span",{key:e,className:"layer",style:{color:o[n]}},t+"__"+e)}))}t.a=o;var i=n("GiK3"),c=n.n(i),s=n("KSGD"),u=n.n(s),l=n("qjtJ"),p=n.n(l),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d="0.4.0";o.propTypes={name:u.a.string,type:u.a.string,className:u.a.string},a.propTypes={name:u.a.string,className:u.a.string,colorList:u.a.array},a.defaultProps={colorList:[],className:""}},WHce:function(e,t){e.exports=function(e){return e}},WQFf:function(e,t,n){var r=n("VORN"),o=n("vi0E"),a=n("HT7L");e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},Wh6c:function(e,t,n){var r=n("M1c9");e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},Wme4:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i={objectSet:function(e,t,n){return e[t]!==n?a({},e,o({},t,n)):e},objectDelete:function(e,t){if(!(t in e))return e;var n=a({},e);return delete n[t],n},objectMerge:function(e,t){for(var n in t){var r=t[n];if(e[n]!==r)return a({},e,t)}return e},arraySet:function(e,t,n){if(e[t]===n)return e;var o=[].concat(r(e));return o[t]=n,o},arrayDelete:function(e,t){return t>=0&&t<=e.length-1?[].concat(r(e.slice(0,t)),r(e.slice(t+1))):e},arrayInsert:function(e,t,n){return t=Math.min(Math.max(t,0),e.length),[].concat(r(e.slice(0,t)),[n],r(e.slice(t)))},arrayPush:function(e,t){return[].concat(r(e),[t])},arrayUnshift:function(e,t){return[t].concat(r(e))},arrayPop:function(e){if(0===e.length)return e;var t=[].concat(r(e));return t.pop(),t},arrayShift:function(e){if(0===e.length)return e;var t=[].concat(r(e));return t.shift(),t},arrayConcat:function(e,t){return t&&t.length?[].concat(r(e),r(t)):e},arrayMatchPush:function(e,t){return e.includes(t)?e:[].concat(r(e),[t])},arrayMatchDelete:function(e,t){var n=e.indexOf(t);return~n?[].concat(r(e.slice(0,n)),r(e.slice(n+1))):e},arrayMatchMove:function(e,t,n){t=Math.min(Math.max(t,0),e.length-1);var o=e.indexOf(n);return~o&&o!==t?o<t?[].concat(r(e.slice(0,o)),r(e.slice(o+1,t+1)),[n],r(e.slice(t+1))):[].concat(r(e.slice(0,t)),[n],r(e.slice(t,o)),r(e.slice(o+1))):e},arrayFindPush:function(e,t,n){return void 0===e.find(t)?[].concat(r(e),[n]):e},arrayFindDelete:function(e,t){var n=e.findIndex(t);return~n?[].concat(r(e.slice(0,n)),r(e.slice(n+1))):e},arrayFindMove:function(e,t,n){var o=e.findIndex(t),a=e[o];return~o&&o!==n?o<n?[].concat(r(e.slice(0,o)),r(e.slice(o+1,n+1)),[a],r(e.slice(n+1))):[].concat(r(e.slice(0,n)),[a],r(e.slice(n,o)),r(e.slice(o+1))):e},arrayFindSet:function(e,t,n){var o=e.findIndex(t);if(!~o||e[o]===n)return e;var a=[].concat(r(e));return a[o]=n,a}};t.Operation=i},WreF:function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var a=0,i=r.length;a<i;a++)r[a].fn!==t&&r[a].fn._!==t&&o.push(r[a]);return o.length?n[e]=o:delete n[e],this}},e.exports=n},WxI4:function(e,t){e.exports=function(){this.__data__=[],this.size=0}},Y7r3:function(e,t){e.exports={select:"_19hND8_zGSOgM376qVcFdq",show:"cmwkdFmNTxA6REmFpNEOI",default:"_1OdlEyHcjBo0te-woIc_Oq",options:"_14eZNNtPtiAqGldIusMbQx",option:"_2KDo9VcwGpqKoI8tMX-4an",optgroup:"_2vG7YLpSpcZPteVW92xxSp","group-title":"_2mA4v_EPNER0oepDd4u4rn","sub-option":"_16oJp3en4h7scXJY_RYBB7"}},YDHx:function(e,t,n){function r(e,t,n,i,c){return e===t||(null==e||null==t||!a(e)&&!a(t)?e!==e&&t!==t:o(e,t,n,i,r,c))}var o=n("Uz1a"),a=n("UnEC");e.exports=r},YkxI:function(e,t,n){var r=n("wSKX"),o=n("Q2wK"),a=n("WHce");e.exports=function(e,t){return a(o(e,t,r),e+"")}},YsVG:function(e,t){e.exports=function(){return!1}},ZE5A:function(e,t,n){function r(e,t,n,r){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&r.call(e,n)}}var o=n("Jssu");e.exports=function(e,t,n,o,a){var i=r.apply(this,arguments);return e.addEventListener(n,i,a),{destroy:function(){e.removeEventListener(n,i,a)}}}},ZT2e:function(e,t){e.exports=function(e){return e}},ZePI:function(e,t,n){"use strict";function r(e){var t=e.className,n=e.name,r=e.children,o=e.type,a=e.isLabel,i=e.isRequired;return u.a.createElement(a?"label":"div",{className:"form-entry "+t,type:o},n&&u.a.createElement("span",{className:"key"},n,i&&u.a.createElement("span",{className:"required-sign"},"*")),u.a.createElement("span",{className:"val"},r))}function o(e){return u.a.createElement(r,f({},e,{isLabel:!0}))}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("GiK3"),u=n.n(s),l=n("KSGD"),p=n.n(l),f=(n("QOOM"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});r.PropTypes={className:p.a.string,children:p.a.any,name:p.a.any,type:p.a.string,isLabel:p.a.bool,isRequired:p.a.bool},r.defaultProps={className:"",isLabel:!1};n("GOFo");var d=function(e){function t(){return a(this,t),i(this,e.apply(this,arguments))}return c(t,e),t.prototype.render=function(){var e=this.props,t=e.type,n=e.className,r=e.isChecked,o=e.isDisabled,a=e.onClick,i=e.children;return u.a.createElement("label",{className:"\n        "+t+"-label\n        "+(r?"is-checked":"")+"\n        "+(o?"is-disabled":"")+"\n        "+n+"\n        "},u.a.createElement("button",{className:"checker",onClick:a,disabled:o}),i)},t}(s.PureComponent);d.propTypes={type:p.a.oneOf(["radio","check"]).isRequired,className:p.a.string,isDisabled:p.a.bool,isChecked:p.a.bool,onClick:p.a.func,children:p.a.any},d.defaultProps={className:""};var h=function(e){function t(){var n,r,o;a(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=r=i(this,e.call.apply(e,[this].concat(s))),r.createOnChangeHandler=function(e,t){return function(){return r.props.onChange(e,t)}},o=n,i(r,o)}return c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.optionList,o=t.currentOptionIdx,a=t.isDisabled;return u.a.createElement("span",{className:"radio-group "+n+" "+(a?"is-disabled":"")},r.map(function(t,n){return t&&u.a.createElement(d,{key:n,type:"radio",isChecked:n===o,isDisabled:a||t.isDisabled,onClick:!(a||t.isDisabled)&&e.createOnChangeHandler(t.val,n)},t.name)}))},t}(s.PureComponent);h.propTypes={className:p.a.string,onChange:p.a.func,optionList:p.a.array,currentOptionIdx:p.a.number,isDisabled:p.a.bool},h.defaultProps={className:""};var m=function(e){function t(){var n,r,o;a(this,t);for(var c=arguments.length,s=Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=r=i(this,e.call.apply(e,[this].concat(s))),r.createOnChangeHandler=function(e){return function(){var t=r.props,n=t.onChange,o=t.currentOptionIdxList,a=new Set(o);a[a.has(e)?"delete":"add"](e),n(a)}},o=n,i(r,o)}return c(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.optionList,o=t.currentOptionIdxList,a=t.isDisabled,i=new Set(o);return u.a.createElement("span",{className:"checkbox-group "+n+" "+(a?"is-disabled":"")},r.map(function(t,n){return t&&u.a.createElement(d,{key:n,type:"check",onClick:e.createOnChangeHandler(n),isDisabled:a||t.isDisabled,isChecked:i.has(n)},t.name)}))},t}(s.PureComponent);m.propTypes={className:p.a.string,onChange:p.a.func,optionList:p.a.array,currentOptionIdxList:p.a.oneOfType([p.a.instanceOf(Set),p.a.array]),isDisabled:p.a.bool},m.defaultProps={className:"",currentOptionIdxList:new Set},n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return d}),n.d(t,"e",function(){return h}),n.d(t,"a",function(){return m})},aCM0:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},"aTD+":function(e,t){},bFAv:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var o,a=function(e){return e&&e.__esModule?e:{default:e}}(n("zzRL"));o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var i=(0,a.default)(o);t.default=i}).call(t,n("DuR2"),n("3IRH")(e))},bGc4:function(e,t,n){var r=n("gGqR"),o=n("Rh28");e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},bJWQ:function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var o=n("WxI4"),a=n("dFpP"),i=n("JBvZ"),c=n("2Hvv"),s=n("deUO");r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=i,r.prototype.has=c,r.prototype.set=s,e.exports=r},bjzn:function(e,t){},blYT:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n("DuR2"))},cXw4:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],n=new Array(e),r=0,o=0,u=0,l=function(t){n[o]=t,o=(o+1)%e,r++},p=function(){if(0!=r){var t=n[u];return n[u]=null,r--,u=(u+1)%e,t}},f=function(){for(var e=[];r;)e.push(p());return e};return{isEmpty:function(){return 0==r},put:function(p){if(r<e)l(p);else{var d=void 0;switch(t){case i:throw new Error(a);case c:n[o]=p,u=o=(o+1)%e;break;case s:d=2*e,n=f(),r=n.length,o=n.length,u=0,n.length=d,e=d,l(p)}}},take:p,flush:f}}n.d(t,"a",function(){return l});var o=n("Vr3j"),a="Channel's Buffer overflow!",i=1,c=3,s=4,u={isEmpty:o.o,put:o.r,take:o.r},l={none:function(){return u},fixed:function(e){return r(e,i)},dropping:function(e){return r(e,2)},sliding:function(e){return r(e,c)},expanding:function(e){return r(e,s)}}},cdq7:function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},"d+aQ":function(e,t,n){var r=n("hbAh"),o=n("16tV"),a=n("sJvV");e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},d04f:function(e,t){e.exports={switch:"_1LM6f7H7J3EIquLJtpHQmC",switchOff:"_2tJGjG9fwrKpJqLyfWv8GH _1LM6f7H7J3EIquLJtpHQmC",switchOn:"_1FVJFsajFlykKLPb2IN3I_ _1LM6f7H7J3EIquLJtpHQmC",inner:"_3QV8d0uOpbku0FEX9_pKT7",innerOff:"_2ZUvjE1qn1qTVaVRBTPNlU _3QV8d0uOpbku0FEX9_pKT7",innerOn:"_2ijFBxI3sChrMU6LGrXV6Y _3QV8d0uOpbku0FEX9_pKT7",icon:"_1NL5w37tiiLLzGa1DnO8Yr"}},dAKm:function(e,t,n){var r=n("vxJQ")("round");e.exports=r},dFpP:function(e,t,n){var r=n("imBK"),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},dMLf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayActMap=t.objectActMap=t.ArrayOf=t.ObjectAs=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n("Wme4"),a=n("w2Dv"),i=o.Operation.objectSet,c=o.Operation.objectDelete,s=o.Operation.objectMerge,u=o.Operation.arraySet,l=o.Operation.arrayDelete,p=o.Operation.arrayInsert,f=o.Operation.arrayPush,d=o.Operation.arrayUnshift,h=o.Operation.arrayPop,m=o.Operation.arrayShift,v=o.Operation.arrayConcat,y=o.Operation.arrayMatchPush,g=o.Operation.arrayMatchDelete,b=o.Operation.arrayMatchMove,w=o.Operation.arrayFindPush,E=o.Operation.arrayFindDelete,C=o.Operation.arrayFindMove,O=o.Operation.arrayFindSet,_={set:function(e,t){var n=t.key,r=t.value;return i(e,n,r)},delete:function(e,t){var n=t.key;return c(e,n)},merge:function(e,t){var n=t.merge;return s(e,n)}},S={set:function(e,t){var n=t.index,r=t.value;return u(e,n,r)},delete:function(e,t){var n=t.index;return l(e,n)},insert:function(e,t){var n=t.index,r=t.value;return p(e,n,r)},push:function(e,t){var n=t.value;return f(e,n)},pop:function(e,t){return h(e)},shift:function(e,t){return m(e)},unshift:function(e,t){var n=t.value;return d(e,n)},concat:function(e,t){var n=t.concat;return v(e,n)},matchPush:function(e,t){var n=t.value;return y(e,n)},matchDelete:function(e,t){var n=t.value;return g(e,n)},matchMove:function(e,t){var n=t.index,r=t.value;return b(e,n,r)},findPush:function(e,t){var n=t.find,r=t.value;return w(e,n,r)},findDelete:function(e,t){var n=t.find;return E(e,n)},findMove:function(e,t){var n=t.find,r=t.index;return C(e,n,r)},findSet:function(e,t){var n=t.find,r=t.value;return O(e,n,r)}};t.ObjectAs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new a.ObjectScheme(e,r({},t),r({},_,n))},t.ArrayOf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new a.ArrayScheme(e,[t],r({},S,n))},t.objectActMap=_,t.arrayActMap=S},deUO:function(e,t,n){var r=n("imBK");e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},dmQx:function(e,t,n){var r=n("G8ar");e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},eHwr:function(e,t,n){var r=n("JyYQ"),o=n("bGc4"),a=n("ktak");e.exports=function(e){return function(t,n,i){var c=Object(t);if(!o(t)){var s=r(n,3);t=a(t),n=function(e){return s(c[e],e,c)}}var u=e(t,n,i);return u>-1?c[s?t[u]:u]:void 0}}},eKBv:function(e,t,n){var r=n("YDHx"),o=n("Q7hp"),a=n("RfZv"),i=n("hIPy"),c=n("tO4o"),s=n("sJvV"),u=n("Ubhr"),l=1,p=2;e.exports=function(e,t){return i(e)&&c(t)?s(u(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?a(n,e):r(t,i,l|p)}}},egdi:function(e,t,n){"use strict";var r=n("JJnU");n.d(t,"f",function(){return r.i}),n.d(t,"d",function(){return r.g}),n.d(t,"a",function(){return r.b}),n.d(t,"b",function(){return r.d}),n.d(t,"c",function(){return r.f}),n.d(t,"e",function(){return r.h}),n.d(t,"g",function(){return r.j})},f931:function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},gGqR:function(e,t,n){var r=n("aCM0"),o=n("yCNF"),a="[object AsyncFunction]",i="[object Function]",c="[object GeneratorFunction]",s="[object Proxy]";e.exports=function(e){if(!o(e))return!1;var t=r(e);return t==i||t==c||t==a||t==s}},gHOb:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},ggOT:function(e,t){e.exports=function(){return!1}},"gt/O":function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},hIPy:function(e,t){e.exports=function(e){return e}},hYij:function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a=Object.defineProperty,i=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,l=u&&u(Object);e.exports=function e(t,n,p){if("string"!=typeof n){if(l){var f=u(n);f&&f!==l&&e(t,f,p)}var d=i(n);c&&(d=d.concat(c(n)));for(var h=0;h<d.length;++h){var m=d[h];if(!(r[m]||o[m]||p&&p[m])){var v=s(n,m);try{a(t,m,v)}catch(e){}}}return t}return t}},hbAh:function(e,t,n){var r=n("bJWQ"),o=n("YDHx"),a=1,i=2;e.exports=function(e,t,n,c){var s=n.length,u=s,l=!c;if(null==e)return!u;for(e=Object(e);s--;){var p=n[s];if(l&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++s<u;){var f=(p=n[s])[0],d=e[f],h=p[1];if(l&&p[2]){if(void 0===d&&!(f in e))return!1}else{var m=new r;if(c)var v=c(d,h,f,e,t,m);if(!(void 0===v?o(h,d,a|i,c,m):v))return!1}}return!0}},hdYV:function(e,t){e.exports={actions:"wRqz24jxhcfaosBl3Iw0K"}},hrPF:function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},hygk:function(e,t,n){var r=n("YDHx");e.exports=function(e,t){return r(e,t)}},i4Cv:function(e,t,n){"use strict";function r(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],r(n),r(o))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(i),n=1;n<t.length;n++)t=(e=r(t,n).join("")).match(i);return e}}function a(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=c.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=o(n[0]);r!==n[0]&&(t[n[0]]=r)}n=c.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),i=0;i<a.length;i++){var s=a[i];e=e.replace(new RegExp(s,"g"),t[s])}return e}var i=new RegExp("%[a-f0-9]{2}","gi"),c=new RegExp("(%[a-f0-9]{2})+","gi");e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return a(e)}}},i4ON:function(e,t,n){var r=n("nw3t"),o=n("22B7"),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},iDEd:function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},iL3P:function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},iNpB:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return m});var r=n("GiK3"),o=n.n(r),a=n("KSGD"),i=n.n(a),c=n("/MvA"),s=n("n7Jj"),u=window,l=u.MB,p=u.I18N,f=function(){return location.assign("/pricing?next="+location.href)},d=function(e){var t=e.reason,n=e.data,r=e.shouldShowConfirm,a=e.onClose;return o.a.createElement(c.a,{isOpen:!0,className:"renew-modal",title:p.renew_prompt.title,onConfirm:r?f:null,confirmText:r?p.renew_now:null,onClose:a},o.a.createElement("p",null,h(t,n)))};d.propTypes={reason:i.a.string,data:i.a.object,shouldShowConfirm:i.a.bool,onClose:i.a.func};var h=function(e,t){var n=t.role,r=t.plan,o=t.storage,a=void 0===o?"":o,i=t.format,c=void 0===i?"":i,s=t.collaborators,u=void 0===s?"":s;return(p.renew_prompt[n+"_plan"]+p.renew_prompt[e]+p.renew_prompt[n+"_upgrade"]).replace("{plan}",p[r||l.user.current_plan]).replace("{storage}",a).replace("{format}",c.toUpperCase()).replace("{collaborators}",u)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.ga&&window.ga("ec:setAction","checkout",{step:1,option:e}),window.ga&&window.ga("send","event","goal","弹出了续费提示"),Object(s.a)(d,{reason:e,data:t,shouldShowConfirm:"user"===t.role})}},iYj9:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},igqX:function(e,t,n){"use strict";function r(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}return e}function o(e){return("*"===e?E.wildcard:p.n.array(e)?E.array:p.n.stringableFunc(e)?E.default:p.n.func(e)?E.predicate:E.default)(e)}function a(e,t,n){function r(e){a(),n(e,!0)}function o(e){i.push(e),e.cont=function(o,a){s||(Object(p.t)(i,e),e.cont=p.r,a?r(o):(e===t&&(c=o),i.length||(s=!0,n(c))))}}function a(){s||(s=!0,i.forEach(function(e){e.cont=p.r,e.cancel()}),i=[])}var i=[],c=void 0,s=!1;return o(t),{addTask:o,cancelAll:a,abort:r,getTasks:function(){return i},taskNames:function(){return i.map(function(e){return e.name})}}}function i(e){var t=e.context,n=e.fn,r=e.args;if(p.n.iterator(n))return n;var o=void 0,a=void 0;try{o=n.apply(t,r)}catch(e){a=e}return p.n.iterator(o)?o:a?Object(p.q)(function(){throw a}):Object(p.q)(function(){var e=void 0,t={done:!1,value:o},n=function(e){return{done:!0,value:e}};return function(r){return e?n(r):(e=!0,t)}}())}function c(e){function t(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,ee.cancelAll(),s(w))}function n(t,r){if(!$.isRunning)throw new Error("Trying to resume an already finished generator");try{var o=void 0;r?o=e.throw(t):t===w?($.isCancelled=!0,n.cancel(),o=p.n.func(e.return)?e.return(w):{done:!0,value:w}):o=t===b?p.n.func(e.return)?e.return():{done:!0}:e.next(t),o.done?($.isMainRunning=!1,$.cont&&$.cont(o.value)):u(o.value,q,"",n)}catch(e){$.isCancelled&&Z("error","uncaught at "+W,e.message),$.isMainRunning=!1,$.cont(e,!0)}}function s(t,n){e._isRunning=!1,J.close(),n?(t instanceof Error&&(t.sagaStack="at "+W+" \n "+(t.sagaStack||t.stack)),Q.cont||(Z("error","uncaught",t.sagaStack||t.stack),t instanceof Error&&Y&&Y(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),Q.cont&&Q.cont(t,n),Q.joiners.forEach(function(e){return e.cb(t,n)}),Q.joiners=null}function u(e,t){function n(e,t){i||(i=!0,o.cancel=p.r,z&&(t?z.effectRejected(a,e):z.effectResolved(a,e)),o(e,t))}var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments[3],a=Object(p.v)();z&&z.effectTriggered({effectId:a,parentEffectId:t,label:r,effect:e});var i=void 0;n.cancel=p.r,o.cancel=function(){if(!i){i=!0;try{n.cancel()}catch(e){Z("error","uncaught at "+W,e.message)}n.cancel=p.r,z&&z.effectCancelled(a)}};var c=void 0;return p.n.promise(e)?l(e,n):p.n.helper(e)?j(C(e),a,n):p.n.iterator(e)?y(e,a,W,n):p.n.array(e)?V(e,a,n):(c=h.c.take(e))?E(c,n):(c=h.c.put(e))?O(c,n):(c=h.c.all(e))?N(c,a,n):(c=h.c.race(e))?M(c,a,n):(c=h.c.call(e))?_(c,a,n):(c=h.c.cps(e))?S(c,n):(c=h.c.fork(e))?j(c,a,n):(c=h.c.join(e))?x(c,n):(c=h.c.cancel(e))?T(c,n):(c=h.c.select(e))?k(c,n):(c=h.c.actionChannel(e))?P(c,n):(c=h.c.flush(e))?I(c,n):(c=h.c.cancelled(e))?R(c,n):(c=h.c.getContext(e))?L(c,n):(c=h.c.setContext(e))?A(c,n):n(e)}function l(e,t){var n=e[p.a];p.n.func(n)?t.cancel=n:p.n.func(e.abort)&&(t.cancel=function(){return e.abort()}),e.then(t,function(e){return t(e,!0)})}function y(e,t,n,r){c(e,D,B,F,X,H,t,n,r)}function E(e,t){var n=e.channel,r=e.pattern,a=e.maybe;n=n||J;var i=function(e){return e instanceof Error?t(e,!0):t(Object(f.d)(e)&&!a?b:e)};try{n.take(i,o(r))}catch(e){return t(e,!0)}t.cancel=i.cancel}function O(e,t){var n=e.channel,r=e.action,o=e.resolve;Object(d.a)(function(){var e=void 0;try{e=(n?n.put:B)(r)}catch(e){if(n||o)return t(e,!0);Z("error","uncaught at "+W,e.stack||e.message||e)}if(!o||!p.n.promise(e))return t(e);l(e,t)})}function _(e,t,n){var r=e.context,o=e.fn,a=e.args,i=void 0;try{i=o.apply(r,a)}catch(e){return n(e,!0)}return p.n.promise(i)?l(i,n):p.n.iterator(i)?y(i,t,o.name,n):n(i)}function S(e,t){var n=e.context,r=e.fn,o=e.args;try{var a=function(e,n){return p.n.undef(e)?t(n):t(e,!0)};r.apply(n,o.concat(a)),a.cancel&&(t.cancel=function(){return a.cancel()})}catch(e){return t(e,!0)}}function j(e,t,n){var r=e.context,o=e.fn,a=e.args,s=e.detached,u=i({context:r,fn:o,args:a});try{Object(d.c)();var l=c(u,D,B,F,X,H,t,o.name,s?null:p.r);s?n(l):u._isRunning?(ee.addTask(l),n(l)):u._error?ee.abort(u._error):n(l)}finally{Object(d.b)()}}function x(e,t){if(e.isRunning()){var n={task:Q,cb:t};t.cancel=function(){return Object(p.t)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())}function T(e,t){e===p.d&&(e=Q),e.isRunning()&&e.cancel(),t()}function N(e,t,n){function r(){a===o.length&&(i=!0,n(p.n.array(e)?p.f.from(v({},c,{length:o.length})):c))}var o=Object.keys(e);if(!o.length)return n(p.n.array(e)?[]:{});var a=0,i=void 0,c={},s={};o.forEach(function(e){var t=function(t,o){i||(o||Object(f.d)(t)||t===b||t===w?(n.cancel(),n(t,o)):(c[e]=t,a++,r()))};t.cancel=p.r,s[e]=t}),n.cancel=function(){i||(i=!0,o.forEach(function(e){return s[e].cancel()}))},o.forEach(function(n){return u(e[n],t,n,s[n])})}function M(e,t,n){var r=void 0,o=Object.keys(e),a={};o.forEach(function(e){var t=function(t,o){if(!r)if(o)n.cancel(),n(t,!0);else if(!Object(f.d)(t)&&t!==b&&t!==w){var a;n.cancel(),r=!0,n((a={},a[e]=t,a))}};t.cancel=p.r,a[e]=t}),n.cancel=function(){r||(r=!0,o.forEach(function(e){return a[e].cancel()}))},o.forEach(function(n){r||u(e[n],t,n,a[n])})}function k(e,t){var n=e.selector,r=e.args;try{t(n.apply(void 0,[F()].concat(r)))}catch(e){t(e,!0)}}function P(e,t){var n=e.pattern,r=e.buffer,a=o(n);a.pattern=n,t(Object(f.c)(D,r||m.a.fixed(),a))}function R(e,t){t(!!$.isCancelled)}function I(e,t){e.flush(t)}function L(e,t){t(X[e])}function A(e,t){p.s.assign(X,e),t()}var D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return p.r},B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p.r,F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.r,U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,W=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",K=arguments[8];Object(p.g)(e,p.n.iterator,g);var V=Object(p.k)(N,Object(p.w)("[...effects]","all([...effects])")),z=H.sagaMonitor,G=H.logger,Y=H.onError,Z=G||p.p,J=Object(f.e)(D),X=Object.create(U);n.cancel=p.r;var Q=function(e,n,o,a){var i,c;return o._deferredEnd=null,i={},i[p.e]=!0,i.id=e,i.name=n,c={},c.done=c.done||{},c.done.get=function(){if(o._deferredEnd)return o._deferredEnd.promise;var e=Object(p.i)();return o._deferredEnd=e,o._isRunning||(o._error?e.reject(o._error):e.resolve(o._result)),e.promise},i.cont=a,i.joiners=[],i.cancel=t,i.isRunning=function(){return o._isRunning},i.isCancelled=function(){return o._isCancelled},i.isAborted=function(){return o._isAborted},i.result=function(){return o._result},i.error=function(){return o._error},i.setContext=function(e){Object(p.g)(e,p.n.object,Object(p.h)("task",e)),p.s.assign(X,e)},r(i,c),i}(q,W,e,K),$={name:W,cancel:function(){$.isRunning&&!$.isCancelled&&($.isCancelled=!0,n(w))},isRunning:!0},ee=a(W,$,s);return K&&(K.cancel=t),e._isRunning=!0,n(),Q}function s(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var a=void 0;p.n.iterator(e)?(a=e,e=t):(Object(p.g)(t,p.n.func,_),a=t.apply(void 0,r),Object(p.g)(a,p.n.iterator,_));var i=e,s=i.subscribe,u=i.dispatch,l=i.getState,f=i.context,d=i.sagaMonitor,h=i.logger,m=i.onError,v=Object(p.v)();d&&(d.effectTriggered=d.effectTriggered||p.r,d.effectResolved=d.effectResolved||p.r,d.effectRejected=d.effectRejected||p.r,d.effectCancelled=d.effectCancelled||p.r,d.actionDispatched=d.actionDispatched||p.r,d.effectTriggered({effectId:v,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:r}}));var y=c(a,s,Object(p.x)(u),l,f,{sagaMonitor:d,logger:h,onError:m},v,t.name);return d&&d.effectResolved(v,y),y}function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var l={};n.d(l,"TASK",function(){return p.e}),n.d(l,"SAGA_ACTION",function(){return p.c}),n.d(l,"noop",function(){return p.r}),n.d(l,"is",function(){return p.n}),n.d(l,"deferred",function(){return p.i}),n.d(l,"arrayOfDeffered",function(){}),n.d(l,"createMockTask",function(){}),n.d(l,"cloneableGenerator",function(){}),n.d(l,"asEffect",function(){return h.c}),n.d(l,"CHANNEL_END",function(){return b});var p=n("Vr3j"),f=n("xJpq"),d=n("2Bk7"),h=n("JJnU"),m=n("cXw4"),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g="proc first argument (Saga function result) must be an iterator",b={toString:function(){return"@@redux-saga/CHANNEL_END"}},w={toString:function(){return"@@redux-saga/TASK_CANCEL"}},E={wildcard:function(){return p.o},default:function(e){return"symbol"===(void 0===e?"undefined":y(e))?function(t){return t.type===e}:function(t){return t.type===String(e)}},array:function(e){return function(t){return e.some(function(e){return o(e)(t)})}},predicate:function(e){return function(t){return e(t)}}},C=function(e){return{fn:e}},O="runSaga(storeInterface, saga, ...args)",_=O+": saga argument must be a Generator function!",S=(n("2iFZ"),n("egdi"));n.d(t,!1,function(){return s}),n.d(t,!1,function(){return f.a}),n.d(t,!1,function(){return f.c}),n.d(t,!1,function(){}),n.d(t,!1,function(){return m.a}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return p.j}),n.d(t,!1,function(){return p.a}),n.d(t,!1,function(){return S}),n.d(t,!1,function(){return l});t.a=function(){function e(t){var n=t.getState,u=t.dispatch,l=Object(f.b)();return l.emit=(o.emitter||p.l)(l.emit),e.run=s.bind(null,{context:r,subscribe:l.subscribe,dispatch:u,getState:n,sagaMonitor:a,logger:i,onError:c}),function(e){return function(t){a&&a.actionDispatched&&a.actionDispatched(t);var n=e(t);return l.emit(t),n}}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.context,r=void 0===n?{}:n,o=u(t,["context"]),a=o.sagaMonitor,i=o.logger,c=o.onError;if(p.n.func(o))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(i&&!p.n.func(i))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(c&&!p.n.func(c))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(o.emitter&&!p.n.func(o.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");return e.run=function(){throw new Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},e.setContext=function(e){Object(p.g)(e,p.n.object,Object(p.h)("sagaMiddleware",e)),p.s.assign(r,e)},e}},imBK:function(e,t,n){var r=n("22B7");e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},jBIO:function(e,t,n){"use strict";function r(e,t){if(!e||e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function o(e){var t=void 0,n=void 0;return function(){return r(n,arguments)||(t=e.apply(null,arguments),n=arguments),t}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e){var t=an("#simulator-container"),n=an("#simulator-wrapper");if(!t.length)return!1;var r=e?0:pn,o=t[0],a=t.width()+(e?pn:-pn);o.style.right=r+"px";var i=an("#simulator").outerWidth(),c=Widget.additionalSize(i,0)[1],s=void 0;i+c>a?(n.outerWidth(i+c),s=(i-a+c)/2):(n.css("width",""),c=a-i,s=0),t.animate({scrollLeft:s})}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,layers:[],error:""},t=arguments[1];switch(t.type){case Ln:return Object.assign({},e,{isFetching:!1,layers:t.payload.layers,error:void 0});case Dn:return Object.assign({},e,{isFetching:!1,layers:[],error:t.payload.error});default:return e}}function U(e){var t,n,r,o,a,i,c,s,u,l,p,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Jn.e)();case 2:if(t=e.sent,n=t.container.layers,r=n.resourceByScreen,o=n.visibilityScreenID,a=t.model,i=a.current.screenCid,c=a.screens,s=a.widgets,u=c.find(function(e){return e.cid===i}),r[o]&&!r[o].error){e.next=39;break}if(-1!==or.indexOf(o)){e.next=37;break}if(or.push(o),e.prev=8,l=void 0,!u.artboard_id){e.next=16;break}return e.next=13,Object(Jn.b)(Qn,u.artboard_id);case 13:l=e.sent,e.next=17;break;case 16:l={artboard:{width:u.width,height:u.height},layers:[]};case 17:return p=0,l.layers=[{type:"screen",id:u.cid,name:u.name,top:0,left:0,width:u.width,height:u.height,src_left:0,src_top:0,src_width:l.artboard.width,src_height:l.artboard.height,bg_colors:[{value:u.bgcolor}]}].concat(s.filter(function(e){return p||e.screen_cid!==u.cid||"status_bar"!==e.name||(p=e.height),e.screen_cid===u.cid&&!["pg","lr","sticky"].includes(e.name)&&e.v&&!("image_view"===e.name&&e.width===u.width&&e.height===u.height)}).map(function(e){var t=void 0;switch(e.name){case"status_bar":t=0;break;case"keyboard":case"tab_bar":t=u.height-e.height;break;case"navigation_bar":t=p;break;default:t=e.top}return e.top=t,Object(Pt.c)(e.name)&&(e.width=u.width),ir(e)}).concat(l.layers).reduce(function(e,t){var n=t.id,r=t.top,o=t.left,a=t.width,i=t.height,c=cr(n)?1:u.width/l.artboard.width,s=o*c,p=r*c,f=a*c,d=i*c,h=Math.min(Math.max(s,0),u.width),m=Math.min(Math.max(s+f,0),u.width),v=Math.min(Math.max(p,0),u.height),y=Math.min(Math.max(p+d,0),u.height);return m-h!=0&&y-v!=0?e.concat([Object.assign({},t,{left:h,top:v,width:m-h,height:y-v,src_top:Math.floor(Math.max(r,0)),src_left:Math.floor(Math.max(o,0)),src_width:Math.floor(Math.min(o+a,l.artboard.width)-Math.max(o,0)),src_height:Math.floor(Math.min(r+i,l.artboard.height)-Math.max(r,0))})]):e.concat([])},[])),or.splice(or.indexOf(o),1),e.next=22,Object(Jn.d)(An(o,l));case 22:return f=ar(l.layers),e.next=25,Object(Jn.d)(gn(f.id));case 25:return e.next=27,Object(Jn.d)(wn(f.id));case 27:return e.next=29,Object(Jn.d)(Cn(u.cid));case 29:e.next=37;break;case 31:return e.prev=31,e.t0=e.catch(8),console.log(e.t0.stack),or.splice(or.indexOf(o),1),e.next=37,Object(Jn.d)(Bn(o,e.t0.message));case 37:e.next=46;break;case 39:return d=ar(r[o].layers),e.next=42,Object(Jn.d)(gn(d.id));case 42:return e.next=44,Object(Jn.d)(wn(d.id));case 44:return e.next=46,Object(Jn.d)(Cn(u.cid));case 46:case"end":return e.stop()}},$n,this,[[8,31]])}function H(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Jn.g)(In,U);case 2:case"end":return e.stop()}},er,this)}function q(e){var t,n,r,o,a,i,c,s;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload.layerID,u.next=3,Object(Jn.e)();case 3:if(n=u.sent,r=n.container.layers,o=r.selectedLayerID,a=r.activeLayerID,i=r.resourceByScreen,c=r.visibilityScreenID,t!==o){u.next=16;break}if(!(s=Tt()(i[c].layers,{id:a})).parent){u.next=12;break}return u.next=10,Object(Jn.d)(wn(s.parent));case 10:u.next=14;break;case 12:return u.next=14,Object(Jn.d)(wn(t));case 14:u.next=20;break;case 16:return u.next=18,Object(Jn.d)(gn(t));case 18:return u.next=20,Object(Jn.d)(wn(t));case 20:case"end":return u.stop()}},tr,this)}function W(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Jn.g)(mn,q);case 2:case"end":return e.stop()}},nr,this)}function K(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[H(),W()];case 2:case"end":return e.stop()}},rr,this)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function J(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function te(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function oe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ae(e,t){var n=null,r=null,o=De(function(t){var o=t.clientX,c=t.clientY,s=t.target,u=t.currentTarget;if(e()&&s===u){var l=e().getBoundingClientRect(),p=l.left,f=l.right,d=l.top,h=l.bottom;n={clientX:o,clientY:c},r={left:p,right:f,top:d,bottom:h},document.addEventListener("mousemove",a),document.addEventListener("mouseup",i),document.addEventListener("mouseleave",i)}}),a=De(function(o){var a=o.clientX,i=o.clientY;if(e()){var c=a-n.clientX,s=i-n.clientY;t({left:r.left+c,right:r.right+c,top:r.top+s,bottom:r.bottom+s})}}),i=De(function(){n=null,r=null,document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",i),document.removeEventListener("mouseleave",i)});return{onMouseDown:o}}function ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:"",right:"",top:"",bottom:""},r=Math.max(t.left-e.left,0),o=Math.max(e.right-t.right,0);r<=o?n.left=r/e.width*100+"%":n.right=o/e.width*100+"%";var a=Math.max(t.top-e.top,0),i=Math.max(e.bottom-t.bottom,0);return a<=i?n.top=a/e.height*100+"%":n.bottom=i/e.height*100+"%",n}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function de(e,t,n){var r=e-n.left,o=t-n.top;return r*r+o*o>=lo}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function be(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function we(e,t,n){switch(e){case"device":var r=MB.currentProject,o=r.deviceShell()||r.defaultShell();if(!o.bg)return null;var a=n?o.bg+"_land":o.bg,i=n?[-o.left,-o.top,o.height,o.width]:[-o.top,-o.left,o.width,o.height];return{top:i[0],left:i[1],width:i[2],height:i[3],backgroundImage:"url("+(Boolean(window.MBData)?".":"")+"/images/devices/"+a+".png)"};case"default":case"none":return null}}function Ee(e,t,n,r,o,a){var i=void 0;if(o){var c=Math.min(n.width,n.height),s=Math.max(n.width,n.height),u=Math.min(t.width,t.height),l=Math.max(t.width,t.height),p=e.width!==u,f=p!==n.width>n.height,d=void 0;p?(d=s/l,i={width:l,height:Math.min(u,c/d),transform:(f?"translate(-100%) rotate(-90deg)":"")+" scale("+d+")",transformOrigin:f?"top right":"top left"}):(d=c/u,i={width:u,height:Math.min(l,s/d),transform:(f?"translate(-100%) rotate(-90deg)":"")+" scale("+d+")",transformOrigin:f?"top right":"top left"})}else if(a)i={width:e.width,height:e.height,transform:"scale("+r/100+")"};else{var h="landscape"===e.orientation,m=t.width,v=t.height,y=h?[v,m]:[m,v];i={width:y[0],height:y[1],transform:"scale("+r/100+")"}}return i}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ke=n("GiK3"),Pe=n.n(ke),Re=n("KSGD"),Ie=n.n(Re),Le=n("RH2O"),Ae=n("wFrT"),De=function(e){return function(t){return t&&t.preventDefault(),t&&t.stopPropagation(),e&&e(t)}},Be={"&amp;":"&","&lt;":"<","&gt;":">"},Fe=function(e){return Be[e]||e},Ue=function(e){return e&&e.replace(/(&amp;|&lt;|&gt;)/g,Fe)},He=function(e,t,n){return Math.min(Math.max(e,t),n)},qe=n("WCZ4"),We=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ke=function(e){function t(){return a(this,t),i(this,e.apply(this,arguments))}return c(t,e),t.prototype.componentDidMount=function(){this.resize()},t.prototype.componentDidUpdate=function(){this.resize()},t.prototype.resize=function(){var e=this.body;e.style.width="",e.style.height="";var t=e.getBoundingClientRect(),n=t.width,r=t.height;n=Math.round(n),r=Math.round(r),n%2!=0&&(n+=1),r%2!=0&&(r+=1),e.style.width=n+"px",e.style.height=r+"px"},t.prototype.render=function(){var e=this;return Pe.a.createElement("div",We({ref:function(t){return e.body=t}},this.props),this.props.children)},t}(ke.Component),Ve=Ke;Ke.propTypes={children:Ie.a.oneOfType([Ie.a.element,Ie.a.array])};var ze=n("P63K"),Ge=n("ZePI"),Ye=n("kiPs"),Ze=n.n(Ye),Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xe={device:I18N.device_shell,default:I18N.default_shell,none:I18N.none_shell},Qe=function(e){function t(){s(this,t);var n=u(this,e.call(this));return n.toggle=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({show:!n.props.disabled&&!n.state.show})},n.handleDocClick=function(e){n.elementRef&&!n.elementRef.contains(e.target)&&n.setState({show:!1})},n.handleHighlight=function(){var e=!MB.currentProject._highlight;n.props.dispatch({type:"projects:update-local",payload:Je({},n.props.project,{_highlight:e})}),MB.currentProject._highlight=e},n.handleUpdateShell=function(e){n.props.dispatch({type:"projects:update-local",payload:Je({},n.props.project,{_shell_type:e})}),MB.currentProject._shell_type=e,MB.runner.reload(!0)},n.setElementRef=function(e){n.elementRef=e},n.elementRef=null,n.state={show:!1},n}return l(t,e),t.prototype.componentDidMount=function(){document.addEventListener("click",this.handleDocClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this.handleDocClick)},t.prototype.render=function(){var e=this.props,t=e.project,n=e.disabled,r=this.state.show;return Pe.a.createElement("div",{ref:this.setElementRef,className:Ze.a.root},Pe.a.createElement("a",{className:r?"active":"",title:I18N.setting,disabled:n,onClick:this.toggle},Pe.a.createElement("span",{className:"icon icon-cog"})),r&&Pe.a.createElement(Ve,{className:Ze.a.container},Pe.a.createElement("div",{className:Ze.a.content},"web"!==t.device&&Pe.a.createElement(ze.a,{className:Ze.a.select,value:t._shell_type,onChange:this.handleUpdateShell,options:Xe}),Pe.a.createElement(Ge.b,{type:"check",isChecked:!!t._highlight,onClick:this.handleHighlight},I18N.highlight_clickable)),Pe.a.createElement("i",{className:"fa fa-caret-down "+Ze.a.caret})))},t}(ke.PureComponent);Qe.propTypes={project:Ie.a.object,disabled:Ie.a.bool,dispatch:Ie.a.func};var $e=Qe,et=n("hdYV"),tt=n.n(et),nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rt=function(e){function t(){p(this,t);var n=f(this,e.call(this));return n.handleZoomIn=function(){return n.handleZoomStep(1)},n.handleZoomOut=function(){return n.handleZoomStep(-1)},n.setElementRef=function(e){n.elementRef=e},n.elementRef=null,n.state={canPrev:!1},n}return d(t,e),t.prototype.componentDidMount=function(){var e=this;$(this.elementRef).tooltip({selector:"a",container:"body",placement:"left"}),ot.updateBackButton=function(t){e.setState({canPrev:t})}},t.prototype.handleZoomStep=function(e){var t=this.props,n=t.project,r=t.dispatch,o=st(n.scale,e);r({type:"projects:update-local",payload:nt({},this.props.project,{scale:o})}),ot.currentProject.scale=o,ot.runner.reload(!0)},t.prototype.render=function(){var e=this.props,t=e.project,n=e.isLayerActive,r=e.dispatch,o=this.state.canPrev,a=ut(t.scale),i=a.canZoomIn,c=a.canZoomOut;return Pe.a.createElement("div",{ref:this.setElementRef,className:tt.a.actions},at()&&Pe.a.createElement("a",{className:"design",title:I18N.back,onClick:it},Pe.a.createElement("span",{className:"icon icon-times"})),!t.template&&Pe.a.createElement($e,{project:t,disabled:n,dispatch:r}),Pe.a.createElement("a",{id:"back_prev",disabled:!o,title:I18N.link_back,onClick:ct},Pe.a.createElement("span",{className:"icon icon-arrow-left"})),Pe.a.createElement("a",{id:"zoomin",disabled:!i,title:I18N.zoomin,onClick:this.handleZoomIn},Pe.a.createElement("span",{className:"icon icon-zoom-in"})),Pe.a.createElement("a",{id:"zoomout",disabled:!c,title:I18N.zoomout,onClick:this.handleZoomOut},Pe.a.createElement("span",{className:"icon icon-zoom-out"})))},t}(ke.PureComponent);rt.propTypes={project:Ie.a.object,isLayerActive:Ie.a.bool,dispatch:Ie.a.func};var ot=window.MB,at=function(){return!ot.f.inSharing&&"file:"!==window.location.protocol&&!ot.currentProject.template},it=function(){return ot.designer.backDesign()},ct=function(){return ot.runner.backPrev()},st=function(e,t){var n=ot.config.SCALES.indexOf(e);return ot.config.SCALES[n+t]},ut=function(e){var t=ot.config.SCALES.indexOf(e);return{canZoomIn:!(t===ot.config.SCALES.length-1),canZoomOut:!(0===t)}},lt=Object(Le.connect)(function(e){return{isLayerActive:e.container.previewPanel.isLayerActive}})(rt),pt=n("d04f"),ft=n.n(pt),dt=function(e){function t(n){h(this,t);var r=m(this,e.call(this,n));return r.setChecked=r.setChecked.bind(r),r.toggle=r.toggle.bind(r),r.state={checked:!!n.checked},r}return v(t,e),t.prototype.componentWillReceiveProps=function(e){"checked"in e&&this.setState({checked:!!e.checked})},t.prototype.setChecked=function(e){"checked"in this.props||this.setState({checked:e}),this.props.onChange(e)},t.prototype.toggle=function(){var e=!this.state.checked;this.setChecked(e)},t.prototype.render=function(){var e=this.props,t=e.icon,n=e.id,r=void 0,o=void 0;return this.state.checked?(r=ft.a.switchOn,o=ft.a.innerOn):(r=ft.a.switchOff,o=ft.a.innerOff),Pe.a.createElement("span",{id:n,className:r,onClick:this.toggle},Pe.a.createElement("span",{className:o},Pe.a.createElement(qe.a,{type:"mb",name:t,className:ft.a.icon})))},t}(ke.Component);dt.propTypes={id:Ie.a.string,icon:Ie.a.string,checked:Ie.a.bool,onChange:Ie.a.func};var ht=dt,mt=n("5HQq"),vt=n.n(mt).a["screen-node-content"],yt=function(e){function t(){return y(this,t),g(this,e.apply(this,arguments))}return b(t,e),t.prototype.render=function(){var e=this.props,t=e.cid,n=e.level,r=e.treeProps,o=e.className,a=n+1;return Pe.a.createElement("div",{className:o},r.childListMap[t].map(function(e){return Pe.a.createElement(gt,{key:e,cid:e,level:a,treeProps:r})}))},t}(ke.PureComponent);yt.propTypes={cid:Ie.a.string,level:Ie.a.number,treeProps:Ie.a.object,className:Ie.a.string};var gt=function(e){function t(n){y(this,t);var r=g(this,e.call(this,n));return r.screenTreeOperations={doShowComment:De(function(){return r.props.treeProps.doShowComment(r.props.cid)}),doSelectScreen:De(function(){return r.props.treeProps.doSelectScreen(r.props.cid)}),doToggleExpand:De(function(){return r.props.treeProps.doToggleExpand(r.props.cid)})},r}return b(t,e),t.prototype.render=function(){var e=this.props,t=e.cid,n=e.level,r=e.treeProps,o=r.nodeMap,a=r.childListMap,i=r.collapseKeySet,c=r.currentScreenCid,s=r.screenCommentThreadCountMap,u=a[t]&&a[t].length>0,l=c===t,p=!i.has(t),f=Ue(o[t].screen.name),d=s[t]||0;return Pe.a.createElement("div",null,Pe.a.createElement(bt,{level:n,hasChildTab:u,isSelect:l,isExpand:p,screenName:f,screenCommentThreadCount:d,screenTreeOperations:this.screenTreeOperations}),u&&p&&Pe.a.createElement(yt,{cid:t,level:n,treeProps:r}))},t}(ke.PureComponent);gt.propTypes={cid:Ie.a.string,level:Ie.a.number,treeProps:Ie.a.object};var bt=function(e){function t(){return y(this,t),g(this,e.apply(this,arguments))}return b(t,e),t.prototype.render=function(){var e=this.props,t=e.level,n=e.hasChildTab,r=e.isSelect,o=e.isExpand,a=e.screenName,i=e.screenCommentThreadCount,c=e.screenTreeOperations,s=c.doShowComment,u=c.doSelectScreen,l=c.doToggleExpand,p=r?n?l:null:u;return Pe.a.createElement("div",{className:vt+" "+(r?"select":""),style:{paddingLeft:wt(t)},onClick:p,title:a,"data-toggle":"tooltip","data-placement":"left"},Pe.a.createElement("div",{className:"toggle-expand",onClick:n?l:null},n&&Pe.a.createElement(qe.a,{type:"fa",name:o?"fa-caret-down":"fa-caret-right"})),Pe.a.createElement(qe.a,{type:"mb",name:"layout",className:"screen-icon"}),Pe.a.createElement("span",{className:"screen-name"},a),i>=1&&Pe.a.createElement("span",{className:"toggle-comment",onClick:s},Pe.a.createElement(qe.a,{type:"mb",name:"single-comment",className:"icon-comment"}),i))},t}(ke.PureComponent);bt.propTypes={level:Ie.a.number,hasChildTab:Ie.a.bool,isSelect:Ie.a.bool,isExpand:Ie.a.bool,screenName:Ie.a.string,screenCommentThreadCount:Ie.a.number,screenTreeOperations:Ie.a.object};var wt=function(e){return 2+12*e+"px"},Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct=function(e){function t(n){w(this,t);var r=E(this,e.call(this,n));return r.screenTreeOperations={doShowComment:function(e){r.screenTreeOperations.doSelectScreen(e),r.props.dispatch({type:"entry:comment:set:active",payload:{isActive:!0}})},doSelectScreen:function(e){var t=r.props,n=t.currentScreenCid,o=t.dispatch;n!==e&&o({type:"entry:sync-runner:set-screen",payload:{cid:e}})},doToggleExpand:function(e){var t=r.state.collapseKeySet,n=new Set(t);t.has(e)?n.delete(e):n.add(e),r.setState({collapseKeySet:n})}},r.state={collapseKeySet:new Set},r}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.screenTreeData,n=e.screenCommentThreadCountMap,r=e.currentScreenCid,o=this.state.collapseKeySet,a=Ot(t,n,r,o,this.screenTreeOperations);return Pe.a.createElement(yt,{cid:t.rootCid,level:-1,treeProps:a})},t}(ke.PureComponent);Ct.propTypes={screenTreeData:Ie.a.object,screenCommentThreadCountMap:Ie.a.object,currentScreenCid:Ie.a.string,dispatch:Ie.a.func};var Ot=o(function(e,t,n,r,o){return Et({screenCommentThreadCountMap:t,currentScreenCid:n,collapseKeySet:r},e,o)}),_t=Object(Le.connect)(function(e){return{screenTreeData:jt(e.model.screens,e.model.current.projectCid),screenCommentThreadCountMap:St(e.model.commentThreads),currentScreenCid:e.model.current.screenCid}})(Ct),St=o(function(e){return e.reduce(function(e,t){return e[t.screen_cid]=(e[t.screen_cid]||0)+1,e},{})}),jt=o(function(e,t){var n,r={},o=(n={},n.null=[],n);return e.forEach(function(e){if(e.project_cid===t){var n=e.cid,a=e.position,i=e.parent_cid||"null";r[n]={cid:n,parentCid:i,position:a,screen:e},void 0===o[i]&&(o[i]=[]),o[i].push(n)}}),Object.values(o).forEach(function(e){return e.sort(function(e,t){return r[e].position-r[t].position})}),{rootCid:"null",nodeMap:r,childListMap:o}}),xt=n("kbi+"),Tt=n.n(xt),Nt=n("l/Rs"),Mt=n("V33R"),kt=n.n(Mt),Pt=n("TfEB"),Rt=n("sF+Z"),It=n.n(Rt),Lt=function(e){function t(){return O(this,t),_(this,e.call(this))}return S(t,e),t.prototype.componentDidUpdate=function(){this.$scrollContainer&&(this.$scrollContainer.scrollTop=0)},t.prototype.render=function(){var e=this,t=this.props.layer;return t?Pe.a.createElement("div",{className:It.a.container,ref:function(t){return e.$scrollContainer=t}},Pe.a.createElement("div",{className:It.a.infoHeader},t.name),Pe.a.createElement("div",{className:It.a.panel},Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey+" "+It.a.fixedWidth},"X:"),Pe.a.createElement("span",{className:It.a.infoValue},t.src_left)),Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey+" "+It.a.fixedWidth},"Y:"),Pe.a.createElement("span",{className:It.a.infoValue},t.src_top))),Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey+" "+It.a.fixedWidth},I18N.preview_panel.width+":"),Pe.a.createElement("span",{className:It.a.infoValue},t.src_width)),Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey+" "+It.a.fixedWidth},I18N.preview_panel.height+":"),Pe.a.createElement("span",{className:It.a.infoValue},t.src_height))),t.o&&Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("span",{className:""+It.a.infoKey},I18N.preview_panel.opacity+":"),Pe.a.createElement("span",{className:It.a.infoValue},t.o))),t.text&&Pe.a.createElement("div",null,Pe.a.createElement("div",{className:It.a.infoHeader},Pe.a.createElement("span",null,I18N.preview_panel.text),Pe.a.createElement(Dt,{text:t.text,target:"."+It.a.textContent})),Pe.a.createElement("div",{className:It.a.panel},Pe.a.createElement("div",{className:It.a.panelRow+" "+It.a.infoValue},Pe.a.createElement("div",{className:It.a.textContent,dangerouslySetInnerHTML:{__html:t.text}})))),t.text_styles&&t.text_styles.length>0&&Pe.a.createElement("div",{className:It.a.panel},t.text_styles.map(function(e,n){var r=e.color&&Object(Pt.d)(e.color),o=t.text&&MB.strip(t.text).substr(e.location||0,e.length);return Pe.a.createElement("div",{key:n},Pe.a.createElement("div",{className:It.a.infoHeader},I18N.preview_panel.typeface+': "'+o+'"'),e.font_face&&Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("span",{className:It.a.flexFull+" "+It.a.infoValue},e.font_face)),e.font_size&&Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey},I18N.preview_panel.font_size+":")),Pe.a.createElement("span",{className:It.a.flexFull+" "+It.a.infoValue},e.font_size)),t.alignment&&Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey},I18N.preview_panel.align+":")),Pe.a.createElement("span",{className:It.a.flexFull+" "+It.a.infoValue},t.alignment)),t.line_height>0&&Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey},I18N.preview_panel.line_height+":")),Pe.a.createElement("span",{className:It.a.flexFull+" "+It.a.infoValue},t.line_height)),Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey},I18N.preview_panel.offset+":")),Pe.a.createElement("span",{className:It.a.flexFull+" "+It.a.infoValue},(e.location||0)+1)),Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey},I18N.preview_panel.length+":")),Pe.a.createElement("span",{className:It.a.flexFull+" "+It.a.infoValue},e.length)),e.color&&Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull+" "+It.a.colorRow},Pe.a.createElement("span",{className:It.a.colorBlock,style:{backgroundColor:r}}),Pe.a.createElement("div",{className:It.a.colorContent},Pe.a.createElement("span",{className:It.a.infoValue},Object(Pt.e)(r).toUpperCase()),Pe.a.createElement("span",{className:It.a.infoValue},r)))))})),t.bg_colors&&t.bg_colors.length>0&&Pe.a.createElement("div",null,Pe.a.createElement("div",{className:It.a.infoHeader},I18N.preview_panel.Fills),Pe.a.createElement("div",{className:It.a.panel},t.bg_colors.map(function(e,t){return Pe.a.createElement("div",{key:t,className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull+" "+It.a.colorRow},Pe.a.createElement("span",{className:It.a.colorBlock,style:{backgroundColor:e.value}}),Pe.a.createElement("div",{className:It.a.colorContent},Pe.a.createElement("span",{className:It.a.infoValue},Object(Pt.e)(e.value).toUpperCase()),Pe.a.createElement("span",{className:It.a.infoValue},Object(Pt.a)(e.value)))))}))),t.image&&t.image_set&&t.image_set_zip&&Pe.a.createElement(At,{image:t.image,imageSet:t.image_set,imageSetZip:t.image_set_zip,id:t.id}),t.borders&&t.borders.length>0&&Pe.a.createElement("div",null,Pe.a.createElement("div",{className:It.a.infoHeader},I18N.preview_panel.borders),Pe.a.createElement("div",{className:It.a.panel},t.borders.map(function(e,n){return Pe.a.createElement("div",{key:n},e.thickness&&Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey},I18N.preview_panel.thickness)),Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoValue},e.thickness))),e.position&&Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey},I18N.preview_panel.position)),Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoValue},e.position))),t.bd_radius>0&&Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoKey},I18N.preview_panel.bd_radius)),Pe.a.createElement("div",{className:It.a.flexFull},Pe.a.createElement("span",{className:It.a.infoValue},t.bd_radius))),e.color&&Pe.a.createElement("div",{key:n,className:It.a.panelRow},Pe.a.createElement("div",{className:It.a.flexFull+" "+It.a.colorRow},Pe.a.createElement("span",{className:It.a.colorBlock,style:{backgroundColor:e.color}}),Pe.a.createElement("div",{className:It.a.colorContent},Pe.a.createElement("span",{className:It.a.infoValue},Object(Pt.e)(e.color).toUpperCase()),Pe.a.createElement("span",{className:It.a.infoValue},Object(Pt.a)(e.color))))))})))):null},t}(ke.Component);Lt.propTypes={layer:Ie.a.object,currentScreen:Ie.a.object};var At=function(e){function t(){O(this,t);var n=_(this,e.call(this));return n.sendAnalysis=n.sendAnalysis.bind(n),n}return S(t,e),t.prototype.sendAnalysis=function(e){return function(t){var n=MB.currentProject;if(!n.limitation.slices){t.preventDefault();var r=n.owner_id==MB.user.id?"user":n.team_cid?"team":"project",o="user"==r?"upgrade":"renew";return MB.promptRenew("slices",{role:r,action:o,plan:n.owner_plan})}MB.event("使用了图层导出 "+e+" 功能","feature")}},t.prototype.render=function(){var e=this.props,t=e.imageSet,n=e.imageSetZip,r=e.image,o=t.filter(function(e){return 1!==e.size}).map(function(e){return e.src+" "+e.size+"x"}).join(", ");return Pe.a.createElement("div",null,Pe.a.createElement("div",{className:It.a.infoHeader},I18N.preview_panel.asset),Pe.a.createElement("div",{className:It.a.panel},Pe.a.createElement("div",{className:It.a.panelRow},Pe.a.createElement("img",{className:It.a.image,src:t[0].src,srcSet:o})),Pe.a.createElement("div",{className:It.a.panelRow+" "+It.a.download},Pe.a.createElement("div",{className:It.a.downloadFiletype},Pe.a.createElement("span",{className:It.a.downloadFiletypeIcon},"PNG"),Pe.a.createElement("span",null,I18N.preview_panel.asset_zip)),Pe.a.createElement("a",{href:n,download:!0,onClick:this.sendAnalysis("png")},Pe.a.createElement(qe.a,{name:"download"}))),Pe.a.createElement("div",{className:It.a.panelRow+" "+It.a.download},Pe.a.createElement("div",{className:It.a.downloadFiletype},Pe.a.createElement("span",{className:It.a.downloadFiletypeIcon},"PDF"),Pe.a.createElement("span",null,I18N.preview_panel.asset_pdf)),Pe.a.createElement("a",{href:r,download:!0,onClick:this.sendAnalysis("pdf")},Pe.a.createElement(qe.a,{name:"download"})))))},t}(ke.PureComponent);At.propTypes={imageSet:Ie.a.array,imageSetZip:Ie.a.string,image:Ie.a.string,id:Ie.a.number};var Dt=function(e){function t(){O(this,t);var n=_(this,e.call(this));return n.onClipboardEvent=n.onClipboardEvent.bind(n),n}return S(t,e),t.prototype.componentDidMount=function(){var e=this;this.clipboard=new kt.a(this.$copyBtn,{target:function(){return document.querySelector(e.props.target)}}),this.tooltip=Nt(this.$copyBtn).tooltip({trigger:"manual",title:function(){return e.error?"Press ⌘ or Ctrl + C to copy":I18N.preview_panel.copied}}),this.clipboard.on("success",function(t){e.error=!1,window.getSelection().removeAllRanges(),e.onClipboardEvent()}),this.clipboard.on("error",function(t){e.error=!0,e.onClipboardEvent()})},t.prototype.componentWillUnmount=function(){this.clipboard.destroy(),this.tooltip.tooltip("destroy")},t.prototype.onClipboardEvent=function(){var e=this;MB.ga("send","event","feature","使用了文字复制"),this.timer&&clearTimeout(this.timer),this.tooltip.tooltip("show"),this.timer=window.setTimeout(function(){e.tooltip.tooltip("hide")},500)},t.prototype.render=function(){var e=this;return Pe.a.createElement("span",{className:It.a.copyBtn,ref:function(t){return e.$copyBtn=t},"data-placement":"left"},I18N.copy)},t}(ke.Component);Dt.propTypes={target:Ie.a.string};var Bt=function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,o=t.activeLayerID,a=n[r];if(a)return Tt()(a.layers,function(e){return e.id===o})},Ft=Object(Le.connect)(function(e){return{layer:Bt(e)}})(Lt),Ut=n("rhFK"),Ht=n.n(Ut),qt=Ht.a["preview-panel-item"],Wt=Ht.a["preview-panel-item-header"],Kt=function(e){function t(n){j(this,t);var r=x(this,e.call(this,n));return r.toggleActive=function(){var e=r.props,t=e.isActive;(0,e.dispatch)({type:"reducer:preview-panel:update",payload:{isScreenActive:!t}})},r}return T(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,n=e.isFlexLock,r=e.screenCount;return Pe.a.createElement("div",{className:qt+" screen-panel-item "+(n?"flex-lock":"")},Pe.a.createElement("div",{className:Wt,onClick:this.toggleActive},Pe.a.createElement("p",null,I18N.preview.screen.panel,Pe.a.createElement("span",{title:I18N.preview.screen.total_page,"data-toggle":"tooltip","data-placement":"bottom"}," ("+(r>999?"999+":r)+")")),Pe.a.createElement(qe.a,{type:"fa",name:"caret-down",className:"toggle-content "+(t?"":"collapse")})),t&&Pe.a.createElement("div",{className:"divider"}),t&&Pe.a.createElement("div",{className:"panel-item-content"},Pe.a.createElement(_t,null)))},t}(ke.PureComponent);Kt.propTypes={isActive:Ie.a.bool,isFlexLock:Ie.a.bool,screenCount:Ie.a.number,dispatch:Ie.a.func};var Vt=function(e){function t(n){j(this,t);var r=x(this,e.call(this,n));return r.toggleActive=function(){var e=r.props,t=e.isActive,n=e.dispatch,o=Gt.currentProject;if(!o.limitation.inspectable){var a=o.owner_id==Gt.user.id?"user":o.team_cid?"team":"project",i="user"==a?"upgrade":"renew";return Gt.promptRenew("inspectable",{role:a,action:i,plan:o.owner_plan})}n({type:"entry:layer:set:active",payload:{isActive:!t}}),t&&Yt("打开了开发者模式")},r}return T(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,n=e.isFlexLock,r=e.currentScreenCid;return Pe.a.createElement("div",{className:qt+" layer-panel-item "+(n?"flex-lock":"")},Pe.a.createElement("div",{className:Wt},Pe.a.createElement("p",null,I18N.preview_panel.developer_mode),Pe.a.createElement(ht,{icon:"pencil",id:"switch-layer",checked:t,onChange:this.toggleActive})),t&&Pe.a.createElement("div",{className:"divider"}),t&&Pe.a.createElement("div",{key:r,className:"panel-item-content",id:"ui-layer-panel"},Pe.a.createElement(Ft,null)))},t}(ke.PureComponent);Vt.propTypes={isActive:Ie.a.bool,isFlexLock:Ie.a.bool,currentScreenCid:Ie.a.string,dispatch:Ie.a.func};var zt=function(e){function t(n){j(this,t);var r=x(this,e.call(this,n));return r.toggleActive=function(){var e=r.props,t=e.isActive;(0,e.dispatch)({type:"entry:comment:set:active",payload:{isActive:!t}}),t&&Yt("打开了评论面板")},r}return T(t,e),t.prototype.render=function(){var e=this.props,t=e.isActive,n=e.commentThreadCount;return Pe.a.createElement("div",{className:Wt},Pe.a.createElement("p",null,I18N.preview_panel.comment,Pe.a.createElement("span",{title:I18N.preview_panel.thread_sum,"data-toggle":"tooltip","data-placement":"right"}," ("+(n>999?"999+":n)+")")),Pe.a.createElement(ht,{id:"switch-comment",icon:"single-comment",checked:t,onChange:this.toggleActive}))},t}(ke.PureComponent);zt.propTypes={isActive:Ie.a.bool,commentThreadCount:Ie.a.number,dispatch:Ie.a.func};var Gt=window.MB,Yt=function(e){Gt.ga("send","event","feature",e)},Zt=Object(Le.connect)(function(e){var t=e.model,n=e.container.previewPanel;return{isActive:n.isScreenActive,isFlexLock:!n.isScreenActive&&n.isLayerActive,screenCount:Qt(t.screens,t.current.projectCid)}})(Kt),Jt=Object(Le.connect)(function(e){var t=e.model,n=e.container.previewPanel;return{isActive:n.isLayerActive,isFlexLock:!n.isLayerActive,currentScreenCid:t.current.screenCid}})(Vt),Xt=Object(Le.connect)(function(e){return{isActive:e.container.previewPanel.isCommentActive,commentThreadCount:e.model.commentThreads.length}})(zt),Qt=o(function(e,t){return e.reduce(function(e,n){return n.project_cid===t?e+1:e},0)}),$t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},en={isScreenActive:!0,isLayerActive:!1,isCommentActive:!1},tn=n("pVSp"),nn=n("Am6F"),rn=n.n(nn).a["preview-panel"],on=window,an=on.$,cn=on.MB,sn=on.I18N,un=function(e){function t(n){N(this,t);var r=M(this,e.call(this,n));return r.toggleMinimized=function(){r.setState({isMinimized:!r.state.isMinimized})},r.setElementRef=function(e){r.elementRef=e},r.elementRef=null,r.state={isMinimized:!1},r}return k(t,e),t.prototype.componentDidMount=function(){an(this.elementRef).tooltip({selector:'[data-toggle="tooltip"]',container:"body",trigger:"hover"})},t.prototype.componentDidUpdate=function(e,t){t.isMinimized!==this.state.isMinimized&&P(this.state.isMinimized)},t.prototype.render=function(){var e=this.props,t=e.dispatch,n=e.project,r=this.state.isMinimized,o=n.template;return Pe.a.createElement("div",{ref:this.setElementRef,className:rn+" "+(r?"minimized":"")},Pe.a.createElement(ln,{dispatch:t,project:n}),Pe.a.createElement("div",{className:"panel-content"},Pe.a.createElement(Zt,null),!o&&Pe.a.createElement(Jt,null)),!o&&Pe.a.createElement(Xt,null),Pe.a.createElement("div",{className:"panel-toggle-minimize "+(r?"minimized":""),onClick:this.toggleMinimized},Pe.a.createElement(qe.a,{type:"fa",name:"angle-right",className:"toggle-icon"})),Pe.a.createElement(lt,{project:n}))},t}(ke.PureComponent);un.propTypes={dispatch:Ie.a.func,project:Ie.a.object};var ln=function(e){function t(n){N(this,t);var r=M(this,e.call(this,n));return r.onOpenSharingModal=function(){cn.event("点击了分享按钮"),r.setState({isSharingModalOpen:!0})},r.onCloseSharingModal=function(){return r.setState({isSharingModalOpen:!1})},r.state={isSharingModalOpen:!1},r}return k(t,e),t.prototype.render=function(){var e=this.props,t=e.dispatch,n=e.project,r=this.state.isSharingModalOpen,o=n.name||"",a=cn.DEVICES[n.device]&&cn.DEVICES[n.device][n.model]&&cn.DEVICES[n.device][n.model].name||"";return Pe.a.createElement("div",{className:"panel-header"},Pe.a.createElement("div",{className:"info"},Pe.a.createElement("h1",{className:"project-name",title:o},o),Pe.a.createElement("span",{className:"project-device-name"},a)),!n.template&&Pe.a.createElement("div",{className:"share-button",title:sn.share,"data-toggle":"tooltip","data-placement":"left",onClick:this.onOpenSharingModal},Pe.a.createElement(qe.a,{type:"mb",name:"share",className:"share-icon"})),Pe.a.createElement(tn.a,{dispatch:t,isOpen:r,onClose:this.onCloseSharingModal,app:cn.project()}))},t}(ke.PureComponent);ln.propTypes={dispatch:Ie.a.func,project:Ie.a.object};var pn=223,fn=n("2KeS"),dn=n("HW6M"),hn=n.n(dn),mn="REQUEST_SELECT_LAYER",vn=function(e){return{type:mn,payload:{layerID:e}}},yn="SELECT_LAYER",gn=function(e){return{type:yn,payload:{layerID:e}}},bn="ACTIVATE_LAYER",wn=function(e){return MB.ga("send","event","feature","点击了 Layer 元素"),{type:bn,payload:{layerID:e}}},En="ENTER_LAYER",Cn=function(e){return{type:En,payload:{layerID:e}}},On=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_n=function(e){var t=e.layer,n=t.top,r=t.left,o=t.width,a=t.height,i=e.currentScreen,c=i.width,s=i.height,u={top:n/s*100+"%"},l={left:"calc("+(r+o)/c*100+"% - 1px)"},p={top:"calc("+(n+a)/s*100+"% - 1px)"},f={left:r/c*100+"%"};return Pe.a.createElement("ul",{className:"LayerBoundings"},Pe.a.createElement("li",{className:"LayerBounding LayerBounding--top",style:u}),Pe.a.createElement("li",{className:"LayerBounding LayerBounding--right",style:l}),Pe.a.createElement("li",{className:"LayerBounding LayerBounding--bottom",style:p}),Pe.a.createElement("li",{className:"LayerBounding LayerBounding--left",style:f}))};_n.propTypes={layer:Ie.a.object,currentScreen:Ie.a.object};var Sn=function(e,t,n){return n>e&&n<t},jn=function(e){var t=e.activeLayer,n=e.enteredLayer,r=e.currentScreen;if(!t||!n||t.id===n.id)return null;var o={horizontal:{line1:[{display:t.left,src:t.src_left},{display:t.left+t.width,src:t.src_left+t.src_width}],line2:[{display:n.left,src:n.src_left},{display:n.left+n.width,src:n.src_left+n.src_width}]},vertical:{line1:[{display:t.top,src:t.src_top},{display:t.top+t.height,src:t.src_top+t.src_height}],line2:[{display:n.top,src:n.src_top},{display:n.top+n.height,src:n.src_top+n.src_height}]}},a={horizontal:[],vertical:[]},i={horizontal:{},vertical:{}};for(var c in o)for(var s=o[c].line1,u=o[c].line2,l=0;l<s.length;l++)for(var p=0;p<u.length;p++){var f=s[l].display>u[p].display?{start:u[p],end:s[l]}:{start:s[l],end:u[p]},d=f.start,h=f.end;Sn(d.display,h.display,s[1-l].display)||Sn(d.display,h.display,u[1-p].display)||!(h.display-d.display>0)||d.display===s[0].display&&h.display===s[1].display||d.display===u[0].display&&h.display===u[1].display||i[c][d.display]||(i[c][h.display]=!0,a[c].push({start:d,end:h}))}var m=[],v=r.width,y=r.height,g=function(e,t){var n=e.left,r=e.width,o=e.top,a=e.height,i=t.width,c=t.left,s=t.top,u=n+r,l=c+i,p=o+a,f=s+t.height,d=!1,h=!1,m=!1;return n<=c&&u>=l&&o<=s&&p>=f&&(m=!0),(n>=c&&n<=l||c>=n&&c<=u)&&(d=!0),(o<=s&&p>=s||o>=s&&f>=o)&&(h=!0),{ifHorizontal:d,ifVertical:h,ifAllWraped:m}}(t,n),b=g.ifHorizontal,w=g.ifVertical,E=g.ifAllWraped;!E&&b&&b!=w&&delete a.horizontal,!E&&w&&b!=w&&delete a.vertical;for(var C in a)!function(e){m.push(a[e].map(function(n,r){var o=void 0;return o="horizontal"===e?{left:n.start.display/v*100+"%",width:(n.end.display-n.start.display)/v*100+"%",top:(t.height/2+t.top)/y*100+"%"}:{top:n.start.display/y*100+"%",height:(n.end.display-n.start.display)/y*100+"%",left:(t.width/2+t.left)/v*100+"%"},Object.assign(o,{zIndex:Math.pow(2,31)}),Pe.a.createElement("li",{key:""+e+r,className:"LayerDistance LayerDistance--"+e,"data-length":n.end.src-n.start.src,style:o},Pe.a.createElement("span",null,n.end.src-n.start.src))}))}(C);return Pe.a.createElement("ul",{className:"LayerDistances"},Array.prototype.concat.apply([],m))};jn.propTypes={activeLayer:Ie.a.object,enteredLayer:Ie.a.object,currentScreen:Ie.a.object};var xn=function(e){var t=e.activeLayer,n=e.enteredLayer,r=e.currentScreen;return Pe.a.createElement("div",{className:"MeasuresContainer"},n&&n!=t&&Pe.a.createElement(_n,{layer:n,currentScreen:r}),Pe.a.createElement(jn,{activeLayer:t,enteredLayer:n,currentScreen:r}))};xn.propTypes={activeLayer:Ie.a.object,enteredLayer:Ie.a.object,currentScreen:Ie.a.object};var Tn=function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,o=t.activeLayerID,a=t.enteredLayerID,i=e.model,c=i.current.screenCid,s=i.screens,u=n[r];return u?{activeLayer:Tt()(u.layers,function(e){return e.id===o}),enteredLayer:Tt()(u.layers,function(e){return e.id===a}),currentScreen:s.find(function(e){return e.cid===c})}:{activeLayer:{},enteredLayer:{},currentScreen:{}}},Nn=Object(Le.connect)(function(e){return On({},Tn(e))})(xn),Mn=function(e){function t(){R(this,t);var n=I(this,e.call(this));return n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return L(t,e),t.prototype.onMouseEnter=function(e){-1!==this.props.activeLayerID&&this.props.enterLayer(this.props.layer.id)},t.prototype.onMouseLeave=function(e){-1!==this.props.activeLayerID&&this.props.enterLayer(-1)},t.prototype.render=function(){var e=this.props,t=e.layer,n=e.requestSelectLayer,r=e.activeLayerID,o=e.enteredLayerID,a=e.currentScreen,i=t.id,c=t.kind,s=t.width,u=t.height,l=t.top,p=t.left,f=t.src_width,d=t.src_height,h=a.width,m=a.height,v=Math.pow(2,31)-parseInt(s*u),y={width:s/h*100+"%",height:u/m*100+"%",top:l/m*100+"%",left:p/h*100+"%",zIndex:"group"===c?v-1:v},g=i===r,b=i===o||-1===o,w=hn()("Layer",{"is-active":g,"is-focus":b});return Pe.a.createElement("div",{className:w,style:y,"data-width":f,"data-height":d,onClick:function(e){n(i)},onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},g&&Pe.a.createElement("span",{className:"LayerCorner left top"}),g&&Pe.a.createElement("span",{className:"LayerCorner left bottom"}),g&&Pe.a.createElement("span",{className:"LayerCorner right top"}),g&&Pe.a.createElement("span",{className:"LayerCorner right bottom"}))},t}(ke.Component);Mn.propTypes={layer:Ie.a.object,requestSelectLayer:Ie.a.func,enterLayer:Ie.a.func,currentScreen:Ie.a.object,activeLayerID:Ie.a.oneOfType([Ie.a.number,Ie.a.string]),enteredLayerID:Ie.a.oneOfType([Ie.a.number,Ie.a.string])};var kn=function(e){function t(){R(this,t);var n=I(this,e.call(this));return n.onMouseLeave=n.onMouseLeave.bind(n),n}return L(t,e),t.prototype.onMouseLeave=function(e){this.props.enterLayer(this.props.currentScreen.cid)},t.prototype.render=function(){var e=this.props,t=e.layers,n=e.requestSelectLayer,r=e.enterLayer,o=e.activeLayerID,a=e.enteredLayerID,i=e.currentScreen;return Pe.a.createElement("div",null,Pe.a.createElement("ul",{className:"LayerList",onMouseLeave:this.onMouseLeave},t.map(function(e){return Pe.a.createElement("li",{key:e.id},Pe.a.createElement(Mn,{layer:e,requestSelectLayer:n,enterLayer:r,activeLayerID:o,enteredLayerID:a,currentScreen:i}))})),-1!==o&&Pe.a.createElement(Nn,null))},t}(ke.Component);kn.propTypes={layers:Ie.a.array,requestSelectLayer:Ie.a.func,enterLayer:Ie.a.func,currentScreen:Ie.a.object,activeLayerID:Ie.a.oneOfType([Ie.a.number,Ie.a.string]),enteredLayerID:Ie.a.oneOfType([Ie.a.number,Ie.a.string])};var Pn=Object(Le.connect)(function(e){var t=e.container.layers,n=t.resourceByScreen,r=t.visibilityScreenID,o=t.activeLayerID,a=t.enteredLayerID,i=e.model,c=i.current.screenCid,s=i.screens.find(function(e){return e.cid===c});return{layers:n[r]?n[r].layers:[],currentScreen:s,activeLayerID:o,enteredLayerID:a}},function(e){return{requestSelectLayer:function(t){e(vn(t))},enterLayer:function(t){e(Cn(t))}}})(kn),Rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},In="SET_VISIBILITY_SCREEN",Ln="RECEIVE_RESOURCE_SUCCESS",An=function(e,t){return{type:Ln,payload:Rn({screenID:e},t)}},Dn="RECEIVE_RESOURCE_ERROR",Bn=function(e,t){return{type:Dn,payload:{screenID:e,error:t}}},Fn={selectedLayerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1];switch(t.type){case yn:return t.payload.layerID===e?-1:t.payload.layerID;case In:return-1;default:return e}},activeLayerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1];switch(t.type){case bn:return t.payload.layerID;case In:return-1;default:return e}},enteredLayerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments[1];switch(t.type){case En:return t.payload.layerID;default:return e}}},Un=(n("nvBK"),{actions:{activateLayer:wn},container:Pn,reducer:Fn}),Hn=function(e){var t=e.children;return Pe.a.createElement("div",null,t)};Hn.propTypes={children:Ie.a.element};var qn=Hn,Wn=function(e){function t(){return A(this,t),D(this,e.call(this))}return B(t,e),t.prototype.render=function(){var e=this.props,t=e.isFetching,n=e.error;return e.isActive?t?null:n?null:Pe.a.createElement(qn,null,Pe.a.createElement(Un.container,null)):null},t}(Pe.a.Component);Wn.propTypes={isFetching:Ie.a.bool,error:Ie.a.string,isActive:Ie.a.bool};var Kn=Wn,Vn=Object(Le.connect)(function(e){var t=e.container,n=t.previewPanel.isLayerActive,r=t.layers,o=r.resourceByScreen[r.visibilityScreenID]||{},a=o.isFetching,i=void 0===a||a,c=o.screen,s=void 0===c?{}:c,u=o.error;return{isFetching:i,screen:s,error:void 0===u?"":u,isActive:n}})(Kn),zn={"-1":{isFetching:!1,layers:[],error:""}},Gn={visibilityScreenID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments[1];switch(t.type){case In:return t.payload.screenID;default:return e}},resourceByScreen:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn,n=arguments[1];switch(n.type){case Ln:case Dn:return Object.assign({},t,(e={},e[n.payload.screenID]=F(t[n.payload],n),e));case"container:layers:clear":return zn;default:return t}}},Yn=(n("RVGU"),n("VFQT")),Zn=n.n(Yn),Jn=n("egdi"),Xn=n("vLgD"),Qn=function(e){return Object(Xn.a)("/apis/sketch/artboards/"+e+".json")},$n=regeneratorRuntime.mark(U),er=regeneratorRuntime.mark(H),tr=regeneratorRuntime.mark(q),nr=regeneratorRuntime.mark(W),rr=regeneratorRuntime.mark(K),or=[],ar=function(e){var t=e.filter(function(e){var t=e.top,n=e.left;return 0!==t&&0!==n});return 0===t.length?Zn()(e):Zn()(t)},ir=function(e){var t={};return e.text&&(t.text_styles=[{font_size:e.fs,color:Object(Pt.b)(e.tc),length:e.text.length}]),t.alignment=e.ha,t.line_height=e.lh,t.bd_radius=e.br,e.bg&&(t.bg_colors=[{value:e.bg}]),Object.assign({},e,t)},cr=function(e){return"w"===e[0]},sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ur=Object(fn.combineReducers)(sr({},Gn,Un.reducer)),lr=n("AxSz"),pr=n("wB9c"),fr=n("0L5u"),dr=n.n(fr),hr=dr.a["editable-span"],mr=dr.a["reply-textarea"],vr=function(e){function t(n){V(this,t);var r=z(this,e.call(this,n));return r.toggleEditing=function(e){void 0===e&&(e=!r.state.isEditing),r.setState({isEditing:e,editingValue:r.props.getValue()}),e&&setTimeout(r.focusTextarea,0)},r.startEditing=function(){return r.toggleEditing(!0)},r.onEditUpdate=function(e){return r.setState({editingValue:e.target.value})},r.onEditKeyPress=function(e){return gr(e)&&(!r.props.isMultiLine||!e.shiftKey)&&r.onEditFinish()},r.onEditFinish=function(){var e=r.state.editingValue.trim();e!==(r.props.getValue()||"")&&r.props.onValueChange(e),r.toggleEditing(!1)},r.focusTextarea=function(){if(r.elementRef){r.elementRef.focus&&r.elementRef.focus();var e=r.elementRef.value.length;r.elementRef.setSelectionRange(e,e),r.elementRef.scrollTop=r.elementRef.scrollHeight-r.elementRef.offsetHeight}},r.setElementRef=function(e){r.elementRef=e},r.elementRef=null,r.state={isEditing:!1,editingValue:""},n.initEditing&&setTimeout(r.startEditing,50),r}return G(t,e),t.prototype.render=function(){var e=this.props,t=e.placeholder,n=e.isEditLocked,r=e.getValue,o=this.state,a=o.isEditing,i=o.editingValue,c=r()||"";return n?Pe.a.createElement("span",{className:hr+" span"},c):a?Pe.a.createElement("textarea",{ref:this.setElementRef,className:hr+" textarea",value:i,placeholder:t||"",onChange:this.onEditUpdate,onKeyDown:this.onEditKeyPress,onBlur:this.onEditFinish}):Pe.a.createElement("span",{className:hr+" span",onDoubleClick:this.startEditing},c)},t}(ke.PureComponent);vr.propTypes={onValueChange:Ie.a.func,getValue:Ie.a.func,placeholder:Ie.a.string,isMultiLine:Ie.a.bool,initEditing:Ie.a.bool,isEditLocked:Ie.a.bool};var yr=function(e){function t(n){V(this,t);var r=z(this,e.call(this,n));return r.onEditUpdate=function(e){return!r.props.isEditLocked&&r.setState({editingValue:e.target.value})},r.onEditKeyPress=function(e){return gr(e)&&(!r.props.isMultiLine||!e.shiftKey)&&r.onEditFinish(e)},r.onEditFinish=De(function(){var e=r.getEditingValue();e&&r.props.onValueChange(e),r.setState({editingValue:""})}),r.getEditingValue=function(){return(r.state.editingValue||"").trim()},r.focus=function(){return r.elementRef&&r.elementRef.focus()},r.setElementRef=function(e){r.elementRef=e},r.elementRef=null,r.state={editingValue:""},r}return G(t,e),t.prototype.componentDidUpdate=function(){if(this.props.isAutoHeight&&this.elementRef){this.elementRef.style.height="auto";var e=Math.max(this.elementRef.scrollHeight+2,this.elementRef.offsetHeight);this.elementRef.style.height=e+"px"}},t.prototype.render=function(){var e=this.props.placeholder,t=void 0===e?"":e,n=this.state.editingValue;return Pe.a.createElement("textarea",{ref:this.setElementRef,className:mr,value:n,placeholder:t,rows:1,onChange:this.onEditUpdate,onKeyDown:this.onEditKeyPress})},t}(ke.PureComponent);yr.propTypes={onValueChange:Ie.a.func,placeholder:Ie.a.string,isMultiLine:Ie.a.bool,isEditLocked:Ie.a.bool,isAutoHeight:Ie.a.bool};var gr=function(e){return"Enter"===e.key||13===e.which||13===e.keyCode},br=[0,1,2,3,4,5,6,7].map(function(e){return{create:!!(1&e),update:!!(2&e),delete:!!(4&e)}}),wr={owner:!0,admin:!0,editor:!0,viewer:!0},Er={owner:!0,admin:!0},Cr={allowComment:!1,denyMessage:""},Or=function(){return Cr},_r=function(e){var t=e.allowComment,n=e.denyMessage;return Object.assign(Cr,{allowComment:t,denyMessage:n})},Sr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INVALID_ID_0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"INVALID_ID_1",r=Cr.allowComment&&wr[e]||!1,o=Cr.allowComment&&r&&t===n,a=Cr.allowComment&&(o||Er[e]||!1);return br[(r?1:0)+(o?2:0)+(a?4:0)]},jr=n("K09U"),xr=n.n(jr),Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nr=xr.a.comment,Mr=function(e){function t(n){Y(this,t);var r=Z(this,e.call(this,n));return r.toggleFolded=function(){r.setState({isFolded:!r.state.isFolded})},r.toggleEditing=function(){return r.editableSpanComponent&&r.editableSpanComponent.toggleEditing()},r.doUpdateComment=function(e){return r.props.commentOperations.doUpdateComment(Tr({},r.props.comment,{message:e}))},r.doDeleteComment=function(){return r.props.commentOperations.doDeleteComment(r.props.comment)},r.getCommentMessage=function(){return r.props.comment.message},r.setEditableSpanComponent=function(e){return r.editableSpanComponent=e},r.editableSpanComponent=null,r.state={isFolded:r.props.comment.message.length>120||!1},r}return J(t,e),t.prototype.renderCommentUpper=function(e){var t=this.props,n=t.comment,r=t.collaborator;return Pe.a.createElement("div",{className:"comment-upper"},e&&Pe.a.createElement("span",{className:"index"},"#"+e),r&&Pe.a.createElement("img",{className:"avatar",width:24,height:24,src:r.avatar}),r&&Pe.a.createElement("span",{className:"name"},r.name),Pe.a.createElement("span",{className:"time"},lr.a.L10N.parseTimeAgo(1e3*n.created_at)))},t.prototype.renderCommentMiddle=function(){var e=this.props,t=e.comment,n=e.permission,r=this.state.isFolded;return Pe.a.createElement("div",{className:"comment-content "+(r?"folded":"")},Pe.a.createElement(vr,{ref:this.setEditableSpanComponent,onValueChange:this.doUpdateComment,getValue:this.getCommentMessage,placeholder:lr.a.I18N.preview.comment.comment_placeholder,isEditLocked:!n.update,isMultiLine:!0}),t.updated_at!==t.created_at&&Pe.a.createElement("span",{className:"edited"},lr.a.I18N.preview.comment.tag_edited))},t.prototype.renderCommentLower=function(){var e=this.props.permission,t=this.state.isFolded;return t||e.update||e.delete?Pe.a.createElement("div",{className:"comment-lower"},t&&Pe.a.createElement("span",{className:"modify",onClick:this.toggleFolded},lr.a.I18N.preview.comment.unfold),t&&Pe.a.createElement("span",{className:"dot"}),e.update&&Pe.a.createElement("span",{className:"modify",onClick:this.toggleEditing},lr.a.I18N.preview.comment.modify_edit),e.update&&Pe.a.createElement("span",{className:"dot"}),e.delete&&Pe.a.createElement("span",{className:"modify",onClick:this.doDeleteComment},lr.a.I18N.preview.comment.modify_delete)):null},t.prototype.render=function(){return null},t}(ke.PureComponent);Mr.propTypes={comment:Ie.a.object,permission:Ie.a.object,collaborator:Ie.a.object,commentMarkerIndex:Ie.a.number,commentOperations:Ie.a.object};var kr=function(e){function t(){return Y(this,t),Z(this,e.apply(this,arguments))}return J(t,e),t.prototype.render=function(){var e=this.props.commentMarkerIndex;return Pe.a.createElement("div",{className:Nr+" thread-initial",onClick:this.toggleSelect},this.renderCommentUpper(e),this.renderCommentMiddle(),this.renderCommentLower())},t}(Mr),Pr=function(e){function t(){return Y(this,t),Z(this,e.apply(this,arguments))}return J(t,e),t.prototype.render=function(){return Pe.a.createElement("div",{className:Nr+" user-initial",onClick:this.toggleSelect},this.renderCommentUpper(null),this.renderCommentMiddle(),this.renderCommentLower())},t}(Mr),Rr=function(e){function t(){return Y(this,t),Z(this,e.apply(this,arguments))}return J(t,e),t.prototype.render=function(){return Pe.a.createElement("div",{className:Nr+" appending",onClick:this.toggleSelect},this.renderCommentMiddle(),this.renderCommentLower())},t}(Mr),Ir=function(e){function t(n){Y(this,t);var r=Z(this,e.call(this,n));return r.toggleSelect=function(){return r.props.commentOperations.toggleSelectCommentThread(r.props.commentThreadCid)},r.doDeleteThread=function(){return r.props.commentOperations.doDeleteCommentThread(r.props.commentThreadCid)},r}return J(t,e),t.prototype.render=function(){var e=this.props,t=e.commentMarkerIndex,n=e.unreadCount,r=e.commentCount,o=e.isFocus,a=e.comment,i=e.permission,c=e.collaborator;return Pe.a.createElement("div",{className:Nr+" thread-initial entry "+(o?"focus":""),onClick:this.toggleSelect},Pe.a.createElement("div",{className:"comment-upper"},Pe.a.createElement("span",{className:"index "+(n>0?"isUnread":"")},"#"+t),c&&Pe.a.createElement("img",{className:"avatar",width:24,height:24,src:c.avatar}),c&&Pe.a.createElement("span",{className:"name"},c.name),a&&Pe.a.createElement("span",{className:"time"},lr.a.L10N.parseTimeAgo(1e3*a.created_at))),a&&Pe.a.createElement("div",{className:"comment-content"},Pe.a.createElement("span",{className:"entry"},a.message)),Pe.a.createElement("div",{className:"comment-lower"},Pe.a.createElement("span",{className:"reply-count"},r<=1?lr.a.I18N.preview.comment.reply_none:""+(r-1)+lr.a.I18N.preview.comment.reply),n>0&&Pe.a.createElement("span",{className:"new"},n===r?lr.a.I18N.preview.comment.reply_new_thread:""+n+lr.a.I18N.preview.comment.reply_new),i.delete&&Pe.a.createElement("span",{className:"dot"}),i.delete&&Pe.a.createElement("span",{className:"modify",onClick:this.doDeleteThread},lr.a.I18N.preview.comment.modify_delete)))},t}(ke.PureComponent);Ir.propTypes={unreadCount:Ie.a.number,commentCount:Ie.a.number,isFocus:Ie.a.bool,comment:Ie.a.object,permission:Ie.a.object,collaborator:Ie.a.object,commentMarkerIndex:Ie.a.number,commentThreadCid:Ie.a.string,commentOperations:Ie.a.object};var Lr=n("AA2F"),Ar=n.n(Lr).a["comment-thread"],Dr=function(e){function t(n){X(this,t);var r=Q(this,e.call(this,n));return r.setScrollRef=function(e){r.scrollRef=e},r.scrollRef=null,r}return ee(t,e),t.prototype.renderEntry=function(e,t,n,r,o,a,i){var c=n[0]||null,s=c&&i.getCollaborator(c.user_id);return Pe.a.createElement(Ir,{key:t,commentMarkerIndex:t,unreadCount:o,commentCount:n.length,isFocus:r,comment:c,commentThreadCid:e,collaborator:s,permission:a,commentOperations:i})},t.prototype.render=function(){var e=this,t=this.props,n=t.commentOperations,r=t.commentThreadList,o=t.commentListMap,a=t.commentContainer,i=t.unreadCountThreadMap;if(!r.length)return n.renderEmptyCommentList();var c=a.focus||a.select;return Pe.a.createElement("div",{ref:this.setScrollRef,className:Ar},r.map(function(t,r){var a=t.cid,s=t.user_id;return e.renderEntry(a,r+1,o[a]||[],c===a,i[a]||0,n.getPermission(s),n)}))},t}(ke.PureComponent);Dr.propTypes={commentOperations:Ie.a.object,commentThreadList:Ie.a.array,commentListMap:Ie.a.object,commentContainer:Ie.a.object,unreadCountThreadMap:Ie.a.object};var Br=function(e){function t(n){X(this,t);var r=Q(this,e.call(this,n));r.doShowAll=function(){r.setState({isShowAll:!0})};var o=r.calcFoldDivider(),a=o.foldCount,i=o.newDividerIndex;return r.foldCount=a,r.newDividerIndex=i,r.setScrollRef=function(e){r.scrollRef=e},r.scrollRef=null,r.state={isShowAll:!1},r}return ee(t,e),t.prototype.calcFoldDivider=function(){for(var e=this.props,t=e.commentList,n=e.unreadCommentMap,r=0,o=1/0,a=t.length-1;a>=0&&n[t[a].cid];)o=a,a--;if(0===o&&(o=1),o>4)for(var i=1;i<=t.length-3&&!n[t[i].cid];)r++,i++;return{newDividerIndex:o,foldCount:r}},t.prototype.tickReadComment=function(){var e=this.props,t=e.commentList,n=e.unreadCommentMap,r=e.commentOperations.setReadComment,o=!1;t.forEach(function(e){n[e.cid]&&(r(e.cid),o=!0)}),o||(this.newDividerIndex=1/0)},t.prototype.getCommentReducer=function(e,t){var n=this,r=this.state.isShowAll,o=1+this.foldCount-1,a=null;return function(i,c,s){if(!r&&s>=1&&s<=o)s===o&&i.push(Fr(n.doShowAll,n.foldCount));else{1===s&&i.push(Ur()),s===n.newDividerIndex&&i.push(Hr());var u=0===s,l=!u&&a!==c.user_id;l&&(a=c.user_id);var p=u?kr:l?Pr:Rr;i.push(Pe.a.createElement(p,{key:c.cid,comment:c,permission:t.getPermission(c.user_id),collaborator:t.getCollaborator(c.user_id),commentMarkerIndex:e,commentOperations:t}))}return i}},t.prototype.componentDidMount=function(){this.tickReadComment()},t.prototype.componentDidUpdate=function(){this.tickReadComment()},t.prototype.render=function(){var e=this.props,t=e.commentOperations,n=e.commentMarkerIndex,r=e.commentList;return r.length?Pe.a.createElement("div",{ref:this.setScrollRef,className:Ar},r.reduce(this.getCommentReducer(n,t),[])):t.renderEmptyCommentList()},t}(ke.PureComponent);Br.propTypes={commentOperations:Ie.a.object,commentMarkerIndex:Ie.a.number,commentList:Ie.a.array,unreadCommentMap:Ie.a.object};var Fr=function(e,t){return Pe.a.createElement("div",{key:"expand",className:"expand"},Pe.a.createElement("button",{onClick:e},lr.a.I18N.preview.comment.show_all_0,t,lr.a.I18N.preview.comment.show_all_1))},Ur=function(){return Pe.a.createElement("div",{key:"divider-line",className:"divider-line"})},Hr=function(){return Pe.a.createElement("div",{key:"divider-new-comment",className:"divider-new-comment"},Pe.a.createElement("div",null),Pe.a.createElement("span",null,lr.a.I18N.preview.comment.divider_new),Pe.a.createElement("div",null))},qr=n("ucRi"),Wr=n.n(qr),Kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vr=Wr.a["comment-panel"],zr=function(e){function t(n){var r=this;ne(this,t);var o=re(this,e.call(this,n));return o.doReply=function(e){o.replyTextareaRef&&o.replyTextareaRef.onEditFinish(e)},o.doCreateThread=function(e){e&&(o.props.dispatch({type:"entry:comment-threads:add",payload:{top:0,left:0,message:e}}),o.contentListRef&&Zr(o.contentListRef.scrollRef))},o.doCreateComment=function(e){var t=o.props,n=t.selectCommentThread,r=t.dispatch;e&&n&&(r({type:"entry:comments:add",payload:{thread_cid:n.cid,message:e}}),o.contentListRef&&Zr(o.contentListRef.scrollRef))},o.cancelSelect=function(){o.props.dispatch({type:"container:comment:select",payload:{select:null}})},o.commentOperations={getPermission:function(e){return Sr(o.props.currentState.userRole,o.props.userId,e)},getCollaborator:function(e){var t=o.props,n=t.collaboratorsState,r=t.currentState,a=r.projectCid,i=r.teamCid;return Gr(n,a,i)[e]},toggleSelectCommentThread:function(e){var t=o.props,n=t.commentContainer;(0,t.dispatch)({type:"container:comment:select",payload:{select:n.select===e?null:e}})},setReadComment:function(e){var t=o.props,n=t.currentState.screenCid,r=t.commentContainer.select;(0,t.dispatch)({type:"unread-comment:set-read",payload:{commentCid:e,threadCid:r,screenCid:n}})},doDeleteCommentThread:function(){var e=te(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pr.b)({title:lr.a.I18N.preview.comment.thread_delete_confirm});case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:o.props.dispatch({type:"entry:comment-threads:delete",payload:{cid:t}});case 5:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),doUpdateComment:function(e){return o.props.dispatch({type:"entry:comments:update",payload:e})},doDeleteComment:function(){var e=te(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(pr.b)({title:lr.a.I18N.preview.comment.comment_delete_confirm});case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}e.t0=o.props.dispatch({type:"comments:delete",payload:t});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}(),renderEmptyCommentList:function(){return Jr("not_signin"===o.getUserStatus(),Boolean(o.props.selectCommentThread))}},o.setPanelRef=function(e){o.panelRef=e},o.panelRef=null,o.setContentListRef=function(e){o.contentListRef=e},o.contentListRef=null,o.setReplyTextareaRef=function(e){o.replyTextareaRef=e},o.replyTextareaRef=null,o.panelPositionEventListeners=ae(function(){return o.panelRef},function(e){return o.props.setPanelPosition(e)}),o}return oe(t,e),t.prototype.getUserStatus=function(){var e=this.props,t=e.userId,n=e.currentState;return t?"guest"===n.userRole?"not_collaborator":"collaborator":"not_signin"},t.prototype.renderCommentThreadDetail=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props,n=t.commentThreadList,r=t.commentContainer,o=t.unreadCommentState.unreadCommentMap,a=1+n.findIndex(function(e){return e.cid===r.select});return Pe.a.createElement(Br,{ref:this.setContentListRef,commentList:e,unreadCommentMap:o,commentMarkerIndex:a,commentOperations:this.commentOperations})},t.prototype.renderCommentThreadEntry=function(){var e=this.props,t=e.commentThreadList,n=e.commentListMap,r=e.commentContainer,o=e.unreadCommentState.unreadCountThreadMap;return Pe.a.createElement(Dr,{ref:this.setContentListRef,commentContainer:r,commentThreadList:t,commentListMap:n,unreadCountThreadMap:o,commentOperations:this.commentOperations})},t.prototype.renderContentReply=function(e,t){if(!Or().allowComment)return null;var n=this.getUserStatus();return Pe.a.createElement("div",{className:"content-reply"},"collaborator"===n&&Pe.a.createElement(yr,{ref:this.setReplyTextareaRef,onValueChange:e?this.doCreateComment:this.doCreateThread,placeholder:lr.a.I18N.preview.comment.comment_placeholder,isMultiLine:!0,isAutoHeight:!0}),"collaborator"===n&&Pe.a.createElement("button",{onClick:this.doReply},e?-1===t?lr.a.I18N.preview.comment.comment_create_initial:lr.a.I18N.preview.comment.comment_create:lr.a.I18N.preview.comment.thread_create),"not_signin"===n&&Pe.a.createElement("button",{onClick:Yr},lr.a.I18N.preview.comment.tip_signin),"not_collaborator"===n&&Pe.a.createElement("span",null,lr.a.I18N.preview.comment.tip_not_collaborator))},t.prototype.componentDidMount=function(){var e=this;this.props.dispatch({type:"entry:unread-comment:init"}),setTimeout(function(){return e.replyTextareaRef&&e.replyTextareaRef.focus()},500)},t.prototype.componentDidUpdate=function(){var e=this;setTimeout(function(){return e.replyTextareaRef&&e.replyTextareaRef.focus()},500)},t.prototype.render=function(){var e=this.props,t=e.commentThreadList,n=e.commentListMap,r=e.selectCommentThread,o=r&&n[r.cid],a=o?o.length-1:-1,i=r?a>=1?""+a+lr.a.I18N.preview.comment.reply:0===a?lr.a.I18N.preview.comment.reply_none:lr.a.I18N.preview.comment.comment_create_initial_title:t.length?""+t.length+lr.a.I18N.preview.comment.panel:lr.a.I18N.preview.comment.thread_none;return Pe.a.createElement("div",{ref:this.setPanelRef,className:Vr,id:"ui-comment-panel"},Pe.a.createElement("div",Kr({className:"panel-upper"},this.panelPositionEventListeners),r&&Pe.a.createElement("button",{className:"button-left",onClick:this.cancelSelect},Pe.a.createElement(qe.a,{className:"back-icon",name:"angle-right"})),Pe.a.createElement("p",{className:"title-text"},i)),Pe.a.createElement("div",{className:"panel-content"},r?this.renderCommentThreadDetail(o):this.renderCommentThreadEntry(),this.renderContentReply(r,a)))},t}(Pe.a.PureComponent);zr.propTypes={commentContainer:Ie.a.object,collaboratorsState:Ie.a.array,unreadCommentState:Ie.a.object,currentState:Ie.a.object,commentThreadList:Ie.a.array,commentListMap:Ie.a.object,selectCommentThread:Ie.a.object,userId:Ie.a.number,setPanelPosition:Ie.a.func,dispatch:Ie.a.func};var Gr=o(function(e,t,n){return e.reduce(function(e,r){return r.project_cid!==t&&r.team_cid!==n||(e[r.user_id]=r),e},{})}),Yr=function(){window.location.href="/signin?next="+window.location.pathname},Zr=function(e){return e&&setTimeout(function(){return e.scrollTop=e.scrollHeight-e.offsetHeight},100)},Jr=function(e,t){return Pe.a.createElement("div",{className:"content-empty"},Pe.a.createElement("span",null,Or().allowComment?e?lr.a.I18N.preview.comment.thread_none_tip_signin:t?lr.a.I18N.preview.comment.reply_none_tip:lr.a.I18N.preview.comment.thread_none_tip:Or().denyMessage))},Xr=n("OUfH"),Qr=n.n(Xr),$r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eo=Qr.a["comment-layer"],to={left:"",right:"287px",top:"",bottom:"40px"},no=function(e){function t(n){ie(this,t);var r=ce(this,e.call(this,n));return r.setPanelPosition=function(e){if(r.divElement){var t=ue(r.divElement.getBoundingClientRect(),e);r.setState({fixedPanelStyle:t})}},r.setElementRef=function(e){return r.divElement=e},r.divElement=null,r.state={fixedPanelStyle:to},r}return se(t,e),t.prototype.render=function(){if(!this.props.isActive)return null;var e=this.state.fixedPanelStyle;return Pe.a.createElement("div",{ref:this.setElementRef,className:eo},Pe.a.createElement("div",{className:"float-panel",style:e},Pe.a.createElement(zr,$r({setPanelPosition:this.setPanelPosition},this.props))))},t}(ke.PureComponent);no.propTypes=$r({},zr.propTypes,{isActive:Ie.a.bool,commentThreadList:Ie.a.array,commentListMap:Ie.a.object,selectCommentThread:Ie.a.object});var ro=n("6JlN"),oo=n.n(ro),ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},io=oo.a["comment-marker"],co=function(e){function t(n){le(this,t);var r=pe(this,e.call(this,n)),o={isDragging:!1,position:{left:0,top:0}},a=ao({},uo,{mousemove:De(function(e){var t=r.props,n=t.offsetLeft,o=t.offsetTop,a=(0,t.markerOperations.getMarkerPosition)(e);(r.state.isDragging||de(n,o,a))&&r.setState({isDragging:!0,position:a})}),mouseup:De(function(e){if(c(),r.state.isDragging){var t=r.props,n=t.commentThreadCid,a=t.markerOperations,i=a.doUpdateCommentThread,s=(0,a.getMarkerPosition)(e);i({cid:n,left:s.left,top:s.top})}else setTimeout(function(){var e=r.props,t=e.isSelect,n=e.commentThreadCid;(0,e.markerOperations.setSelectCommentThreadCid)(t?null:n)},0);r.setState(o)}),mouseleave:function(){c(),r.props.markerOperations.setFocusCommentThreadCid(null),r.setState(o)}}),i=ao({},uo,{mouseup:a.mouseup}),c=function(){return r.props.markerOperations.removeContainerEventListener(r.props.isEditable?a:i)};return r.markerListenerMap={onMouseDown:De(function(){return r.props.markerOperations.addContainerEventListener(r.props.isEditable?a:i)}),onMouseEnter:De(function(){return r.props.markerOperations.setFocusCommentThreadCid(r.props.commentThreadCid)}),onMouseLeave:De(function(){return r.props.markerOperations.setFocusCommentThreadCid(null)}),onMouseUp:so,onDoubleClick:so,onClick:so},r.isFocused=!1,r.setElementRef=function(e){return r.elementRef=e},r.elementRef=null,r.state=o,r}return fe(t,e),t.prototype.componentDidUpdate=function(){var e=this.props,t=e.isFocus,n=e.markerOperations.doFocusAtElement;t&&!this.isFocused&&n(this.elementRef),this.isFocused=t},t.prototype.render=function(){var e=this.props,t=e.offsetLeft,n=e.offsetTop,r=e.isFocus,o=e.isFade,a=e.commentMarkerIndex,i=this.state,c=i.isDragging,s=i.position,u=r?"focus":!r&&o?"fade":"",l=c?s:{left:t+"px",top:n+"px"};return Pe.a.createElement("div",{className:io+" "+u,style:l},Pe.a.createElement("span",ao({ref:this.setElementRef,tabIndex:a},this.markerListenerMap),a))},t}(ke.PureComponent);co.propTypes={commentMarkerIndex:Ie.a.number,commentThreadCid:Ie.a.string,offsetLeft:Ie.a.number,offsetTop:Ie.a.number,isEditable:Ie.a.bool,isSelect:Ie.a.bool,isFocus:Ie.a.bool,isFade:Ie.a.bool,markerOperations:Ie.a.object};var so=De(),uo={mouseup:so,mousedown:so,mousemove:so,mouseleave:so,mouseout:so,click:so,dblclick:so},lo=225,po=20,fo=function(e){function t(n){he(this,t);var r=me(this,e.call(this,n));return r.addCommentThreadListener=De(function(e){var t=r.props,n=t.getContentElement,o=t.isActive,a=t.currentUserRole,i=t.dispatch;o&&Sr(a).create&&ho(e,n().getBoundingClientRect())&&i({type:"entry:comment-threads:add",payload:r.markerOperations.getMarkerPosition(e)})}),r.markerOperations={addContainerEventListener:function(e){for(var t in e)r.props.getContentElement().addEventListener(t,e[t])},removeContainerEventListener:function(e){for(var t in e)r.props.getContentElement().removeEventListener(t,e[t])},setFocusCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r.props.dispatch({type:"container:comment:focus",payload:{focus:e}})},setSelectCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return r.props.dispatch({type:"container:comment:select",payload:{select:e}})},doUpdateCommentThread:function(e){var t=e.cid,n=e.top,o=e.left;return r.props.dispatch({type:"entry:comment-threads:update",payload:{cid:t,top:n,left:o}})},doFocusAtElement:function(e){return r.props.dispatch({type:"entry:focus-element",payload:{focusType:"external",element:e}})},getMarkerPosition:function(e){var t=r.props.queryCurrentScreenContainerElement().getBoundingClientRect(),n=r.props.getContentElement().getBoundingClientRect();return{left:He(e.clientX,n.left+po,n.right-po)-t.left,top:He(e.clientY,n.top+po,n.bottom-po)-t.top}}},r}return ve(t,e),t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.isActive,r=t.getContentElement;n!==e.isActive&&r()&&(n?r().addEventListener("dblclick",this.addCommentThreadListener):r().removeEventListener("dblclick",this.addCommentThreadListener))},t.prototype.componentWillUnmount=function(){var e=this.props.getContentElement;e()&&e().removeEventListener("dblclick",this.addCommentThreadListener)},t.prototype.render=function(){var e=this;if(!this.props.isActive)return null;var t=this.props,n=t.commentContainer,r=n.select,o=n.focus,a=t.scale,i=t.commentThreadList,c=t.userId,s=t.currentUserRole;return Pe.a.createElement("div",null,i.map(function(t,n){var i=t.cid,u=t.left,l=t.top,p=t.user_id,f=r===i,d=f||o===i,h=r&&!f||o&&!d;return Pe.a.createElement(co,{key:i,commentMarkerIndex:n+1,commentThreadCid:i,offsetLeft:u*a,offsetTop:l*a,isEditable:Sr(s,c,p).update,isSelect:f,isFocus:d,isFade:h,markerOperations:e.markerOperations})}))},t}(ke.PureComponent);fo.propTypes={getContentElement:Ie.a.func.isRequired,scale:Ie.a.number,queryCurrentScreenContainerElement:Ie.a.func.isRequired,isActive:Ie.a.bool,commentContainer:Ie.a.object,commentThreadList:Ie.a.array,userId:Ie.a.number,currentUserRole:Ie.a.string,dispatch:Ie.a.func};var ho=function(e,t){var n=t.left,r=t.top,o=t.width,a=t.height;return n<=e.clientX&&r<=e.clientY&&n+o>=e.clientX&&r+a>=e.clientY},mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vo={focus:null,select:null},yo=Object(Le.connect)(function(e){var t=e.model,n=t.commentThreads,r=t.comments,o=t.user,a=t.current,i=t.collaborators,c=t.unreadComment,s=e.container;return{commentContainer:s.comment,currentState:a,collaboratorsState:i,unreadCommentState:c,isActive:s.previewPanel.isCommentActive,commentThreadList:bo(n,a.screenCid),selectCommentThread:wo(n,a.screenCid,s.comment.select),commentListMap:Eo(r),userId:o.id}})(no),go=Object(Le.connect)(function(e){var t=e.model,n=t.current,r=t.user,o=t.commentThreads,a=e.container;return{queryCurrentScreenContainerElement:Co(n.screenCid),isActive:a.previewPanel.isCommentActive,commentContainer:a.comment,commentThreadList:bo(o,n.screenCid),currentUserRole:n.userRole,userId:r.id}})(fo),bo=o(function(e,t){return e.filter(function(e){return e.screen_cid===t})}),wo=o(function(e,t,n){return n&&e.find(function(e){return e.cid===n&&e.screen_cid===t})||null}),Eo=o(function(e){return e.reduce(function(e,t){return void 0===e[t.thread_cid]?e[t.thread_cid]=[t]:e[t.thread_cid].push(t),e},{})}),Co=o(function(e){return function(){return document.querySelector("#pscreen"+e+" .scontainer")}}),Oo=n("IQUt"),_o=n.n(Oo),So=n("kmu+"),jo=n.n(So),xo=function(e){function t(){return ye(this,t),ge(this,e.apply(this,arguments))}return be(t,e),t.prototype.render=function(){var e=this.props,t=(e.project,e.shellType),n=we(t,0,e.isLandscape),r="device"===t&&null===n?"none":t;return Pe.a.createElement("div",{className:jo.a.shell+" "+r,style:n})},t}(ke.PureComponent),To=xo;xo.propTypes={project:Ie.a.object,shellType:Ie.a.string,isLandscape:Ie.a.bool};var No=function(e){function t(){return Ce(this,t),Oe(this,e.apply(this,arguments))}return _e(t,e),t.prototype.render=function(){var e=this.props,t=e.project,n=e.screen,r=e.isLite,o=e.isImmersive,a=e.viewportWidth,i=e.viewportHeight,c=e.isColorPickerActive,s=t.splash,u=void 0===s?"":s,l=t.device,p=void 0===l?"":l,f=t.scale,d=void 0===f?100:f,h="landscape"===n.orientation,m=Ee(n,t,{width:a,height:i},d,r,o),v=o?"none":t._shell_type,y=v+" "+n.orientation+" "+t.device+" "+t.model+" x100";return Pe.a.createElement("div",{id:"simulator",className:y,style:m},Pe.a.createElement("div",{id:"app",className:"screens "+(c?"color-picker-hidden":"")},Pe.a.createElement("div",{id:"gs"}),Pe.a.createElement("div",{id:"gh",className:"fixed "+p}),Pe.a.createElement("div",{id:"gf",className:"fixed"})),Pe.a.createElement("div",{className:"splash"},u&&Pe.a.createElement("img",{src:u}),Pe.a.createElement("div",{className:"loading"},Pe.a.createElement("div",{className:"spinner"}))),!r&&Pe.a.createElement(To,{project:t,shellType:v,isLandscape:h}),Pe.a.createElement("div",{id:"sticky-container"},Pe.a.createElement("div",{id:"stickies"})))},t}(ke.PureComponent),Mo=No;No.propTypes={project:Ie.a.object,screen:Ie.a.object,isLite:Ie.a.bool,isImmersive:Ie.a.bool,isColorPickerActive:Ie.a.bool,viewportWidth:Ie.a.number,viewportHeight:Ie.a.number,dispatch:Ie.a.func};var ko=Object(Le.connect)(function(e){var t=e.model,n=t.current,r=t.projects,o=t.screens,a=e.container.previewPanel,i=a.isLayerActive,c=a.isCommentActive,s=Po(r,n.projectCid),u=Ro(o,n.screenCid),l=MB.isMobile(),p=MB.isEmbedded(),f=l||p,d=p&&"landscape"===Project.find(s.cid).homeScreen().orientation?[s.height,s.width]:[s.width,s.height],h=p?d:[window.innerWidth,window.innerHeight],m=h[0],v=h[1];return{isLite:f,project:s,screen:u,isImmersive:i||c,viewportWidth:m,viewportHeight:v}})(Mo),Po=o(function(e,t){return e.find(function(e){return e.cid===t})}),Ro=o(function(e,t){return e.find(function(e){return e.cid===t})}),Io=(n("BzO5"),function(e){function t(){var n,r,o;Se(this,t);for(var a=arguments.length,i=Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=r=je(this,e.call.apply(e,[this].concat(i))),r.setContainerRef=function(e){return r.$container=e},r.setContentElementRef=function(e){return r.contentElementRef=e},r.getContentElementRef=function(){return r.contentElementRef},r.scrollToCenter=function(){r.$container&&(r.$container.scrollLeft=(r.$container.scrollWidth-r.$container.clientWidth)/2)},r.checkIfNeedHideLayer=function(e){e.target==r.contentElementRef&&r.props.dispatch({type:"reducer:preview-toolbar:update",payload:{showLayerList:!1,isSelectLayer:!1,isShowColorPicker:!1}})},r.getColor=function(e){var t=Ao(e);r.props.dispatch({type:"reducer:preview-toolbar:update",payload:{userPickColor:t}})},r.cancelPickerMode=function(){return r.props.dispatch({type:"reducer:preview-toolbar:update",payload:{isShowColorPicker:!1}})},o=n,je(r,o)}return xe(t,e),t.prototype.componentDidMount=function(){setTimeout(this.scrollToCenter,200)},t.prototype.componentDidUpdate=function(e,t){e.project.scale===this.props.project.scale&&e.isLayerActive===this.props.isLayerActive&&e.isCommentActive===this.props.isCommentActive||this.scrollToCenter()},t.prototype.render=function(){var e=this.props,t=e.isLite,n=e.project,r=e.screen,o=e.isLayerActive,a=e.isCommentActive,i=n.scale,c=void 0===i?100:i,s="landscape"===r.orientation,u=o||a,l=hn()({"is-immersive":u,"is-layer-active":o,"is-desktop":!t}),p=u?"none":n._shell_type,f=n.template,d=Project.find(n.cid)||Template.find(n.cid),h=d.deviceShell()||d.defaultShell(),m=void 0,v=void 0;if("device"===p&&h.bg){var y=s?[h.height,h.width]:[h.width,h.height];m=y[0],v=y[1]}else{var g=s?[n.height,n.width]:[n.width,n.height];m=g[0],v=g[1]}m=m*c/100,v=v*c/100;var b={};if(!t){var w=(MB.f.isModalPreview?.8*window.innerHeight:window.innerHeight)-6;if(b.minWidth=Bo(m,c),u)b.height=Math.max(w+40,r.height*c/100+40);else if("web"===n.device){var E=n.height*c/100;b.height=Math.max(w,E)}else{var C=v+50;b.height=Math.max(w,C)}}var O={};if(u)O={width:Math.round(r.width*c/100),height:Math.round(r.height*c/100)};else if(!t){var _="landscape"===r.orientation,S=Math.round(n.width*c/100),j=Math.round(n.height*c/100),x=_?[j,S]:[S,j];O={width:x[0],height:x[1]}}return Pe.a.createElement("div",{id:"simulator-container",ref:this.setContainerRef,className:l},Pe.a.createElement("div",{id:"simulator-wrapper",ref:this.setContentElementRef,style:b},Pe.a.createElement("div",{className:"screen-viewport",style:O},Pe.a.createElement(ko,null),!t&&!f&&Pe.a.createElement("div",{className:"no-zoom-area"},Pe.a.createElement("div",{id:"ui-layers",className:"ui-layers "+(o?"is-active":"")},o&&Pe.a.createElement(Vn,null)),Pe.a.createElement("div",{id:"ui-comment-marker-panel"},Pe.a.createElement(go,{getContentElement:this.getContentElementRef,scale:.01*c}))))),o&&Pe.a.createElement(_o.a,{onClick:this.checkIfNeedHideLayer}))},t}(ke.PureComponent)),Lo=Io;Io.propTypes={isLite:Ie.a.bool,project:Ie.a.object,screen:Ie.a.object,isLayerActive:Ie.a.bool,isCommentActive:Ie.a.bool,dispatch:Ie.a.func};var Ao=function(e){var t=Do();return t.includes(e)||(t.unshift(e),t.length>40&&t.pop(),localStorage.user_pick_color=JSON.stringify(t)),t},Do=function(){return JSON.parse(localStorage.getItem("user_pick_color")||"[]")},Bo=o(function(e,t){var n=0,r=e;Widget.each(function(e){"sticky"===e.name&&(n=Math.min(n,e.l()),r=Math.max(r,e.r()))});var o=e/2;return 200+(2*Math.max(o-n,r-o)>>0)}),Fo=Object(Le.connect)(function(e){var t=e.model,n=t.current,r=t.projects,o=t.screens,a=e.container.previewPanel,i=a.isLayerActive,c=a.isCommentActive,s=Uo(r,n.projectCid),u=Ho(o,n.screenCid),l=MB.isMobile(),p=MB.isEmbedded();return{isLite:l||p,project:s,screen:u,isLayerActive:i,isCommentActive:c}})(Lo),Uo=o(function(e,t){return e.find(function(e){return e.cid===t})}),Ho=o(function(e,t){return e.find(function(e){return e.cid===t})});n.d(t,"a",function(){return zo}),n.d(t,"b",function(){return Xo}),n.d(t,"c",function(){return Qo});var qo=window,Wo=qo.MB,Ko=qo.I18N,Vo=function(e){function t(n){Te(this,t);var r=Ne(this,e.call(this,n));return Jo(n),r}return Me(t,e),t.prototype.componentWillUnmount=function(){this.props.dispatch({type:"entry:preview:clear"})},t.prototype.componentWillUpdate=function(e){this.props.project!==e.project&&Jo(e)},t.prototype.render=function(){var e=this.props,t=e.dispatch,n=e.project,r=e.isProjectFromOtherFreeUser,o=Wo.isMobile(),a=Wo.isEmbedded();return o||a?Pe.a.createElement(ko,null):Pe.a.createElement("div",null,Pe.a.createElement(un,{dispatch:t,project:n}),Pe.a.createElement(yo,null),Pe.a.createElement(Fo,null),r&&Pe.a.createElement("a",{className:"powered-by",href:"/",target:"_blank"},Ko.preview.powered_by_modao))},t}(ke.PureComponent);Vo.propTypes={project:Ie.a.object,screen:Ie.a.object,isLayerActive:Ie.a.bool,isCommentActive:Ie.a.bool,isProjectFromOtherFreeUser:Ie.a.bool,dispatch:Ie.a.func};var zo=Object(Le.connect)(function(e){var t=e.model,n=t.current,r=t.projects,o=t.screens,a=t.user,i=e.container,c=Go(r,n.projectCid);return{project:c,screen:Yo(o,n.screenCid),isLayerActive:i.previewPanel.isLayerActive,isCommentActive:i.previewPanel.isCommentActive,isProjectFromOtherFreeUser:Zo(c,a.id)}})(Vo),Go=o(function(e,t){return e.find(function(e){return e.cid===t})}),Yo=o(function(e,t){return e.find(function(e){return e.cid===t})}),Zo=o(function(e,t){return t!==e.owner_id&&(!e.owner_paid||e.expired)}),Jo=function(e){var t=e.project,n=e.isProjectFromOtherFreeUser;return _r({allowComment:t.limitation.commentable,denyMessage:Wo.renewMsg("cant_comment",{role:n?t.team_cid?"team":"project":"user"})})},Xo={alert:Ae.a.reducers,previewPanel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments[1],n=t.type,r=t.payload;switch(n){case"reducer:preview-panel:update":return $t({},e,r);case"reducer:preview-panel:reset":return en;default:return e}},comment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vo,t=arguments[1],n=t.type,r=t.payload;switch(n){case"container:comment:focus":return mo({},e,{focus:r.focus});case"container:comment:select":return mo({},e,{focus:r.select&&e.focus,select:r.select})}return e},layers:ur},Qo={layerSaga:K}},jMi8:function(e,t,n){var r=n("O1jc"),o=n("mKB/"),a=n("Ilb/"),i=n("hrPF"),c=n("WQFf"),s=n("1Yb9"),u=n("NGEn"),l=n("Fp5l"),p=n("ggOT"),f=n("gGqR"),d=n("yCNF"),h=n("9UkZ"),m=n("YsVG"),v=n("TlPD");e.exports=function(e,t,n,y,g,b,w){var E=e[n],C=t[n],O=w.get(C);if(O)r(e,n,O);else{var _=b?b(E,C,n+"",e,t,w):void 0,S=void 0===_;if(S){var j=u(C),x=!j&&p(C),T=!j&&!x&&m(C);_=C,j||x||T?u(E)?_=E:l(E)?_=i(E):x?(S=!1,_=o(C,!0)):T?(S=!1,_=a(C,!0)):_=[]:h(C)||s(C)?(_=E,s(E)?_=v(E):(!d(E)||y&&f(E))&&(_=c(C))):S=!1}S&&(w.set(C,_),g(_,C,y,b,w),w.delete(C)),r(e,n,_)}}},"kbi+":function(e,t,n){var r=n("eHwr")(n("KgVm"));e.exports=r},kiPs:function(e,t){e.exports={root:"-J75xPVmvbQKLN-Ufi0i5",container:"_3aAFPow4706mNn0bI1xwBL",select:"_3-73ACNn1cedvu5RCdPfxX",content:"_1rFTu4ZGICLzMsIpckPkJm",caret:"_3TiIFhI2K5QLz58PCyLm-r"}},"kmu+":function(e,t){e.exports={shell:"_3sQLmftZqROJzhujp8S0g4"}},ktak:function(e,t,n){var r=n("f931")(Object.keys,Object);e.exports=r},kxzG:function(e,t){e.exports=function(e){return e}},lAob:function(e,t){e.exports=function(e){return e}},lGpV:function(e,t,n){var r=n("ZT2e"),o=n("xdPp");e.exports=function(e){return o(r(e).toLowerCase())}},"mKB/":function(e,t,n){(function(e){var r=n("TQ3y"),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,c=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}}).call(t,n("3IRH")(e))},n7Jj:function(e,t,n){"use strict";t.a=function(e,t){var n=Object(c.b)();i.a.render(o.a.createElement(e,s({},t,{onClose:function(){return setTimeout(function(){i.a.unmountComponentAtNode(n),document.body.removeChild(n)})}})),n)};var r=n("GiK3"),o=n.n(r),a=n("O27J"),i=n.n(a),c=n("7vNm"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},nvBK:function(e,t){},nw3t:function(e,t,n){var r=n("p0bc");e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},orAw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createReduxEntry=function(){var e=null,t={},n=function(n){var r=t[n.type];return r&&r(e,n)},r=function(e,n){if("string"!=typeof e)throw new Error("[ReduxEntry][setEntry] non-string actionType: "+e);if("function"!=typeof n)throw new Error("[ReduxEntry][setEntry] non-function entryFunction: "+e+", "+n);t[e]&&console.warn("[ReduxEntry][setEntry] possible unexpected entry overwrite: "+e),t[e]=n};return{middleware:function(t){if("function"!=typeof t.getState||"function"!=typeof t.dispatch)throw new Error("[ReduxEntry][middleware] invalid reduxMiddlewareStore");if(null!==e)throw new Error("[ReduxEntry][middleware] already set reduxMiddlewareStore");return e=t,function(e){return function(t){return!0===n(t)||e(t)}}},setEntry:r,setEntryMap:function(e){return Object.keys(e).forEach(function(t){return r(t,e[t])})}}},t.createStateStore=function(e){if(void 0===e)throw new Error("[ReduxEntry][createStateStore] initialState expected");return{getState:function(){return e},setState:function(t){return e=t},wrapEntry:function(t){return function(n,r){return t(e,n,r)}}}},t.createStateStoreReducer=function(e,t){var n=t.getState,r=t.setState;return function(t,o){var a=o.type,i=o.payload;return a===e&&r(i),n()}},t.createStateStoreMergeReducer=function(e,t){var n=t.getState,o=t.setState;return function(t,a){var i=a.type,c=a.payload;return i===e&&o(r({},n(),c)),n()}}},p0bc:function(e,t,n){var r=n("ICSD"),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},pVSp:function(e,t,n){"use strict";function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(o,a){try{var i=t[o](a),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){r("next",e)},function(e){r("throw",e)});e(c)}return r("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n("GiK3"),s=n.n(c),u=n("KSGD"),l=n.n(u),p=n("wB9c"),f=n("iNpB"),d=(n("SjWj"),n("/MvA")),h=n("P63K"),m=n("Op9N"),v=n("ZePI"),y=n("tnSy"),g=(n.n(y),window.MBServer),b="file:"===location.protocol?"https://"+g:"https://"+location.host,w=function(e){function t(n){var i=this;o(this,t);var c=a(this,e.call(this,n));return c.setQRCodeRef=function(e){return c.$qrcode=e},c.refreshQRCode=function(){return $(c.$qrcode).empty().qrcode({text:c.state.sharingURL+"?via=qrcode",width:100,height:100})},c.handleSelectAll=function(e){return e.target.select()},c.generateSharingURL=function(e){return c.setState({sharingURL:window.MBData&&"file:"!==location.protocol?location.toString():"file:"===location.protocol?"https://"+g+"/app/"+e:"https://"+location.host+"/app/"+e})},c.handleRefresh=r(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.props.dispatch,e.next=3,Object(p.b)({dispatch:t,title:I18N.regenerate_url_title,desc:I18N.regenerate_url_desc});case 3:if(!e.sent){e.next=7;break}n=Math.uuid(31),c.generateSharingURL(n),c.setAttr("access_token",n);case 7:case"end":return e.stop()}},e,i)})),c.handleUpdateShell=function(e){var t=c.props.app;t.shell_type=e,t.lsave(MB.user.id===t.owner_id),$("body").trigger("queue:save"),c.forceUpdate(),MB.currentProject&&MB.runner.reload(!0)},c.handlePasswordChange=function(e){return c.setAttr("password",e.target.value)},c.handleAccess=function(e){"restricted"===e&&(c.props.app.password=""),c.setAttr("access",e)},c.handleCollaborators=function(){c.setState({isCollaboratorModalOpen:!0})},c.handlePreviewSettings=function(e){var t=c.props.app;Object.assign(t,{highlight:e.has(0),wechat:e.has(1)}),c.props.app.lsave(),$("body").trigger("queue:save"),c.forceUpdate()},c.handleSlackWebHook=function(e){return c.setAttr("slack_web_hook_url",e.target.value)},c.onCloseCollaboratorModal=function(){return c.setState({isCollaboratorModalOpen:!1})},c.state={sharingURL:"",isCollaboratorModalOpen:!1},c}return i(t,e),t.prototype.componentWillMount=function(){var e=this.props.app;this.generateSharingURL(e.access_token)},t.prototype.componentDidMount=function(){setTimeout(this.refreshQRCode,50)},t.prototype.componentWillReceiveProps=function(e){var t=e.app,n=e.isOpen,r=this.props.isOpen;r&&!n?(this.setState({sharingURL:""}),$(this.$qrcode).empty()):!r&&n&&this.generateSharingURL(t.access_token)},t.prototype.componentDidUpdate=function(e,t){var n=e.isOpen,r=t.sharingURL,o=this.props.isOpen,a=this.state.sharingURL;(!n&&o||r!==a)&&setTimeout(this.refreshQRCode,50)},t.prototype.setAttr=function(e,t){this.props.app[e]=t,this.props.app.lsave(),$("body").trigger("queue:save"),this.forceUpdate()},t.prototype.render=function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.app,o=e.dispatch,a=this.state,i=a.sharingURL,c=a.isCollaboratorModalOpen,u=/edge.modao.cc/.test(location.href),l='<iframe src="'+b+"/app/"+r.access_token+'/embed" width="'+(r.shell().width+80)+'" height="'+(r.shell().height+80)+'" allowTransparency="true" frameborder="0"></iframe>',p=r.owner_id===MB.user.id,y=p||r.canAdmin(),g=p||r.canEdit(),w=!/^\/app\//i.test(location.pathname),E=[{val:"restricted",name:s.a.createElement("span",{className:"restricted-access"},s.a.createElement("span",null,I18N.restricted_intro),"restricted"===r.access&&s.a.createElement("button",{className:"manage-collaborators",onClick:this.handleCollaborators},I18N.manage))},{val:"private",name:s.a.createElement("span",null,I18N.private_intro,s.a.createElement("p",null,"private"===r.access&&(MB.user.id&&MB.user.limitation.encryptable?s.a.createElement("input",{type:"text",placeholder:I18N.sharing_password,value:r.password||"",onChange:this.handlePasswordChange,readOnly:!y}):s.a.createElement("button",{className:"renew",onClick:f.b},I18N.password_protection))))}],C={device:I18N.device_shell,default:I18N.default_shell,none:I18N.none_shell},O=[{name:I18N.highlight_clickable},{name:I18N.view_in_browser}],_=r.team_cid?r.cteam():r;return s.a.createElement(d.a,{isOpen:t,className:"sharing-modal",title:I18N.share,onClose:n},s.a.createElement("section",{className:"qrcode",ref:this.setQRCodeRef}),s.a.createElement("section",{className:"sharing-url"},s.a.createElement("input",{type:"text",readOnly:!0,className:"regular",value:i,onClick:this.handleSelectAll}),y&&s.a.createElement("button",{onClick:this.handleRefresh},I18N.regenerate)),s.a.createElement("section",{className:"sharing-code"},s.a.createElement("p",null,I18N.embed_tips),s.a.createElement("textarea",{readOnly:!0,className:"regular",onClick:this.handleSelectAll,value:l})),w&&s.a.createElement("section",null,s.a.createElement(v.c,{name:I18N.access_permission},s.a.createElement(v.e,{isDisabled:!y,optionList:E,onChange:this.handleAccess,currentOptionIdx:"restricted"===r.access?0:1}))),g&&"web"!==r.device&&s.a.createElement("section",null,s.a.createElement(v.d,{name:I18N.default_shell_field},s.a.createElement(h.a,{options:C,value:r.shell_type,onChange:this.handleUpdateShell}))),y&&s.a.createElement("section",null,s.a.createElement(v.c,{name:I18N.preview_settings},s.a.createElement(v.a,{optionList:O,onChange:this.handlePreviewSettings,currentOptionIdxList:[r.highlight&&0,r.wechat&&1]}))),u&&s.a.createElement(v.c,{name:"Slack Web Hook"},s.a.createElement("input",{type:"text",value:r.slack_web_hook_url||"",onBlur:this.handleSlackWebHook})),s.a.createElement(m.a,{isOpen:c,onClose:this.onCloseCollaboratorModal,dispatch:o,host:_,userRole:_.owner_id===MB.user.id?"owner":_.roleByUid(MB.user.id)}))},t}(c.PureComponent);w.propTypes={dispatch:l.a.func.isRequired,isOpen:l.a.bool,onClose:l.a.func,app:l.a.object},t.a=w},pVq3:function(e,t){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+n+"]",o="[a-z\\xdf-\\xf6\\xf8-\\xff]",a="[^\\ud800-\\udfff"+n+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",s="[A-Z\\xc0-\\xd6\\xd8-\\xde]",u="(?:"+o+"|"+a+")",l="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",p="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",i,c].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),f="(?:"+["[\\u2700-\\u27bf]",i,c].join("|")+")"+p,d=RegExp([s+"?"+o+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[r,s,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[r,s+u,"$"].join("|")+")",s+"?"+u+"+(?:['’](?:d|ll|m|re|s|t|ve))?",s+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",f].join("|"),"g");e.exports=function(e){return e.match(d)||[]}},qjtJ:function(e,t){e.exports=[{id:"inspect",layer:["slash","bracket"]},{id:"play",layer:["arrow","circle"]},{id:"evenly_distribute_h",layer:["indicator","object"]},{id:"evenly_distribute_v",layer:["indicator","object"]},{id:"widget_align_bottom",layer:["indicator","object"]},{id:"widget_align_center",layer:["indicator","object"]},{id:"widget_align_left",layer:["indicator","object"]},{id:"widget_align_right",layer:["indicator","object"]},{id:"widget_align_top",layer:["indicator","object"]},{id:"widget_align_v_center",layer:["indicator","object"]}]},qwTf:function(e,t,n){var r=n("TQ3y").Uint8Array;e.exports=r},rU0D:function(e,t,n){var r=n("Wh6c"),o=n("iYj9"),a=n("0ghZ"),i=n("ZT2e");e.exports=function(e){return function(t){t=i(t);var n=o(t)?a(t):void 0,c=n?n[0]:t.charAt(0),s=n?r(n,1).join(""):t.slice(1);return c[e]()+s}}},rhFK:function(e,t){e.exports={"preview-panel-item":"_1717Z_L8MKygkkz4nDL3ls","preview-panel-item-header":"_30tq-aOUOGPMQniKzHKRgu"}},rpnb:function(e,t,n){var r=n("tHks")();e.exports=r},rprB:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},rsfk:function(e,t){},rxKx:function(e,t,n){var r;!function(o,a,i,c){"use strict";function s(e,t,n){return setTimeout(d(e,n),t)}function u(e,t,n){return!!Array.isArray(e)&&(l(e,n[t],n),!0)}function l(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==c)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function p(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=o.console&&(o.console.warn||o.console.log);return a&&a.call(o.console,r,n),e.apply(this,arguments)}}function f(e,t,n){var r,o=t.prototype;(r=e.prototype=Object.create(o)).constructor=e,r._super=o,n&&he(r,n)}function d(e,t){return function(){return e.apply(t,arguments)}}function h(e,t){return typeof e==ye?e.apply(t?t[0]||c:c,t):e}function m(e,t){return e===c?t:e}function v(e,t,n){l(w(t),function(t){e.addEventListener(t,n,!1)})}function y(e,t,n){l(w(t),function(t){e.removeEventListener(t,n,!1)})}function g(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function b(e,t){return e.indexOf(t)>-1}function w(e){return e.trim().split(/\s+/g)}function E(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function C(e){return Array.prototype.slice.call(e,0)}function O(e,t,n){for(var r=[],o=[],a=0;a<e.length;){var i=t?e[a][t]:e[a];E(o,i)<0&&r.push(e[a]),o[a]=i,a++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function _(e,t){for(var n,r,o=t[0].toUpperCase()+t.slice(1),a=0;a<me.length;){if(n=me[a],(r=n?n+o:t)in e)return r;a++}return c}function S(){return Oe++}function j(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||o}function x(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){h(e.options.enable,[e])&&n.handler(t)},this.init()}function T(e){var t=e.options.inputClass;return new(t||(je?q:xe?V:Se?G:H))(e,N)}function N(e,t,n){var r=n.pointers.length,o=n.changedPointers.length,a=t&Ne&&r-o==0,i=t&(ke|Pe)&&r-o==0;n.isFirst=!!a,n.isFinal=!!i,a&&(e.session={}),n.eventType=t,M(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function M(e,t){var n=e.session,r=t.pointers,o=r.length;n.firstInput||(n.firstInput=R(t)),o>1&&!n.firstMultiple?n.firstMultiple=R(t):1===o&&(n.firstMultiple=!1);var a=n.firstInput,i=n.firstMultiple,c=i?i.center:a.center,s=t.center=I(r);t.timeStamp=we(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=B(c,s),t.distance=D(c,s),k(n,t),t.offsetDirection=A(t.deltaX,t.deltaY);var u=L(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=be(u.x)>be(u.y)?u.x:u.y,t.scale=i?U(i.pointers,r):1,t.rotation=i?F(i.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,P(n,t);var l=e.element;g(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function k(e,t){var n=t.center,r=e.offsetDelta||{},o=e.prevDelta||{},a=e.prevInput||{};t.eventType!==Ne&&a.eventType!==ke||(o=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=o.x+(n.x-r.x),t.deltaY=o.y+(n.y-r.y)}function P(e,t){var n,r,o,a,i=e.lastInterval||t,s=t.timeStamp-i.timeStamp;if(t.eventType!=Pe&&(s>Te||i.velocity===c)){var u=t.deltaX-i.deltaX,l=t.deltaY-i.deltaY,p=L(s,u,l);r=p.x,o=p.y,n=be(p.x)>be(p.y)?p.x:p.y,a=A(u,l),e.lastInterval=t}else n=i.velocity,r=i.velocityX,o=i.velocityY,a=i.direction;t.velocity=n,t.velocityX=r,t.velocityY=o,t.direction=a}function R(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:ge(e.pointers[n].clientX),clientY:ge(e.pointers[n].clientY)},n++;return{timeStamp:we(),pointers:t,center:I(t),deltaX:e.deltaX,deltaY:e.deltaY}}function I(e){var t=e.length;if(1===t)return{x:ge(e[0].clientX),y:ge(e[0].clientY)};for(var n=0,r=0,o=0;o<t;)n+=e[o].clientX,r+=e[o].clientY,o++;return{x:ge(n/t),y:ge(r/t)}}function L(e,t,n){return{x:t/e||0,y:n/e||0}}function A(e,t){return e===t?Re:be(e)>=be(t)?e<0?Ie:Le:t<0?Ae:De}function D(e,t,n){n||(n=He);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(r*r+o*o)}function B(e,t,n){n||(n=He);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return 180*Math.atan2(o,r)/Math.PI}function F(e,t){return B(t[1],t[0],qe)+B(e[1],e[0],qe)}function U(e,t){return D(t[0],t[1],qe)/D(e[0],e[1],qe)}function H(){this.evEl=Ke,this.evWin=Ve,this.pressed=!1,x.apply(this,arguments)}function q(){this.evEl=Ye,this.evWin=Ze,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=Xe,this.evWin=Qe,this.started=!1,x.apply(this,arguments)}function K(e,t){var n=C(e.touches),r=C(e.changedTouches);return t&(ke|Pe)&&(n=O(n.concat(r),"identifier",!0)),[n,r]}function V(){this.evTarget=et,this.targetIds={},x.apply(this,arguments)}function z(e,t){var n=C(e.touches),r=this.targetIds;if(t&(Ne|Me)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,a,i=C(e.changedTouches),c=[],s=this.target;if(a=n.filter(function(e){return g(e.target,s)}),t===Ne)for(o=0;o<a.length;)r[a[o].identifier]=!0,o++;for(o=0;o<i.length;)r[i[o].identifier]&&c.push(i[o]),t&(ke|Pe)&&delete r[i[o].identifier],o++;return c.length?[O(a.concat(c),"identifier",!0),c]:void 0}function G(){x.apply(this,arguments);var e=d(this.handler,this);this.touch=new V(this.manager,e),this.mouse=new H(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Y(e,t){e&Ne?(this.primaryTouch=t.changedPointers[0].identifier,Z.call(this,t)):e&(ke|Pe)&&Z.call(this,t)}function Z(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches,o=function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)};setTimeout(o,tt)}}function J(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],a=Math.abs(t-o.x),i=Math.abs(n-o.y);if(a<=nt&&i<=nt)return!0}return!1}function X(e,t){this.manager=e,this.set(t)}function Q(e){if(b(e,ct))return ct;var t=b(e,st),n=b(e,ut);return t&&n?ct:t||n?t?st:ut:b(e,it)?it:at}function $(e){this.options=he({},this.defaults,e||{}),this.id=S(),this.manager=null,this.options.enable=m(this.options.enable,!0),this.state=pt,this.simultaneous={},this.requireFail=[]}function ee(e){return e&vt?"cancel":e&ht?"end":e&dt?"move":e&ft?"start":""}function te(e){return e==De?"down":e==Ae?"up":e==Ie?"left":e==Le?"right":""}function ne(e,t){var n=t.manager;return n?n.get(e):e}function re(){$.apply(this,arguments)}function oe(){re.apply(this,arguments),this.pX=null,this.pY=null}function ae(){re.apply(this,arguments)}function ie(){$.apply(this,arguments),this._timer=null,this._input=null}function ce(){re.apply(this,arguments)}function se(){re.apply(this,arguments)}function ue(){$.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function le(e,t){return t=t||{},t.recognizers=m(t.recognizers,le.defaults.preset),new pe(e,t)}function pe(e,t){this.options=he({},le.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=T(this),this.touchAction=new X(this,this.options.touchAction),fe(this,!0),l(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function fe(e,t){var n=e.element;if(n.style){var r;l(e.options.cssProps,function(o,a){r=_(n.style,a),t?(e.oldCssProps[r]=n.style[r],n.style[r]=o):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={})}}function de(e,t){var n=a.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}var he,me=["","webkit","Moz","MS","ms","o"],ve=a.createElement("div"),ye="function",ge=Math.round,be=Math.abs,we=Date.now;he="function"!=typeof Object.assign?function(e){if(e===c||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==c&&null!==r)for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t}:Object.assign;var Ee=p(function(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;)(!n||n&&e[r[o]]===c)&&(e[r[o]]=t[r[o]]),o++;return e},"extend","Use `assign`."),Ce=p(function(e,t){return Ee(e,t,!0)},"merge","Use `assign`."),Oe=1,_e=/mobile|tablet|ip(ad|hone|od)|android/i,Se="ontouchstart"in o,je=_(o,"PointerEvent")!==c,xe=Se&&_e.test(navigator.userAgent),Te=25,Ne=1,Me=2,ke=4,Pe=8,Re=1,Ie=2,Le=4,Ae=8,De=16,Be=Ie|Le,Fe=Ae|De,Ue=Be|Fe,He=["x","y"],qe=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&v(this.element,this.evEl,this.domHandler),this.evTarget&&v(this.target,this.evTarget,this.domHandler),this.evWin&&v(j(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(j(this.element),this.evWin,this.domHandler)}};var We={mousedown:Ne,mousemove:Me,mouseup:ke},Ke="mousedown",Ve="mousemove mouseup";f(H,x,{handler:function(e){var t=We[e.type];t&Ne&&0===e.button&&(this.pressed=!0),t&Me&&1!==e.which&&(t=ke),this.pressed&&(t&ke&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var ze={pointerdown:Ne,pointermove:Me,pointerup:ke,pointercancel:Pe,pointerout:Pe},Ge={2:"touch",3:"pen",4:"mouse",5:"kinect"},Ye="pointerdown",Ze="pointermove pointerup pointercancel";o.MSPointerEvent&&!o.PointerEvent&&(Ye="MSPointerDown",Ze="MSPointerMove MSPointerUp MSPointerCancel"),f(q,x,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),o=ze[r],a=Ge[e.pointerType]||e.pointerType,i="touch"==a,c=E(t,e.pointerId,"pointerId");o&Ne&&(0===e.button||i)?c<0&&(t.push(e),c=t.length-1):o&(ke|Pe)&&(n=!0),c<0||(t[c]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(c,1))}});var Je={touchstart:Ne,touchmove:Me,touchend:ke,touchcancel:Pe},Xe="touchstart",Qe="touchstart touchmove touchend touchcancel";f(W,x,{handler:function(e){var t=Je[e.type];if(t===Ne&&(this.started=!0),this.started){var n=K.call(this,e,t);t&(ke|Pe)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var $e={touchstart:Ne,touchmove:Me,touchend:ke,touchcancel:Pe},et="touchstart touchmove touchend touchcancel";f(V,x,{handler:function(e){var t=$e[e.type],n=z.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var tt=2500,nt=25;f(G,x,{handler:function(e,t,n){var r="touch"==n.pointerType,o="mouse"==n.pointerType;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)Y.call(this,t,n);else if(o&&J.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var rt=_(ve.style,"touchAction"),ot=rt!==c,at="auto",it="manipulation",ct="none",st="pan-x",ut="pan-y",lt=function(){if(!ot)return!1;var e={},t=o.CSS&&o.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||o.CSS.supports("touch-action",n)}),e}();X.prototype={set:function(e){"compute"==e&&(e=this.compute()),ot&&this.manager.element.style&&lt[e]&&(this.manager.element.style[rt]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return l(this.manager.recognizers,function(t){h(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Q(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,o=b(r,ct)&&!lt[ct],a=b(r,ut)&&!lt[ut],i=b(r,st)&&!lt[st];if(o){var c=1===e.pointers.length,s=e.distance<2,u=e.deltaTime<250;if(c&&s&&u)return}if(!i||!a)return o||a&&n&Be||i&&n&Fe?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var pt=1,ft=2,dt=4,ht=8,mt=ht,vt=16;$.prototype={defaults:{},set:function(e){return he(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(u(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ne(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return u(e,"dropRecognizeWith",this)?this:(e=ne(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(u(e,"requireFailure",this))return this;var t=this.requireFail;return e=ne(e,this),-1===E(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(u(e,"dropRequireFailure",this))return this;e=ne(e,this);var t=E(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,r=this.state;r<ht&&t(n.options.event+ee(r)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),r>=ht&&t(n.options.event+ee(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|pt)))return!1;e++}return!0},recognize:function(e){var t=he({},e);if(!h(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(mt|vt|32)&&(this.state=pt),this.state=this.process(t),this.state&(ft|dt|ht|vt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},f(re,$,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(ft|dt),o=this.attrTest(e);return r&&(n&Pe||!o)?t|vt:r||o?n&ke?t|ht:t&ft?t|dt:ft:32}}),f(oe,re,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ue},getTouchAction:function(){var e=this.options.direction,t=[];return e&Be&&t.push(ut),e&Fe&&t.push(st),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,o=e.direction,a=e.deltaX,i=e.deltaY;return o&t.direction||(t.direction&Be?(o=0===a?Re:a<0?Ie:Le,n=a!=this.pX,r=Math.abs(e.deltaX)):(o=0===i?Re:i<0?Ae:De,n=i!=this.pY,r=Math.abs(e.deltaY))),e.direction=o,n&&r>t.threshold&&o&t.direction},attrTest:function(e){return re.prototype.attrTest.call(this,e)&&(this.state&ft||!(this.state&ft)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=te(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),f(ae,re,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ct]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&ft)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),f(ie,$,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[at]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(ke|Pe)&&!o)this.reset();else if(e.eventType&Ne)this.reset(),this._timer=s(function(){this.state=mt,this.tryEmit()},t.time,this);else if(e.eventType&ke)return mt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===mt&&(e&&e.eventType&ke?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=we(),this.manager.emit(this.options.event,this._input)))}}),f(ce,re,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ct]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&ft)}}),f(se,re,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Be|Fe,pointers:1},getTouchAction:function(){return oe.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(Be|Fe)?t=e.overallVelocity:n&Be?t=e.overallVelocityX:n&Fe&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&be(t)>this.options.velocity&&e.eventType&ke},emit:function(e){var t=te(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),f(ue,$,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[it]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),e.eventType&Ne&&0===this.count)return this.failTimeout();if(r&&o&&n){if(e.eventType!=ke)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,i=!this.pCenter||D(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,i&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=s(function(){this.state=mt,this.tryEmit()},t.interval,this),ft):mt}return 32},failTimeout:function(){return this._timer=s(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==mt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),le.VERSION="2.0.7",le.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ce,{enable:!1}],[ae,{enable:!1},["rotate"]],[se,{direction:Be}],[oe,{direction:Be},["swipe"]],[ue],[ue,{event:"doubletap",taps:2},["tap"]],[ie]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};pe.prototype={set:function(e){return he(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,o=t.curRecognizer;(!o||o&&o.state&mt)&&(o=t.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===t.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(e),!o&&n.state&(ft|dt|ht)&&(o=t.curRecognizer=n),a++}},get:function(e){if(e instanceof $)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(u(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(u(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=E(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==c&&t!==c){var n=this.handlers;return l(w(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==c){var n=this.handlers;return l(w(e),function(e){t?n[e]&&n[e].splice(E(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&de(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&fe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},he(le,{INPUT_START:Ne,INPUT_MOVE:Me,INPUT_END:ke,INPUT_CANCEL:Pe,STATE_POSSIBLE:pt,STATE_BEGAN:ft,STATE_CHANGED:dt,STATE_ENDED:ht,STATE_RECOGNIZED:mt,STATE_CANCELLED:vt,STATE_FAILED:32,DIRECTION_NONE:Re,DIRECTION_LEFT:Ie,DIRECTION_RIGHT:Le,DIRECTION_UP:Ae,DIRECTION_DOWN:De,DIRECTION_HORIZONTAL:Be,DIRECTION_VERTICAL:Fe,DIRECTION_ALL:Ue,Manager:pe,Input:x,TouchAction:X,TouchInput:V,MouseInput:H,PointerEventInput:q,TouchMouseInput:G,SingleTouchInput:W,Recognizer:$,AttrRecognizer:re,Tap:ue,Pan:oe,Swipe:se,Pinch:ae,Rotate:ce,Press:ie,on:v,off:y,each:l,merge:Ce,extend:Ee,assign:he,inherit:f,bindFn:d,prefixed:_}),(void 0!==o?o:"undefined"!=typeof self?self:{}).Hammer=le,(r=function(){return le}.call(t,n,t,e))!==c&&(e.exports=r)}(window,document)},"sF+Z":function(e,t){e.exports={container:"_1AVdPDPwS89y8K6NwxXVap",infoHeader:"BKNE8nSaHH3XZBUTv1VHG",panel:"_1ksgci-Rf-8mX3qob9sDrT",flexFull:"_1P0QdU93j_Nl9jdShc9p1-",panelRow:"_9n-kQTZNLiaAfy_IKOJS0 _1P0QdU93j_Nl9jdShc9p1-",infoKey:"BgtzuT84EDu9W5bhO1CZq",infoValue:"B7IgJkGyq2Mr-PAjqDdWn",fixedWidth:"_1cPNYvzcJavPkpUTsVx41g",copyBtn:"_1aZ_zoMkfnG66iqC9M6vQm _2TAID7TnzAXoGA-jTBc04W",ghostTextarea:"_3ViNHTb7TlzrcGe-KNAHtf",colorRow:"VsRBkZJQgV3vEkJWDQouE",colorBlock:"_1HTbPk0EBp894I-49uskuo",colorContent:"_1A-sey5jEPMPY8FBV1hK2L",textContent:"_3J_y1ws1ajpV2L_4ujk5k4",image:"_2WcEIVg4s-tki6JptWfftM",download:"VZi_jR2ynXEgGlLgZ6LcF",downloadFiletype:"_3gnwWK06IkpGAOJxyFhGbA",downloadFiletypeIcon:"ZnEpqQAdD0YWOHtyJIi-H"}},sJvV:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},sMP3:function(e,t,n){"use strict";var r=Object.prototype.toString,o=function(e){return r.call(e)},a=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object),i=function(e){return null!=e&&"object"==typeof e},c="[object Object]",s=Function.prototype,u=Object.prototype,l=s.toString,p=u.hasOwnProperty,f=l.call(Object);t.a=function(e){if(!i(e)||o(e)!=c)return!1;var t=a(e);if(null===t)return!0;var n=p.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==f}},sn4q:function(e,t,n){"use strict";function r(e){var t=e.plan,n=e.state,r=e.limitation,o=e.days_left,a="active"===n;return{state:n||"",type:a&&t||"free",rawType:t||"free",collaboratorLimitation:a&&r||0,daysLeft:o||""}}function o(e){return He.has(e)?e:"guest"}function a(e){return JSON.parse(g.a.Storage.getItem(e+"_commentTick")||"{}")}function i(e,t){g.a.Storage.setItem(e+"_commentTick",JSON.stringify(t))}function c(e,t){var n=a(e);n[t]=Math.ceil(.001*Date.now()+2),i(e,n)}function s(){for(var e=.001*Date.now()-2592e3,t=[],n=0,r=g.a.Storage.length;n<r;n++){(function(n,r){var o=g.a.Storage.key(n);if(!o.endsWith("_commentTick"))return"continue";var a=JSON.parse(g.a.Storage.getItem(o)||"{}"),i=Object.keys(a);i.forEach(function(t){a[t]<=e&&delete a[t]});var c=Object.keys(a);0===c.length?t.push(o):i.length!==c.length&&g.a.Storage.setItem(o,JSON.stringify(a))})(n)}t.forEach(function(e){return g.a.Storage.removeItem(e)})}function u(e,t,n){0!==n&&(e[t]=(e[t]||0)+n)}function l(e,t){var n=Le.getState();return n&&L.getState().find(function(r){return r.user_id===n.id&&(r.project_cid===e||r.team_cid===t)})}function p(e,t){var n=t.getState,r=t.setState,o=n();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments[1];return a.type!==e?t:(r(a.payload||t),n())}}function f(e){var t=e.entryMap,n=e.reducerMap,r=e.sagaMap,o=Object(h.createReduxEntry)(),a=o.middleware;(0,o.setEntryMap)(t);var i=void 0,c=[a];r&&(i=Object(m.a)(),c.push(i));var s=Object(d.createStore)(Object(d.combineReducers)(n),Qe(d.applyMiddleware.apply(void 0,c)));if(r){var u=function(e){i.run(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,r[e]();case 3:t.next=0;break;case 5:case"end":return t.stop()}},t,this)}))};for(var l in r)u(l)}return{store:s}}var d=n("2KeS"),h=n("orAw"),m=n("igqX"),v=n("IDd6"),y=n("Ibgh"),g=n("AxSz"),b={"entry:state:init":function(e){var t=e.dispatch;t({type:"user:set",payload:g.a.MB.user||null}),t({type:"teams:refresh"}),t({type:"widgets:refresh"}),t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:g.a.MB.currentProject,screen:g.a.MB.currentScreen}})},"entry:state:clear":function(e){e.dispatch},"entry:sync-runner:set-screen":function(e,t){var n=e.dispatch,r=e.getState,o=t.payload.cid;n({type:"entry:current:set-screen",payload:{cid:o}}),r().container.previewPanel.isLayerActive&&n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:o}}),g.a.MB.runner.loadScreen(o)},"entry:refresh:team-related":function(e){var t=e.dispatch;t({type:"teams:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:g.a.MB.currentProject,screen:g.a.MB.currentScreen}})},"entry:refresh:project-related":function(e){var t=e.dispatch;t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"widgets:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:g.a.MB.currentProject,screen:g.a.MB.currentScreen}})},"entry:listpage:toggle:order":function(e){var t=e.dispatch,n=e.getState,r=g.a.MB.preference(),o=n().container.listpage.ui.order,a=void 0;o?(a="asc"===o?"desc":"asc",r.app_order=a,r.lsave(),g.a.SpineModel.queueSave()):a=r.app_order,t({type:"container:listpage:set:order",payload:{order:a}})},"entry:focus-element":function(e,t){var n=e.dispatch,r=t.payload,o=r.focusType,a=r.element;return a&&setTimeout(function(){switch(o){case"normal":return a.focus&&a.focus();case"external":return n({type:"entry:webpack-interface:observer:call",payload:{key:"focus-method:request-focus",args:[a]}}),a.focus&&a.focus()}},100),!0},"entry:layer:set:active":function(e,t){var n=e.dispatch,r=e.getState,o=t.payload.isActive,a=r().container.previewPanel;if(a.isLayerActive!==o){var i=o||a.isCommentActive?"immersive":"default";i!==g.a.MB.runner.mode&&(g.a.MB.runner.mode=i,setTimeout(function(){g.a.MB.runner.reload(!0)})),n({type:"reducer:preview-panel:update",payload:{isLayerActive:o}}),n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:g.a.MB.currentScreen.cid}})}},"entry:comment:set:active":function(e,t){var n=e.dispatch,r=e.getState,o=t.payload.isActive,a=r(),i=a.container.previewPanel,c=a.model.user;if(i.isCommentActive!==o){var s=o||i.isLayerActive?"immersive":"default";s!==g.a.MB.runner.mode&&(g.a.MB.runner.mode=s,setTimeout(function(){g.a.MB.runner.reload(!0)})),o&&!g.a.MB.currentProject.limitation.commentable&&MB.promptRenew("cant_comment",{role:g.a.MB.currentProject.owner_id!==c.id?g.a.MB.currentProject.team_cid?"team":"project":"user"}),n({type:"reducer:preview-panel:update",payload:{isCommentActive:o}})}},"container:comment:select":function(e,t){var n=e.dispatch,r=e.getState,o=t.payload.select,a=r(),i=a.model,c=i.comments,s=i.commentThreads,u=a.container,l=s.find(function(e){return e.cid===u.comment.select});l&&o!==u.comment.select&&!c.find(function(e){return e.thread_cid===l.cid})&&n({type:"entry:comment-threads:delete",payload:l})},"entry:preview:clear":function(e,t){var n=e.dispatch;g.a.MB.runner.mode="default",n({type:"reducer:preview-panel:reset"}),n({type:"container:layers:clear"})}},w=n("QPja"),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=g.a.SpineModel,O={Team:"t",Project:"p",Combo:"c",Template:"t",Screen:"s",Collaborator:"co",Comment:"cm",CommentThread:"cmth",Widget:"w"},_=Object.keys(O),S=_.reduce(function(e,t){return e[t]=C[t].attributes,e},{});S.Widget=[].concat(S.Widget,["id"]);var j=_.reduce(function(e,t){var n=C[t],r=S[t],o=O[t],a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.forEach(function(n){return t[n]=e[n]}),t},i=function(e,t){var r=e.find(function(e){return e.cid===t}),o=n.findByAttribute("cid",t);return Boolean(r||o)},c=function(e,t){var r=e.find(function(e){return e.cid===t}),o=n.findByAttribute("cid",t);return{dataState:r,dataModel:o}};return e[t]={refreshStateList:function(e){return n.all().map(function(e){return a(e,{})})},saveState:function(e,t,n){var r=t.cid,o=c(e,r),a=o.dataState,i=o.dataModel;return a&&i?(i.lsave(!n),!n&&g.a.SpineModel.queueSave(),e):e},addState:function(e,t,r){var a=t.cid||g.a.SpineModel.requestCid(o);i(e,a)&&(a=g.a.SpineModel.requestCid(o));var c=E({},t,{cid:a});return new n(c).lsave(!r),!r&&g.a.SpineModel.queueSave(),w.Operation.arrayPush(e,c)},updateState:function(e,t,n){var r=t.cid,o=c(e,r),a=o.dataState,i=o.dataModel;return a&&i?(a=E({},a,t),Object.assign(i,a),i.lsave(!n),!n&&g.a.SpineModel.queueSave(),w.Operation.arrayFindSet(e,function(e){return e.cid===r},a)):e},deleteState:function(e,t,n){var r=t.cid,o=c(e,r),a=o.dataState,i=o.dataModel;return a&&i?(i.ldestroy(!n),!n&&g.a.SpineModel.queueSave(),w.Operation.arrayFindDelete(e,function(e){return e.cid===r})):e}},e},{}),x=function(e){return function(t,n,r){var o=n.cid,a=C.Project.findByAttribute("cid",o)?"Project":C.Template.findByAttribute("cid",o)?"Template":C.Combo.findByAttribute("cid",o)?"Combo":null;return j[a][e](t,n,r)}};j.ProjectAlike={refreshStateList:function(e){return[].concat(j.Project.refreshStateList(),j.Template.refreshStateList(),j.Combo.refreshStateList())},saveState:x("saveState"),addState:x("addState"),updateState:x("updateState"),deleteState:x("deleteState")};var T=j.Collaborator,N=[],M=Object(h.createStateStore)(N),k=M.getState,P=M.setState,R=M.wrapEntry,I=function(e,t){return R(function(n,r,o){var a=r.dispatch,i=o&&o.payload;a({type:"reducer:collaborators:update",payload:e(n,i,t)})})},L={entryMap:{"collaborators:refresh":R(function(e,t,n){var r=t.dispatch,o=n&&n.payload;(e=T.refreshStateList(e,o,!1)).forEach(function(e){e.avatar||(e.avatar="/images/avatar.png")}),r({type:"reducer:collaborators:update",payload:e})}),"collaborators:add":I(T.addState,!1),"collaborators:add-local":I(T.addState,!0),"collaborators:update":I(T.updateState,!1),"collaborators:update-local":I(T.updateState,!0),"collaborators:delete":I(T.deleteState,!1),"collaborators:delete-local":I(T.deleteState,!0)},getState:k,setState:P},A=j.Comment,D=[],B=Object(h.createStateStore)(D),F=B.getState,U=B.setState,H=B.wrapEntry,q=function(e,t){return H(function(n,r,o){var a=r.dispatch,i=o&&o.payload;a({type:"reducer:comments:update",payload:e(n,i,t)})})},W={entryMap:{"comments:refresh":q(A.refreshStateList,!1),"comments:add":q(A.addState,!1),"comments:add-local":q(A.addState,!0),"comments:update":q(A.updateState,!1),"comments:update-local":q(A.updateState,!0),"comments:delete":q(A.deleteState,!1),"comments:delete-local":q(A.deleteState,!0)},getState:F,setState:U},K=j.CommentThread,V=[],z=Object(h.createStateStore)(V),G=z.getState,Y=z.setState,Z=z.wrapEntry,J=function(e,t){return Z(function(n,r,o){var a=r.dispatch,i=o&&o.payload;a({type:"reducer:comment-threads:update",payload:e(n,i,t)})})},X={entryMap:{"comment-threads:refresh":J(K.refreshStateList,!1),"comment-threads:save":J(K.saveState,!1),"comment-threads:add":J(K.addState,!1),"comment-threads:add-local":J(K.addState,!0),"comment-threads:update":J(K.updateState,!1),"comment-threads:update-local":J(K.updateState,!0),"comment-threads:delete":J(K.deleteState,!1),"comment-threads:delete-local":J(K.deleteState,!0)},getState:G,setState:Y},Q=j.ProjectAlike,$=[],ee=Object(h.createStateStore)($),te=ee.getState,ne=ee.setState,re=ee.wrapEntry,oe=function(e,t){return re(function(n,r,o){var a=r.dispatch,i=o&&o.payload;a({type:"reducer:projects:update",payload:e(n,i,t)})})},ae={entryMap:{"projects:refresh":oe(Q.refreshStateList,!1),"projects:add":oe(Q.addState,!1),"projects:add-local":oe(Q.addState,!0),"projects:update":oe(Q.updateState,!1),"projects:update-local":oe(Q.updateState,!0),"projects:delete":oe(Q.deleteState,!1),"projects:delete-local":oe(Q.deleteState,!0)},getState:te,setState:ne},ie=j.Screen,ce=[],se=Object(h.createStateStore)(ce),ue=se.getState,le=se.setState,pe=se.wrapEntry,fe=function(e,t){return pe(function(n,r,o){var a=r.dispatch,i=o&&o.payload;a({type:"reducer:screens:update",payload:e(n,i,t)})})},de={entryMap:{"screens:refresh":fe(ie.refreshStateList,!1),"screens:add":fe(ie.addState,!1),"screens:add-local":fe(ie.addState,!0),"screens:update":fe(ie.updateState,!1),"screens:update-local":fe(ie.updateState,!0),"screens:delete":fe(ie.deleteState,!1),"screens:delete-local":fe(ie.deleteState,!0)},getState:ue,setState:le},he=j.Team,me=[],ve=Object(h.createStateStore)(me),ye=ve.getState,ge=ve.setState,be=ve.wrapEntry,we=function(e,t){return be(function(n,r,o){var a=r.dispatch,i=o&&o.payload;a({type:"reducer:teams:update",payload:e(n,i,t)})})},Ee={entryMap:{"teams:refresh":we(he.refreshStateList,!1),"teams:add":we(he.addState,!1),"teams:add-local":we(he.addState,!0),"teams:update":we(he.updateState,!1),"teams:update-local":we(he.updateState,!0),"teams:delete":we(he.deleteState,!1),"teams:delete-local":we(he.deleteState,!0)},getState:ye,setState:ge},Ce=j.Widget,Oe=[],_e=Object(h.createStateStore)(Oe),Se=_e.getState,je=_e.setState,xe=_e.wrapEntry,Te=function(e,t){return xe(function(n,r,o){var a=r.dispatch,i=o&&o.payload;a({type:"reducer:widgets:update",payload:e(n,i,t)})})},Ne={entryMap:{"widgets:refresh":Te(Ce.refreshStateList,!1),"widgets:add":Te(Ce.addState,!1),"widgets:add-local":Te(Ce.addState,!0),"widgets:update":Te(Ce.updateState,!1),"widgets:update-local":Te(Ce.updateState,!0),"widgets:delete":Te(Ce.deleteState,!1),"widgets:delete-local":Te(Ce.deleteState,!0)},getState:Se,setState:je},Me={id:null,name:"",email:"",avatar:"",plan:{state:"",type:"free",rawType:"free",collaboratorLimitation:0,daysLeft:""}},ke=Object(h.createStateStore)(Me),Pe=ke.getState,Re=ke.setState,Ie=ke.wrapEntry,Le={entryMap:{"user:set":Ie(function(e,t,n){var o=t.dispatch,a=n.payload,i=a.id,c=void 0===i?null:i,s=a.name,u=void 0===s?"":s,l=a.email,p=void 0===l?"":l,f=a.avatar,d=void 0===f?"":f;o({type:"reducer:user:update",payload:w.Operation.objectMerge(e,{id:c,name:u,email:p,avatar:d,plan:r(a)})})}),"user:clear":Ie(function(e,t,n){(0,t.dispatch)({type:"reducer:user:update",payload:Me})})},getState:Pe,setState:Re},Ae={teamCid:null,projectCid:null,screenCid:null,userRole:"guest"},De=Object(h.createStateStore)(Ae),Be=De.getState,Fe=De.setState,Ue={"current:set":(0,De.wrapEntry)(function(e,t,n){var r=t.dispatch,a=n.payload,i=a.project,c=a.screen,s=a.userCollaborator;r({type:"reducer:current:update",payload:{teamCid:i&&i.team_cid||null,projectCid:i&&i.cid||null,screenCid:c&&c.cid||null,userRole:o(s&&s.role)}})})},He=new Set(["owner","admin","editor","viewer"]),qe={entryMap:Ue,getState:Be,setState:Fe},We={projectCid:null,unreadCommentMap:{},unreadCountThreadMap:{},unreadCountScreenMap:{}},Ke=Object(h.createStateStore)(We),Ve=Ke.getState,ze=Ke.setState,Ge=Ke.wrapEntry,Ye={entryMap:{"unread-comment:init-for-project":Ge(function(e,t,n){var r=t.dispatch,o=n.payload,c=o.projectCid,l=o.commentThreadList,p=o.commentList,f=a(c),d={},h={};l.forEach(function(e){var t=e.cid,n=e.screen_cid;h[t]=n,d[n]=f[n]});var m={},v={},y={};p.forEach(function(e){var t=e.cid,n=e.thread_cid,r=e.updated_at;(d[h[n]]||0)>=r||(m[t]=!0,u(v,n,1))}),l.forEach(function(e){var t=e.cid,n=e.screen_cid;return u(y,n,v[t]||0)}),i(c,d),s(),r({type:"reducer:unread-comment:update",payload:{projectCid:c,unreadCommentMap:m,unreadCountThreadMap:v,unreadCountScreenMap:y}})}),"unread-comment:set-unread":Ge(function(e,t,n){var r=t.dispatch,o=n.payload,a=o.commentCid,i=o.threadCid,s=o.screenCid,u=e.unreadCommentMap,l=e.unreadCountThreadMap,p=e.unreadCountScreenMap;u[a]||(r({type:"reducer:unread-comment:update",payload:w.Operation.objectMerge(e,{unreadCommentMap:w.Operation.objectSet(u,a,!0),unreadCountThreadMap:w.Operation.objectSet(l,i,(l[i]||0)+1),unreadCountScreenMap:w.Operation.objectSet(p,s,(p[s]||0)+1)})}),c(e.projectCid,s))}),"unread-comment:set-read":Ge(function(e,t,n){var r=t.dispatch,o=n.payload,a=o.commentCid,i=o.threadCid,s=o.screenCid,u=e.unreadCommentMap,l=e.unreadCountThreadMap,p=e.unreadCountScreenMap;u[a]&&(r({type:"reducer:unread-comment:update",payload:w.Operation.objectMerge(e,{unreadCommentMap:w.Operation.objectDelete(u,a),unreadCountThreadMap:w.Operation.objectSet(l,i,(l[i]||0)-1),unreadCountScreenMap:w.Operation.objectSet(p,s,(p[s]||0)-1)})}),c(e.projectCid,s))})},getState:Ve,setState:ze},Ze=(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e})({},L.entryMap,W.entryMap,X.entryMap,ae.entryMap,de.entryMap,Ee.entryMap,Ne.entryMap,Le.entryMap,qe.entryMap,Ye.entryMap,{"entry:add-mock-collaborator":function(e){var t=e.dispatch,n=Ee.getState(),r=ae.getState(),o=L.getState(),a=new Set(o.map(function(e){return e.cid})),i=0,c=function(e,n){var r="co_MOCK_"+e.cid;a.has(r)||(t({type:"collaborators:add-local",payload:{cid:r,role:"owner",user_id:e.owner_id,name:e.owner_name,email:e.owner_email||"email_MOCK_"+e.owner_id,avatar:e.owner_avatar,team_cid:n?e.cid:null,project_cid:n?null:e.cid}}),i++)};n.forEach(function(e){return c(e,!0)}),r.forEach(function(e){return c(e,!1)})},"entry:current:set":function(e,t){var n=e.dispatch,r=t.payload,o=r.project,a=r.screen,i=qe.getState(),c=o&&o.cid||i.projectCid,s=a&&a.cid||i.screenCid;n({type:"current:set",payload:{project:o=ae.getState().find(function(e){return e.cid===c}),screen:a=de.getState().find(function(e){return e.cid===s}),userCollaborator:o&&l(o.cid,o.team_cid)}})},"entry:current:set-screen":function(e,t){var n=e.dispatch,r=t.payload.cid,o=de.getState().find(function(e){return e.cid===r});if(!o)return console.warn("[entry:current:set-screen] non exist screen with cid: "+r);n({type:"entry:current:set",payload:{screen:o}})},"entry:unread-comment:init":function(e,t){var n=e.dispatch,r=qe.getState(),o=r.userRole,a=r.projectCid;"guest"!==o&&n({type:"unread-comment:init-for-project",payload:{projectCid:a,commentThreadList:X.getState(),commentList:W.getState()}})},"entry:comment-threads:add":function(e,t){var n=e.dispatch,r=t.payload,o=r.top,a=r.left,i=r.message,c=Le.getState(),s=qe.getState(),u=s.screenCid,l=s.projectCid,p=100/ae.getState().find(function(e){return e.cid===l}).scale,f=.001*Date.now(),d=g.a.SpineModel.requestCid("cmth");n({type:i?"comment-threads:add":"comment-threads:add-local",payload:{cid:d,top:Math.round(o*p),left:Math.round(a*p),screen_cid:u,user_id:c.id,created_at:f,updated_at:f}}),i&&n({type:"comments:add",payload:{thread_cid:d,message:i,user_id:c.id,created_at:f,updated_at:f}}),n({type:"container:comment:select",payload:{select:d}})},"entry:comment-threads:update":function(e,t){var n=e.dispatch,r=t.payload,o=r.cid,a=r.top,i=r.left,c=void 0===W.getState().find(function(e){return e.thread_cid===o}),s=.001*Date.now(),u=qe.getState().projectCid,l=100/ae.getState().find(function(e){return e.cid===u}).scale;n({type:c?"comment-threads:update-local":"comment-threads:update",payload:{cid:o,top:Math.round(a*l),left:Math.round(i*l),updated_at:s}})},"entry:comment-threads:delete":function(e,t){var n=e.dispatch,r=t.payload.cid;n({type:"comment-threads:delete",payload:{cid:r}}),W.getState().forEach(function(e){return e.thread_cid===r&&n({type:"comments:delete-local",payload:e})})},"entry:comments:add":function(e,t){var n=e.dispatch,r=t.payload,o=r.thread_cid,a=r.message,i=Le.getState(),c=.001*Date.now();n({type:"comment-threads:save",payload:{cid:o}}),n({type:"comments:add",payload:{thread_cid:o,message:a,user_id:i.id,created_at:c,updated_at:c}})},"entry:comments:update":function(e,t){var n=e.dispatch,r=t.payload;n({type:"comments:update",payload:{cid:r.cid,message:r.message,updated_at:.001*Date.now()}})},"entry:state:push-data":function(e,t){var n=e.dispatch,r=t.payload,o=r.pushType,a=r.action,i=r.data;switch(o){case"comment-threads":var c=X.getState().find(function(e){return e.cid===i.cid});"update"!==a||c?"update"===a&&c?n({type:"comment-threads:update-local",payload:i}):"destroy"===a&&c&&(n({type:"comment-threads:delete-local",payload:i}),W.getState().forEach(function(e){return e.thread_cid===i.cid&&n({type:"comments:delete-local",payload:e})})):n({type:"comment-threads:add-local",payload:i});break;case"comments":var s=W.getState().find(function(e){return e.cid===i.cid});"update"!==a||s?"update"===a&&s?n({type:"comments:update-local",payload:i}):"destroy"===a&&s&&n({type:"comments:delete-local",payload:i}):n({type:"comments:add-local",payload:i});var u=qe.getState().screenCid,l=X.getState().find(function(e){return e.cid===i.thread_cid});l&&l.screen_cid===u&&n({type:"unread-comment:set-unread",payload:{commentCid:i.cid,threadCid:l.cid,screenCid:u}})}},"entry:projects:delete":function(e,t){var n=e.dispatch,r=t.payload,o=Le.getState(),a=r.owner_id===o.id||r.canAdmin()&&r.team_cid,i=a?I18N.del_app_title:I18N.exit_app_title,c=(a?I18N.del_app_desc:I18N.exit_app_desc).replace("%s",r.name);n({type:"container:modal:open",payload:{title:i,desc:c,isHTML:!0,canCancel:!0,canConfirm:!0,onConfirm:function(){if(a)n({type:"projects:delete",payload:r});else{var e=L.getState().find(function(e){return e.project_cid===r.cid&&e.user_id===o.id});n({type:"collaborators:delete",payload:e}),n({type:"projects:delete-local",payload:r})}}}})},"entry:teams:delete":function(e,t){var n=e.dispatch,r=t.payload,o=Le.getState(),a=r.owner_id===o.id;if(a&&r.cprojects().length>0)return n({type:"container:modal:open",payload:{title:I18N.warning,desc:I18N.delete_projects_first,canCancel:!1,canConfirm:!0}});n({type:"container:modal:open",payload:{title:a?I18N.del_team_title:I18N.exit_team_title,desc:(a?I18N.del_team_desc:I18N.exit_team_desc).replace(/%s/,r.name),isHTML:!0,canCancel:!0,canConfirm:!0,onConfirm:function(){if(a)n({type:"teams:delete",payload:r});else{var e=L.getState().find(function(e){return e.team_cid===r.cid&&e.user_id===o.id});n({type:"collaborators:delete",payload:e}),n({type:"teams:delete-local",payload:r})}}}})}}),Je={collaborators:p("reducer:collaborators:update",L),comments:p("reducer:comments:update",W),commentThreads:p("reducer:comment-threads:update",X),projects:p("reducer:projects:update",ae),screens:p("reducer:screens:update",de),teams:p("reducer:teams:update",Ee),widgets:p("reducer:widgets:update",Ne),user:Object(h.createStateStoreReducer)("reducer:user:update",Le),current:Object(h.createStateStoreReducer)("reducer:current:update",qe),unreadComment:Object(h.createStateStoreReducer)("reducer:unread-comment:update",Ye)},Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qe=Object(v.composeWithDevTools)({});t.a=function(e){var t=e.viewMap,n=e.containerReducerMap,r=e.sagaMap,o=e.extendCallback,a=new y.a;if(t)for(var i in t)a.setView(i,t[i]);var c=f({initialState:{model:{},container:{}},entryMap:Xe({},Ze,b,{"entry:webpack-interface:view:call":function(e,t){var n=t.payload;setTimeout(function(){return a.callViewMethod.apply(a,[n.name,n.method].concat(n.args||{}))},0)}}),reducerMap:{model:Object(d.combineReducers)(Je),container:Object(d.combineReducers)(n)},sagaMap:r}).store;return a.setStore(c),o&&o(a),a}},t8rQ:function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},tHks:function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),c=i.length;c--;){var s=i[e?c:++o];if(!1===n(a[s],s,a))break}return t}}},tO4o:function(e,t,n){var r=n("yCNF");e.exports=function(e){return e===e&&!r(e)}},tnSy:function(e,t){},tv3T:function(e,t,n){var r=n("i4ON"),o=n("nw3t");e.exports=function(e,t,n,a){var i=!n;n||(n={});for(var c=-1,s=t.length;++c<s;){var u=t[c],l=a?a(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),i?o(n,u,l):r(n,u,l)}return n}},uCi2:function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},ucRi:function(e,t){e.exports={"comment-panel":"_15VIdqQAl4f9SZftvGqbx3"}},vLgD:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("HN2V"),o=n.n(r),a=n("OAwv"),i=n.n(a),c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={credentials:"include",method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}},a=i.a.stringify(t,{arrayFormat:"bracket"}),c=a?e+"?"+a:e,s=void 0;return n.body&&(s=i.a.stringify(n.body,{arrayFormat:"bracket"})),fetch(c,o()({},r,n,{body:s})).then(function(e){if(e.status>=400)throw new Error(e.status);return e.json()})}},vi0E:function(e,t,n){var r=n("f931")(Object.getPrototypeOf,Object);e.exports=r},vxJQ:function(e,t,n){var r=n("5Zxu"),o=n("kxzG"),a=n("ZT2e"),i=Math.min;e.exports=function(e){var t=Math[e];return function(e,n){if(e=o(e),n=null==n?0:i(r(n),292)){var c=(a(e)+"e").split("e"),s=t(c[0]+"e"+(+c[1]+n));return+((c=(a(s)+"e").split("e"))[0]+"e"+(+c[1]-n))}return t(e)}}},w2Dv:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n},l=function(e,t){return t.forEach(function(n){e.has(n)&&console.error("duplicate name in set",e,t,n),e.add(n)}),e},p=function(e,t){return e instanceof Object&&t in e},f=function(e){return p(e,"toStructJSON")?e.toStructJSON():e},d=function(e,t){return console.error("DEFAULT_REDUCER",e,t),e},h=function(){function e(t,n,r){i(this,e),this.name=t,this.struct=n,this.actMap=r,this.initialState=null,this.acceptNameSet=null,this.actionReducer=null,this.structReducer=null,this.reducer=null}return s(e,[{key:"getActionReducer",value:function(){var e=this.actMap;return function(t,n){var r=n.type,o=n.payload,a=e[r];return a?a(t,o):t}}},{key:"getReducer",value:function(){var e=this.name,t=this.initialState,n=this.acceptNameSet,r=this.actionReducer,o=this.structReducer,a=function(t,n){return void 0!==n.type&&n.name===e?r(t,n):o(t,n)};return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,o=arguments[1];return n.has(o.name)?void 0!==o.batch&&o.name===e?o.batch.reduce(a,r):a(r,o):r}}},{key:"toStructJSON",value:function(){return f(this.struct)}}]),e}(),m=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),c={},s=new Set;s.add(a.name);var u=[];for(var p in a.struct)if(a.struct.hasOwnProperty(p)){var f=a.struct[p],d=f instanceof h;c[p]=d?f.initialState:f,d&&(l(s,f.acceptNameSet),u.push(p))}return a.initialState=c,a.acceptNameSet=s,a.structReducer=t.getStructReducer(u,a.struct),a.actionReducer=a.getActionReducer(),a.reducer=a.getReducer(),a}return a(t,h),s(t,[{key:"toStructJSON",value:function(){return u(this.struct,f)}}],[{key:"getStructReducer",value:function(e,t){return function(n,r){for(var o=!1,a={},i=0;i<e.length;i++){var s=e[i],u=t[s],l=n[s],p=u.reducer(l,r);a[s]=p,o=o||p!==l}return o?c({},n,a):n}}}]),t}(),v=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),c=a.struct[0],s=c instanceof h,u=new Set;return u.add(a.name),a.initialState=[],a.acceptNameSet=u,a.structReducer=s?t.getStructReducer(c):d,a.actionReducer=a.getActionReducer(),a.reducer=a.getReducer(),a}return a(t,h),s(t,[{key:"toStructJSON",value:function(){return this.struct.map(f)}}],[{key:"getStructReducer",value:function(e){return function(n,o){function a(t,o,a){var s=e.reducer(t,o);t!==s&&(i||(c=[].concat(r(n))),c[a]=s,i=!0)}var i=!1,c=null;if(void 0!==o.index)a(n[o.index],o.payload,o.index);else if(void 0!==o.filter){var s=t.getFilter(o.filter);s&&n.forEach(function(e,t){return s(e,t)&&a(e,o.payload,t)})}return i?c:n}}},{key:"getFilter",value:function(e){switch(e.type){case"key-value":var t=e.key,n=e.value;return function(e,r){return e[t]===n}}return null}}]),t}();t.Scheme=h,t.ObjectScheme=m,t.ArrayScheme=v},wB9c:function(e,t,n){"use strict";function r(e){var t=e.dispatch,n=void 0===t?MB.webpackInterface.store.dispatch:t,r=e.type,o=void 0===r?"alert":r,a=e.title,i=e.desc,c=e.isHTML,s=e.confirmText,u=e.cancelText;return new Promise(function(e){return n({type:"container:modal:open",payload:{type:o,title:a,desc:i,isHTML:c,canCancel:!0,canConfirm:!0,cancelText:u,confirmText:s,onCancel:function(){return e(!1)},onConfirm:function(){return e(!0)}}})})}function o(e){var t=e.dispatch,n=void 0===t?MB.webpackInterface.store.dispatch:t,r=e.type,o=void 0===r?"alert":r,a=e.title,i=e.desc,c=e.isHTML,s=e.confirmText;return new Promise(function(e){return n({type:"container:modal:open",payload:{type:o,title:a,desc:i,isHTML:c,canCancel:!1,canConfirm:!0,confirmText:s,onConfirm:function(){return e(!0)}}})})}t.b=r,t.a=o,Object.assign(MB,{confirm:r,alert:o})},wFrT:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("RH2O"),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s={isOpen:!1,type:"alert",title:"",desc:"",onClose:function(){return null},onCancel:null,onConfirm:null,cancelText:void 0,confirmText:void 0,canCancel:!0,canConfirm:!0},u=n("KSGD"),l=n.n(u),p=n("GiK3"),f=n.n(p),d=n("/MvA"),h=(n("UJYK"),function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.render=function(){var e=this.props,t=e.dispatch,n=e.isOpen,r=e.type,o=e.title,a=e.desc,i=void 0===a?o:a,c=e.isHTML,s=e.onClose,u=void 0===s?function(){return t({type:"container:modal:close"})}:s,l=e.onCancel,p=void 0===l?function(){return null}:l,h=e.onConfirm,m=e.canCancel,v=e.canConfirm,y=e.cancelText,g=e.confirmText,b=m?function(){p&&p(),u&&u()}:void 0,w=v?function(){h&&h(),u&&u()}:void 0;return f.a.createElement(d.a,{isOpen:n,type:r,portalClassName:"global-alert-portal",title:o===i?I18N.reminder:o,onClose:function(){"function"==typeof p&&p(),u()},onCancel:b,onConfirm:w,cancelText:y,confirmText:g},c?f.a.createElement("p",{className:"desc",dangerouslySetInnerHTML:{__html:i}}):f.a.createElement("p",{className:"desc"},i))},t}(p.PureComponent));h.propTypes={dispatch:l.a.func,isOpen:l.a.bool,type:l.a.string,onClose:l.a.func,onCancel:l.a.func,onConfirm:l.a.func,canCancel:l.a.bool,canConfirm:l.a.bool,confirmText:l.a.string,cancelText:l.a.string,title:l.a.string,desc:l.a.any,isHTML:l.a.bool},h.defaultProps={type:"alert"};var m=h,v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y={Alert:Object(i.connect)(function(e){return v({},e.container.alert)})(m)};t.a={reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments[1],n=t.type,r=t.payload;switch(n){case"container:modal:open":return c({},r,{isOpen:!0});case"container:modal:close":return c({},e,{isOpen:!1})}return e},containers:y}},wSKX:function(e,t){e.exports=function(e){return e}},xJpq:function(e,t,n){"use strict";function r(){function e(){if(n&&r.length)throw Object(a.m)("Cannot have a closed channel with pending takers");if(r.length&&!t.isEmpty())throw Object(a.m)("Cannot have pending takers with non empty buffer")}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.a.fixed(),n=!1,r=[];return Object(a.g)(t,a.n.buffer,p),{take:function(o){e(),Object(a.g)(o,a.n.func,"channel.take's callback must be a function"),n&&t.isEmpty()?o(u):t.isEmpty()?(r.push(o),o.cancel=function(){return Object(a.t)(r,o)}):o(t.take())},put:function(o){if(e(),Object(a.g)(o,a.n.notUndef,f),!n){if(!r.length)return t.put(o);for(var i=0;i<r.length;i++){var c=r[i];if(!c[a.b]||c[a.b](o))return r.splice(i,1),c(o)}}},flush:function(r){e(),Object(a.g)(r,a.n.func,"channel.flush' callback must be a function"),r(n&&t.isEmpty()?u:t.flush())},close:function(){if(e(),!n&&(n=!0,r.length)){var t=r;r=[];for(var o=0,a=t.length;o<a;o++)t[o](u)}},get __takers__(){return r},get __closed__(){return n}}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.a.none(),n=arguments[2];arguments.length>2&&Object(a.g)(n,a.n.func,"Invalid match function passed to eventChannel");var o=r(t),c=function(){o.__closed__||(s&&s(),o.close())},s=e(function(e){l(e)?c():n&&!n(e)||o.put(e)});if(o.__closed__&&s(),!a.n.func(s))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:o.take,flush:o.flush,close:c}}n.d(t,"a",function(){return u}),n.d(t,"d",function(){return l}),t.b=function(){var e=[];return{subscribe:function(t){return e.push(t),function(){return Object(a.t)(e,t)}},emit:function(t){for(var n=e.slice(),r=0,o=n.length;r<o;r++)n[r](t)}}},t.c=o,t.e=function(e){var t=o(function(t){return e(function(e){e[a.c]?t(e):Object(c.a)(function(){return t(e)})})});return s({},t,{take:function(e,n){arguments.length>1&&(Object(a.g)(n,a.n.func,"channel.take's matcher argument must be a function"),e[a.b]=n),t.take(e)}})};var a=n("Vr3j"),i=n("cXw4"),c=n("2Bk7"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u={type:"@@redux-saga/CHANNEL_END"},l=function(e){return e&&"@@redux-saga/CHANNEL_END"===e.type},p="invalid buffer passed to channel factory function",f="Saga was provided with an undefined action"},xdPp:function(e,t,n){var r=n("rU0D")("toUpperCase");e.exports=r},yCNF:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},yxsw:function(e,t){var n=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return n.test(e)}},zBOP:function(e,t){e.exports=function(){return!1}},zzRL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}}});
//# sourceMappingURL=lib-preview-e298fd0611bf3829f4c2.js.map